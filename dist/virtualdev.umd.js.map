{"version":3,"file":"virtualdev.umd.js","sources":["../node_modules/three/examples/jsm/controls/OrbitControls.js","../node_modules/three/examples/jsm/webxr/VRButton.js","../node_modules/three/examples/jsm/webxr/XRButton.js","../src/core/inputs.js","../src/ui/outliner.js","../src/core/entity.js","../src/virtualdev.js","../src/extras/stats-gl/core.js","../src/extras/stats-gl/panel.js","../src/extras/stats-gl/panelVsync.js","../src/extras/stats-gl/panelTexture.js","../src/extras/stats-gl/textureCapture.js","../src/extras/stats-gl/main.js"],"sourcesContent":["import {\n\tControls,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3,\n\tPlane,\n\tRay,\n\tMathUtils\n} from 'three';\n\n/**\n * Fires when the camera has been transformed by the controls.\n *\n * @event OrbitControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires when an interaction was initiated.\n *\n * @event OrbitControls#start\n * @type {Object}\n */\nconst _startEvent = { type: 'start' };\n\n/**\n * Fires when an interaction has finished.\n *\n * @event OrbitControls#end\n * @type {Object}\n */\nconst _endEvent = { type: 'end' };\n\nconst _ray = new Ray();\nconst _plane = new Plane();\nconst _TILT_LIMIT = Math.cos( 70 * MathUtils.DEG2RAD );\n\nconst _v = new Vector3();\nconst _twoPI = 2 * Math.PI;\n\nconst _STATE = {\n\tNONE: - 1,\n\tROTATE: 0,\n\tDOLLY: 1,\n\tPAN: 2,\n\tTOUCH_ROTATE: 3,\n\tTOUCH_PAN: 4,\n\tTOUCH_DOLLY_PAN: 5,\n\tTOUCH_DOLLY_ROTATE: 6\n};\nconst _EPS = 0.000001;\n\n\n/**\n * Orbit controls allow the camera to orbit around a target.\n *\n * OrbitControls performs orbiting, dollying (zooming), and panning. Unlike {@link TrackballControls},\n * it maintains the \"up\" direction `object.up` (+Y by default).\n *\n * - Orbit: Left mouse / touch: one-finger move.\n * - Zoom: Middle mouse, or mousewheel / touch: two-finger spread or squish.\n * - Pan: Right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move.\n *\n * ```js\n * const controls = new OrbitControls( camera, renderer.domElement );\n *\n * // controls.update() must be called after any manual changes to the camera's transform\n * camera.position.set( 0, 20, 100 );\n * controls.update();\n *\n * function animate() {\n *\n * \t// required if controls.enableDamping or controls.autoRotate are set to true\n * \tcontrols.update();\n *\n * \trenderer.render( scene, camera );\n *\n * }\n * ```\n *\n * @augments Controls\n * @three_import import { OrbitControls } from 'three/addons/controls/OrbitControls.js';\n */\nclass OrbitControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Object3D} object - The object that is managed by the controls.\n\t * @param {?HTMLElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( object, domElement = null ) {\n\n\t\tsuper( object, domElement );\n\n\t\tthis.state = _STATE.NONE;\n\n\t\t/**\n\t\t * The focus point of the controls, the `object` orbits around this.\n\t\t * It can be updated manually at any point to change the focus of the controls.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target = new Vector3();\n\n\t\t/**\n\t\t * The focus point of the `minTargetRadius` and `maxTargetRadius` limits.\n\t\t * It can be updated manually at any point to change the center of interest\n\t\t * for the `target`.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.cursor = new Vector3();\n\n\t\t/**\n\t\t * How far you can dolly in (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minDistance = 0;\n\n\t\t/**\n\t\t * How far you can dolly out (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxDistance = Infinity;\n\n\t\t/**\n\t\t * How far you can zoom in (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minZoom = 0;\n\n\t\t/**\n\t\t * How far you can zoom out (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxZoom = Infinity;\n\n\t\t/**\n\t\t * How close you can get the target to the 3D `cursor`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minTargetRadius = 0;\n\n\t\t/**\n\t\t * How far you can move the target from the 3D `cursor`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxTargetRadius = Infinity;\n\n\t\t/**\n\t\t * How far you can orbit vertically, lower limit. Range is `[0, Math.PI]` radians.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minPolarAngle = 0;\n\n\t\t/**\n\t\t * How far you can orbit vertically, upper limit. Range is `[0, Math.PI]` radians.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Math.PI\n\t\t */\n\t\tthis.maxPolarAngle = Math.PI;\n\n\t\t/**\n\t\t * How far you can orbit horizontally, lower limit. If set, the interval `[ min, max ]`\n\t\t * must be a sub-interval of `[ - 2 PI, 2 PI ]`, with `( max - min < 2 PI )`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tthis.minAzimuthAngle = - Infinity;\n\n\t\t/**\n\t\t * How far you can orbit horizontally, upper limit. If set, the interval `[ min, max ]`\n\t\t * must be a sub-interval of `[ - 2 PI, 2 PI ]`, with `( max - min < 2 PI )`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default -Infinity\n\t\t */\n\t\tthis.maxAzimuthAngle = Infinity;\n\n\t\t/**\n\t\t * Set to `true` to enable damping (inertia), which can be used to give a sense of weight\n\t\t * to the controls. Note that if this is enabled, you must call `update()` in your animation\n\t\t * loop.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.enableDamping = false;\n\n\t\t/**\n\t\t * The damping inertia used if `enableDamping` is set to `true`.\n\t\t *\n\t\t * Note that for this to work, you must call `update()` in your animation loop.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.05\n\t\t */\n\t\tthis.dampingFactor = 0.05;\n\n\t\t/**\n\t\t * Enable or disable zooming (dollying) of the camera.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableZoom = true;\n\n\t\t/**\n\t\t * Speed of zooming / dollying.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t/**\n\t\t * Enable or disable horizontal and vertical rotation of the camera.\n\t\t *\n\t\t * Note that it is possible to disable a single axis by setting the min and max of the\n\t\t * `minPolarAngle` or `minAzimuthAngle` to the same value, which will cause the vertical\n\t\t * or horizontal rotation to be fixed at that value.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableRotate = true;\n\n\t\t/**\n\t\t * Speed of rotation.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t/**\n\t\t * How fast to rotate the camera when the keyboard is used.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.keyRotateSpeed = 1.0;\n\n\t\t/**\n\t\t * Enable or disable camera panning.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enablePan = true;\n\n\t\t/**\n\t\t * Speed of panning.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.panSpeed = 1.0;\n\n\t\t/**\n\t\t * Defines how the camera's position is translated when panning. If `true`, the camera pans\n\t\t * in screen space. Otherwise, the camera pans in the plane orthogonal to the camera's up\n\t\t * direction.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.screenSpacePanning = true;\n\n\t\t/**\n\t\t * How fast to pan the camera when the keyboard is used in\n\t\t * pixels per keypress.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 7\n\t\t */\n\t\tthis.keyPanSpeed = 7.0;\n\n\t\t/**\n\t\t * Setting this property to `true` allows to zoom to the cursor's position.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.zoomToCursor = false;\n\n\t\t/**\n\t\t * Set to true to automatically rotate around the target\n\t\t *\n\t\t * Note that if this is enabled, you must call `update()` in your animation loop.\n\t\t * If you want the auto-rotate speed to be independent of the frame rate (the refresh\n\t\t * rate of the display), you must pass the time `deltaTime`, in seconds, to `update()`.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.autoRotate = false;\n\n\t\t/**\n\t\t * How fast to rotate around the target if `autoRotate` is `true`. The default  equates to 30 seconds\n\t\t * per orbit at 60fps.\n\t\t *\n\t\t * Note that if `autoRotate` is enabled, you must call `update()` in your animation loop.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 2\n\t\t */\n\t\tthis.autoRotateSpeed = 2.0;\n\n\t\t/**\n\t\t * This object contains references to the keycodes for controlling camera panning.\n\t\t *\n\t\t * ```js\n\t\t * controls.keys = {\n\t\t * \tLEFT: 'ArrowLeft', //left arrow\n\t\t * \tUP: 'ArrowUp', // up arrow\n\t\t * \tRIGHT: 'ArrowRight', // right arrow\n\t\t * \tBOTTOM: 'ArrowDown' // down arrow\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t/**\n\t\t * This object contains references to the mouse actions used by the controls.\n\t\t *\n\t\t * ```js\n\t\t * controls.mouseButtons = {\n\t\t * \tLEFT: THREE.MOUSE.ROTATE,\n\t\t * \tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t * \tRIGHT: THREE.MOUSE.PAN\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t/**\n\t\t * This object contains references to the touch actions used by the controls.\n\t\t *\n\t\t * ```js\n\t\t * controls.mouseButtons = {\n\t\t * \tONE: THREE.TOUCH.ROTATE,\n\t\t * \tTWO: THREE.TOUCH.DOLLY_PAN\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t/**\n\t\t * Used internally by `saveState()` and `reset()`.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target0 = this.target.clone();\n\n\t\t/**\n\t\t * Used internally by `saveState()` and `reset()`.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.position0 = this.object.position.clone();\n\n\t\t/**\n\t\t * Used internally by `saveState()` and `reset()`.\n\t\t *\n\t\t * @type {number}\n\t\t */\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t// internals\n\n\t\tthis._lastPosition = new Vector3();\n\t\tthis._lastQuaternion = new Quaternion();\n\t\tthis._lastTargetPosition = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tthis._quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tthis._quatInverse = this._quat.clone().invert();\n\n\t\t// current position in spherical coordinates\n\t\tthis._spherical = new Spherical();\n\t\tthis._sphericalDelta = new Spherical();\n\n\t\tthis._scale = 1;\n\t\tthis._panOffset = new Vector3();\n\n\t\tthis._rotateStart = new Vector2();\n\t\tthis._rotateEnd = new Vector2();\n\t\tthis._rotateDelta = new Vector2();\n\n\t\tthis._panStart = new Vector2();\n\t\tthis._panEnd = new Vector2();\n\t\tthis._panDelta = new Vector2();\n\n\t\tthis._dollyStart = new Vector2();\n\t\tthis._dollyEnd = new Vector2();\n\t\tthis._dollyDelta = new Vector2();\n\n\t\tthis._dollyDirection = new Vector3();\n\t\tthis._mouse = new Vector2();\n\t\tthis._performCursorZoom = false;\n\n\t\tthis._pointers = [];\n\t\tthis._pointerPositions = {};\n\n\t\tthis._controlActive = false;\n\n\t\t// event listeners\n\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onMouseWheel = onMouseWheel.bind( this );\n\t\tthis._onKeyDown = onKeyDown.bind( this );\n\n\t\tthis._onTouchStart = onTouchStart.bind( this );\n\t\tthis._onTouchMove = onTouchMove.bind( this );\n\n\t\tthis._onMouseDown = onMouseDown.bind( this );\n\t\tthis._onMouseMove = onMouseMove.bind( this );\n\n\t\tthis._interceptControlDown = interceptControlDown.bind( this );\n\t\tthis._interceptControlUp = interceptControlUp.bind( this );\n\n\t\t//\n\n\t\tif ( this.domElement !== null ) {\n\n\t\t\tthis.connect( this.domElement );\n\n\t\t}\n\n\t\tthis.update();\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerUp );\n\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\t\tthis.domElement.addEventListener( 'wheel', this._onMouseWheel, { passive: false } );\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\t\tdocument.addEventListener( 'keydown', this._interceptControlDown, { passive: true, capture: true } );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.ownerDocument.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.ownerDocument.removeEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerUp );\n\n\t\tthis.domElement.removeEventListener( 'wheel', this._onMouseWheel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.stopListenToKeyEvents();\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\t\tdocument.removeEventListener( 'keydown', this._interceptControlDown, { capture: true } );\n\n\t\tthis.domElement.style.touchAction = 'auto';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\t/**\n\t * Get the current vertical rotation, in radians.\n\t *\n\t * @return {number} The current vertical rotation, in radians.\n\t */\n\tgetPolarAngle() {\n\n\t\treturn this._spherical.phi;\n\n\t}\n\n\t/**\n\t * Get the current horizontal rotation, in radians.\n\t *\n\t * @return {number} The current horizontal rotation, in radians.\n\t */\n\tgetAzimuthalAngle() {\n\n\t\treturn this._spherical.theta;\n\n\t}\n\n\t/**\n\t * Returns the distance from the camera to the target.\n\t *\n\t * @return {number} The distance from the camera to the target.\n\t */\n\tgetDistance() {\n\n\t\treturn this.object.position.distanceTo( this.target );\n\n\t}\n\n\t/**\n\t * Adds key event listeners to the given DOM element.\n\t * `window` is a recommended argument for using this method.\n\t *\n\t * @param {HTMLElement} domElement - The DOM element\n\t */\n\tlistenToKeyEvents( domElement ) {\n\n\t\tdomElement.addEventListener( 'keydown', this._onKeyDown );\n\t\tthis._domElementKeyEvents = domElement;\n\n\t}\n\n\t/**\n\t * Removes the key event listener previously defined with `listenToKeyEvents()`.\n\t */\n\tstopListenToKeyEvents() {\n\n\t\tif ( this._domElementKeyEvents !== null ) {\n\n\t\t\tthis._domElementKeyEvents.removeEventListener( 'keydown', this._onKeyDown );\n\t\t\tthis._domElementKeyEvents = null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Save the current state of the controls. This can later be recovered with `reset()`.\n\t */\n\tsaveState() {\n\n\t\tthis.target0.copy( this.target );\n\t\tthis.position0.copy( this.object.position );\n\t\tthis.zoom0 = this.object.zoom;\n\n\t}\n\n\t/**\n\t * Reset the controls to their state from either the last time the `saveState()`\n\t * was called, or the initial state.\n\t */\n\treset() {\n\n\t\tthis.target.copy( this.target0 );\n\t\tthis.object.position.copy( this.position0 );\n\t\tthis.object.zoom = this.zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t\tthis.update();\n\n\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tupdate( deltaTime = null ) {\n\n\t\tconst position = this.object.position;\n\n\t\t_v.copy( position ).sub( this.target );\n\n\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t_v.applyQuaternion( this._quat );\n\n\t\t// angle from z-axis around y-axis\n\t\tthis._spherical.setFromVector3( _v );\n\n\t\tif ( this.autoRotate && this.state === _STATE.NONE ) {\n\n\t\t\tthis._rotateLeft( this._getAutoRotationAngle( deltaTime ) );\n\n\t\t}\n\n\t\tif ( this.enableDamping ) {\n\n\t\t\tthis._spherical.theta += this._sphericalDelta.theta * this.dampingFactor;\n\t\t\tthis._spherical.phi += this._sphericalDelta.phi * this.dampingFactor;\n\n\t\t} else {\n\n\t\t\tthis._spherical.theta += this._sphericalDelta.theta;\n\t\t\tthis._spherical.phi += this._sphericalDelta.phi;\n\n\t\t}\n\n\t\t// restrict theta to be between desired limits\n\n\t\tlet min = this.minAzimuthAngle;\n\t\tlet max = this.maxAzimuthAngle;\n\n\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\tif ( min < - Math.PI ) min += _twoPI; else if ( min > Math.PI ) min -= _twoPI;\n\n\t\t\tif ( max < - Math.PI ) max += _twoPI; else if ( max > Math.PI ) max -= _twoPI;\n\n\t\t\tif ( min <= max ) {\n\n\t\t\t\tthis._spherical.theta = Math.max( min, Math.min( max, this._spherical.theta ) );\n\n\t\t\t} else {\n\n\t\t\t\tthis._spherical.theta = ( this._spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\tMath.max( min, this._spherical.theta ) :\n\t\t\t\t\tMath.min( max, this._spherical.theta );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restrict phi to be between desired limits\n\t\tthis._spherical.phi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, this._spherical.phi ) );\n\n\t\tthis._spherical.makeSafe();\n\n\n\t\t// move target to panned location\n\n\t\tif ( this.enableDamping === true ) {\n\n\t\t\tthis.target.addScaledVector( this._panOffset, this.dampingFactor );\n\n\t\t} else {\n\n\t\t\tthis.target.add( this._panOffset );\n\n\t\t}\n\n\t\t// Limit the target distance from the cursor to create a sphere around the center of interest\n\t\tthis.target.sub( this.cursor );\n\t\tthis.target.clampLength( this.minTargetRadius, this.maxTargetRadius );\n\t\tthis.target.add( this.cursor );\n\n\t\tlet zoomChanged = false;\n\t\t// adjust the camera position based on zoom only if we're not zooming to the cursor or if it's an ortho camera\n\t\t// we adjust zoom later in these cases\n\t\tif ( this.zoomToCursor && this._performCursorZoom || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._spherical.radius = this._clampDistance( this._spherical.radius );\n\n\t\t} else {\n\n\t\t\tconst prevRadius = this._spherical.radius;\n\t\t\tthis._spherical.radius = this._clampDistance( this._spherical.radius * this._scale );\n\t\t\tzoomChanged = prevRadius != this._spherical.radius;\n\n\t\t}\n\n\t\t_v.setFromSpherical( this._spherical );\n\n\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t_v.applyQuaternion( this._quatInverse );\n\n\t\tposition.copy( this.target ).add( _v );\n\n\t\tthis.object.lookAt( this.target );\n\n\t\tif ( this.enableDamping === true ) {\n\n\t\t\tthis._sphericalDelta.theta *= ( 1 - this.dampingFactor );\n\t\t\tthis._sphericalDelta.phi *= ( 1 - this.dampingFactor );\n\n\t\t\tthis._panOffset.multiplyScalar( 1 - this.dampingFactor );\n\n\t\t} else {\n\n\t\t\tthis._sphericalDelta.set( 0, 0, 0 );\n\n\t\t\tthis._panOffset.set( 0, 0, 0 );\n\n\t\t}\n\n\t\t// adjust camera position\n\t\tif ( this.zoomToCursor && this._performCursorZoom ) {\n\n\t\t\tlet newRadius = null;\n\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t// move the camera down the pointer ray\n\t\t\t\t// this method avoids floating point error\n\t\t\t\tconst prevRadius = _v.length();\n\t\t\t\tnewRadius = this._clampDistance( prevRadius * this._scale );\n\n\t\t\t\tconst radiusDelta = prevRadius - newRadius;\n\t\t\t\tthis.object.position.addScaledVector( this._dollyDirection, radiusDelta );\n\t\t\t\tthis.object.updateMatrixWorld();\n\n\t\t\t\tzoomChanged = !! radiusDelta;\n\n\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t// adjust the ortho camera position based on zoom changes\n\t\t\t\tconst mouseBefore = new Vector3( this._mouse.x, this._mouse.y, 0 );\n\t\t\t\tmouseBefore.unproject( this.object );\n\n\t\t\t\tconst prevZoom = this.object.zoom;\n\t\t\t\tthis.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / this._scale ) );\n\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\tzoomChanged = prevZoom !== this.object.zoom;\n\n\t\t\t\tconst mouseAfter = new Vector3( this._mouse.x, this._mouse.y, 0 );\n\t\t\t\tmouseAfter.unproject( this.object );\n\n\t\t\t\tthis.object.position.sub( mouseAfter ).add( mouseBefore );\n\t\t\t\tthis.object.updateMatrixWorld();\n\n\t\t\t\tnewRadius = _v.length();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.' );\n\t\t\t\tthis.zoomToCursor = false;\n\n\t\t\t}\n\n\t\t\t// handle the placement of the target\n\t\t\tif ( newRadius !== null ) {\n\n\t\t\t\tif ( this.screenSpacePanning ) {\n\n\t\t\t\t\t// position the orbit target in front of the new camera position\n\t\t\t\t\tthis.target.set( 0, 0, - 1 )\n\t\t\t\t\t\t.transformDirection( this.object.matrix )\n\t\t\t\t\t\t.multiplyScalar( newRadius )\n\t\t\t\t\t\t.add( this.object.position );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// get the ray and translation plane to compute target\n\t\t\t\t\t_ray.origin.copy( this.object.position );\n\t\t\t\t\t_ray.direction.set( 0, 0, - 1 ).transformDirection( this.object.matrix );\n\n\t\t\t\t\t// if the camera is 20 degrees above the horizon then don't adjust the focus target to avoid\n\t\t\t\t\t// extremely large values\n\t\t\t\t\tif ( Math.abs( this.object.up.dot( _ray.direction ) ) < _TILT_LIMIT ) {\n\n\t\t\t\t\t\tthis.object.lookAt( this.target );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( this.object.up, this.target );\n\t\t\t\t\t\t_ray.intersectPlane( _plane, this.target );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\tconst prevZoom = this.object.zoom;\n\t\t\tthis.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / this._scale ) );\n\n\t\t\tif ( prevZoom !== this.object.zoom ) {\n\n\t\t\t\tthis.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._scale = 1;\n\t\tthis._performCursorZoom = false;\n\n\t\t// update condition is:\n\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\tif ( zoomChanged ||\n\t\t\tthis._lastPosition.distanceToSquared( this.object.position ) > _EPS ||\n\t\t\t8 * ( 1 - this._lastQuaternion.dot( this.object.quaternion ) ) > _EPS ||\n\t\t\tthis._lastTargetPosition.distanceToSquared( this.target ) > _EPS ) {\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\tthis._lastPosition.copy( this.object.position );\n\t\t\tthis._lastQuaternion.copy( this.object.quaternion );\n\t\t\tthis._lastTargetPosition.copy( this.target );\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t_getAutoRotationAngle( deltaTime ) {\n\n\t\tif ( deltaTime !== null ) {\n\n\t\t\treturn ( _twoPI / 60 * this.autoRotateSpeed ) * deltaTime;\n\n\t\t} else {\n\n\t\t\treturn _twoPI / 60 / 60 * this.autoRotateSpeed;\n\n\t\t}\n\n\t}\n\n\t_getZoomScale( delta ) {\n\n\t\tconst normalizedDelta = Math.abs( delta * 0.01 );\n\t\treturn Math.pow( 0.95, this.zoomSpeed * normalizedDelta );\n\n\t}\n\n\t_rotateLeft( angle ) {\n\n\t\tthis._sphericalDelta.theta -= angle;\n\n\t}\n\n\t_rotateUp( angle ) {\n\n\t\tthis._sphericalDelta.phi -= angle;\n\n\t}\n\n\t_panLeft( distance, objectMatrix ) {\n\n\t\t_v.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t_v.multiplyScalar( - distance );\n\n\t\tthis._panOffset.add( _v );\n\n\t}\n\n\t_panUp( distance, objectMatrix ) {\n\n\t\tif ( this.screenSpacePanning === true ) {\n\n\t\t\t_v.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t} else {\n\n\t\t\t_v.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t_v.crossVectors( this.object.up, _v );\n\n\t\t}\n\n\t\t_v.multiplyScalar( distance );\n\n\t\tthis._panOffset.add( _v );\n\n\t}\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\t_pan( deltaX, deltaY ) {\n\n\t\tconst element = this.domElement;\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t// perspective\n\t\t\tconst position = this.object.position;\n\t\t\t_v.copy( position ).sub( this.target );\n\t\t\tlet targetDistance = _v.length();\n\n\t\t\t// half of the fov is center to top of screen\n\t\t\ttargetDistance *= Math.tan( ( this.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\tthis._panLeft( 2 * deltaX * targetDistance / element.clientHeight, this.object.matrix );\n\t\t\tthis._panUp( 2 * deltaY * targetDistance / element.clientHeight, this.object.matrix );\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t// orthographic\n\t\t\tthis._panLeft( deltaX * ( this.object.right - this.object.left ) / this.object.zoom / element.clientWidth, this.object.matrix );\n\t\t\tthis._panUp( deltaY * ( this.object.top - this.object.bottom ) / this.object.zoom / element.clientHeight, this.object.matrix );\n\n\t\t} else {\n\n\t\t\t// camera neither orthographic nor perspective\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\tthis.enablePan = false;\n\n\t\t}\n\n\t}\n\n\t_dollyOut( dollyScale ) {\n\n\t\tif ( this.object.isPerspectiveCamera || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._scale /= dollyScale;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tthis.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t_dollyIn( dollyScale ) {\n\n\t\tif ( this.object.isPerspectiveCamera || this.object.isOrthographicCamera ) {\n\n\t\t\tthis._scale *= dollyScale;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tthis.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t_updateZoomParameters( x, y ) {\n\n\t\tif ( ! this.zoomToCursor ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._performCursorZoom = true;\n\n\t\tconst rect = this.domElement.getBoundingClientRect();\n\t\tconst dx = x - rect.left;\n\t\tconst dy = y - rect.top;\n\t\tconst w = rect.width;\n\t\tconst h = rect.height;\n\n\t\tthis._mouse.x = ( dx / w ) * 2 - 1;\n\t\tthis._mouse.y = - ( dy / h ) * 2 + 1;\n\n\t\tthis._dollyDirection.set( this._mouse.x, this._mouse.y, 1 ).unproject( this.object ).sub( this.object.position ).normalize();\n\n\t}\n\n\t_clampDistance( dist ) {\n\n\t\treturn Math.max( this.minDistance, Math.min( this.maxDistance, dist ) );\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\t_handleMouseDownRotate( event ) {\n\n\t\tthis._rotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseDownDolly( event ) {\n\n\t\tthis._updateZoomParameters( event.clientX, event.clientX );\n\t\tthis._dollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseDownPan( event ) {\n\n\t\tthis._panStart.set( event.clientX, event.clientY );\n\n\t}\n\n\t_handleMouseMoveRotate( event ) {\n\n\t\tthis._rotateEnd.set( event.clientX, event.clientY );\n\n\t\tthis._rotateDelta.subVectors( this._rotateEnd, this._rotateStart ).multiplyScalar( this.rotateSpeed );\n\n\t\tconst element = this.domElement;\n\n\t\tthis._rotateLeft( _twoPI * this._rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\tthis._rotateUp( _twoPI * this._rotateDelta.y / element.clientHeight );\n\n\t\tthis._rotateStart.copy( this._rotateEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseMoveDolly( event ) {\n\n\t\tthis._dollyEnd.set( event.clientX, event.clientY );\n\n\t\tthis._dollyDelta.subVectors( this._dollyEnd, this._dollyStart );\n\n\t\tif ( this._dollyDelta.y > 0 ) {\n\n\t\t\tthis._dollyOut( this._getZoomScale( this._dollyDelta.y ) );\n\n\t\t} else if ( this._dollyDelta.y < 0 ) {\n\n\t\t\tthis._dollyIn( this._getZoomScale( this._dollyDelta.y ) );\n\n\t\t}\n\n\t\tthis._dollyStart.copy( this._dollyEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseMovePan( event ) {\n\n\t\tthis._panEnd.set( event.clientX, event.clientY );\n\n\t\tthis._panDelta.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.panSpeed );\n\n\t\tthis._pan( this._panDelta.x, this._panDelta.y );\n\n\t\tthis._panStart.copy( this._panEnd );\n\n\t\tthis.update();\n\n\t}\n\n\t_handleMouseWheel( event ) {\n\n\t\tthis._updateZoomParameters( event.clientX, event.clientY );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tthis._dollyIn( this._getZoomScale( event.deltaY ) );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tthis._dollyOut( this._getZoomScale( event.deltaY ) );\n\n\t\t}\n\n\t\tthis.update();\n\n\t}\n\n\t_handleKeyDown( event ) {\n\n\t\tlet needsUpdate = false;\n\n\t\tswitch ( event.code ) {\n\n\t\t\tcase this.keys.UP:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tthis._rotateUp( _twoPI * this.keyRotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tthis._pan( 0, this.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.BOTTOM:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tthis._rotateUp( - _twoPI * this.keyRotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tthis._pan( 0, - this.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.LEFT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tthis._rotateLeft( _twoPI * this.keyRotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tthis._pan( this.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase this.keys.RIGHT:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tthis._rotateLeft( - _twoPI * this.keyRotateSpeed / this.domElement.clientHeight );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tthis._pan( - this.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.update();\n\n\t\t}\n\n\n\t}\n\n\t_handleTouchStartRotate( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._rotateStart.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._rotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\t_handleTouchStartPan( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._panStart.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._panStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\t_handleTouchStartDolly( event ) {\n\n\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\tconst dx = event.pageX - position.x;\n\t\tconst dy = event.pageY - position.y;\n\n\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tthis._dollyStart.set( 0, distance );\n\n\t}\n\n\t_handleTouchStartDollyPan( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchStartDolly( event );\n\n\t\tif ( this.enablePan ) this._handleTouchStartPan( event );\n\n\t}\n\n\t_handleTouchStartDollyRotate( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchStartDolly( event );\n\n\t\tif ( this.enableRotate ) this._handleTouchStartRotate( event );\n\n\t}\n\n\t_handleTouchMoveRotate( event ) {\n\n\t\tif ( this._pointers.length == 1 ) {\n\n\t\t\tthis._rotateEnd.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._rotateEnd.set( x, y );\n\n\t\t}\n\n\t\tthis._rotateDelta.subVectors( this._rotateEnd, this._rotateStart ).multiplyScalar( this.rotateSpeed );\n\n\t\tconst element = this.domElement;\n\n\t\tthis._rotateLeft( _twoPI * this._rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\tthis._rotateUp( _twoPI * this._rotateDelta.y / element.clientHeight );\n\n\t\tthis._rotateStart.copy( this._rotateEnd );\n\n\t}\n\n\t_handleTouchMovePan( event ) {\n\n\t\tif ( this._pointers.length === 1 ) {\n\n\t\t\tthis._panEnd.set( event.pageX, event.pageY );\n\n\t\t} else {\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\tthis._panEnd.set( x, y );\n\n\t\t}\n\n\t\tthis._panDelta.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.panSpeed );\n\n\t\tthis._pan( this._panDelta.x, this._panDelta.y );\n\n\t\tthis._panStart.copy( this._panEnd );\n\n\t}\n\n\t_handleTouchMoveDolly( event ) {\n\n\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\tconst dx = event.pageX - position.x;\n\t\tconst dy = event.pageY - position.y;\n\n\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tthis._dollyEnd.set( 0, distance );\n\n\t\tthis._dollyDelta.set( 0, Math.pow( this._dollyEnd.y / this._dollyStart.y, this.zoomSpeed ) );\n\n\t\tthis._dollyOut( this._dollyDelta.y );\n\n\t\tthis._dollyStart.copy( this._dollyEnd );\n\n\t\tconst centerX = ( event.pageX + position.x ) * 0.5;\n\t\tconst centerY = ( event.pageY + position.y ) * 0.5;\n\n\t\tthis._updateZoomParameters( centerX, centerY );\n\n\t}\n\n\t_handleTouchMoveDollyPan( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchMoveDolly( event );\n\n\t\tif ( this.enablePan ) this._handleTouchMovePan( event );\n\n\t}\n\n\t_handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( this.enableZoom ) this._handleTouchMoveDolly( event );\n\n\t\tif ( this.enableRotate ) this._handleTouchMoveRotate( event );\n\n\t}\n\n\t// pointers\n\n\t_addPointer( event ) {\n\n\t\tthis._pointers.push( event.pointerId );\n\n\t}\n\n\t_removePointer( event ) {\n\n\t\tdelete this._pointerPositions[ event.pointerId ];\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ] == event.pointerId ) {\n\n\t\t\t\tthis._pointers.splice( i, 1 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_isTrackingPointer( event ) {\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ] == event.pointerId ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t_trackPointer( event ) {\n\n\t\tlet position = this._pointerPositions[ event.pointerId ];\n\n\t\tif ( position === undefined ) {\n\n\t\t\tposition = new Vector2();\n\t\t\tthis._pointerPositions[ event.pointerId ] = position;\n\n\t\t}\n\n\t\tposition.set( event.pageX, event.pageY );\n\n\t}\n\n\t_getSecondPointerPosition( event ) {\n\n\t\tconst pointerId = ( event.pointerId === this._pointers[ 0 ] ) ? this._pointers[ 1 ] : this._pointers[ 0 ];\n\n\t\treturn this._pointerPositions[ pointerId ];\n\n\t}\n\n\t//\n\n\t_customWheelEvent( event ) {\n\n\t\tconst mode = event.deltaMode;\n\n\t\t// minimal wheel event altered to meet delta-zoom demand\n\t\tconst newEvent = {\n\t\t\tclientX: event.clientX,\n\t\t\tclientY: event.clientY,\n\t\t\tdeltaY: event.deltaY,\n\t\t};\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 1: // LINE_MODE\n\t\t\t\tnewEvent.deltaY *= 16;\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // PAGE_MODE\n\t\t\t\tnewEvent.deltaY *= 100;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t// detect if event was triggered by pinching\n\t\tif ( event.ctrlKey && ! this._controlActive ) {\n\n\t\t\tnewEvent.deltaY *= 10;\n\n\t\t}\n\n\t\treturn newEvent;\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t\tthis.domElement.ownerDocument.addEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.ownerDocument.addEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n\t//\n\n\tif ( this._isTrackingPointer( event ) ) return;\n\n\t//\n\n\tthis._addPointer( event );\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchStart( event );\n\n\t} else {\n\n\t\tthis._onMouseDown( event );\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchMove( event );\n\n\t} else {\n\n\t\tthis._onMouseMove( event );\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tthis._removePointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 0:\n\n\t\t\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\t\t\tthis.domElement.ownerDocument.removeEventListener( 'pointermove', this._onPointerMove );\n\t\t\tthis.domElement.ownerDocument.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\tthis.dispatchEvent( _endEvent );\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t\t\tbreak;\n\n\t\tcase 1:\n\n\t\t\tconst pointerId = this._pointers[ 0 ];\n\t\t\tconst position = this._pointerPositions[ pointerId ];\n\n\t\t\t// minimal placeholder event - allows state correction on pointer-up\n\t\t\tthis._onTouchStart( { pointerId: pointerId, pageX: position.x, pageY: position.y } );\n\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onMouseDown( event ) {\n\n\tlet mouseAction;\n\n\tswitch ( event.button ) {\n\n\t\tcase 0:\n\n\t\t\tmouseAction = this.mouseButtons.LEFT;\n\t\t\tbreak;\n\n\t\tcase 1:\n\n\t\t\tmouseAction = this.mouseButtons.MIDDLE;\n\t\t\tbreak;\n\n\t\tcase 2:\n\n\t\t\tmouseAction = this.mouseButtons.RIGHT;\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tmouseAction = - 1;\n\n\t}\n\n\tswitch ( mouseAction ) {\n\n\t\tcase MOUSE.DOLLY:\n\n\t\t\tif ( this.enableZoom === false ) return;\n\n\t\t\tthis._handleMouseDownDolly( event );\n\n\t\t\tthis.state = _STATE.DOLLY;\n\n\t\t\tbreak;\n\n\t\tcase MOUSE.ROTATE:\n\n\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\tthis._handleMouseDownPan( event );\n\n\t\t\t\tthis.state = _STATE.PAN;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\tthis._handleMouseDownRotate( event );\n\n\t\t\t\tthis.state = _STATE.ROTATE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase MOUSE.PAN:\n\n\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\tthis._handleMouseDownRotate( event );\n\n\t\t\t\tthis.state = _STATE.ROTATE;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\tthis._handleMouseDownPan( event );\n\n\t\t\t\tthis.state = _STATE.PAN;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tif ( this.state !== _STATE.NONE ) {\n\n\t\tthis.dispatchEvent( _startEvent );\n\n\t}\n\n}\n\nfunction onMouseMove( event ) {\n\n\tswitch ( this.state ) {\n\n\t\tcase _STATE.ROTATE:\n\n\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\tthis._handleMouseMoveRotate( event );\n\n\t\t\tbreak;\n\n\t\tcase _STATE.DOLLY:\n\n\t\t\tif ( this.enableZoom === false ) return;\n\n\t\t\tthis._handleMouseMoveDolly( event );\n\n\t\t\tbreak;\n\n\t\tcase _STATE.PAN:\n\n\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\tthis._handleMouseMovePan( event );\n\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onMouseWheel( event ) {\n\n\tif ( this.enabled === false || this.enableZoom === false || this.state !== _STATE.NONE ) return;\n\n\tevent.preventDefault();\n\n\tthis.dispatchEvent( _startEvent );\n\n\tthis._handleMouseWheel( this._customWheelEvent( event ) );\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onKeyDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tthis._handleKeyDown( event );\n\n}\n\nfunction onTouchStart( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\n\t\t\tswitch ( this.touches.ONE ) {\n\n\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartRotate( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartPan( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.state = _STATE.NONE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase 2:\n\n\t\t\tswitch ( this.touches.TWO ) {\n\n\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\tif ( this.enableZoom === false && this.enablePan === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartDollyPan( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\tif ( this.enableZoom === false && this.enableRotate === false ) return;\n\n\t\t\t\t\tthis._handleTouchStartDollyRotate( event );\n\n\t\t\t\t\tthis.state = _STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.state = _STATE.NONE;\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tif ( this.state !== _STATE.NONE ) {\n\n\t\tthis.dispatchEvent( _startEvent );\n\n\t}\n\n}\n\nfunction onTouchMove( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this.state ) {\n\n\t\tcase _STATE.TOUCH_ROTATE:\n\n\t\t\tif ( this.enableRotate === false ) return;\n\n\t\t\tthis._handleTouchMoveRotate( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_PAN:\n\n\t\t\tif ( this.enablePan === false ) return;\n\n\t\t\tthis._handleTouchMovePan( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_DOLLY_PAN:\n\n\t\t\tif ( this.enableZoom === false && this.enablePan === false ) return;\n\n\t\t\tthis._handleTouchMoveDollyPan( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tcase _STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\tif ( this.enableZoom === false && this.enableRotate === false ) return;\n\n\t\t\tthis._handleTouchMoveDollyRotate( event );\n\n\t\t\tthis.update();\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tevent.preventDefault();\n\n}\n\nfunction interceptControlDown( event ) {\n\n\tif ( event.key === 'Control' ) {\n\n\t\tthis._controlActive = true;\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\n\t\tdocument.addEventListener( 'keyup', this._interceptControlUp, { passive: true, capture: true } );\n\n\t}\n\n}\n\nfunction interceptControlUp( event ) {\n\n\tif ( event.key === 'Control' ) {\n\n\t\tthis._controlActive = false;\n\n\t\tconst document = this.domElement.getRootNode(); // offscreen canvas compatibility\n\n\t\tdocument.removeEventListener( 'keyup', this._interceptControlUp, { passive: true, capture: true } );\n\n\t}\n\n}\n\nexport { OrbitControls };\n","/**\n * A utility class for creating a button that allows to initiate\n * immersive VR sessions based on WebXR. The button can be created\n * with a factory method and then appended ot the website's DOM.\n *\n * ```js\n * document.body.appendChild( VRButton.createButton( renderer ) );\n * ```\n *\n * @hideconstructor\n * @three_import import { VRButton } from 'three/addons/webxr/VRButton.js';\n */\nclass VRButton {\n\n\t/**\n\t * Constructs a new VR button.\n\t *\n\t * @param {WebGLRenderer|WebGPURenderer} renderer - The renderer.\n\t * @param {XRSessionInit} [sessionInit] - The a configuration object for the AR session.\n\t * @return {HTMLElement} The button or an error message if `immersive-ar` isn't supported.\n\t */\n\tstatic createButton( renderer, sessionInit = {} ) {\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showEnterVR( /*device*/ ) {\n\n\t\t\tlet currentSession = null;\n\n\t\t\tasync function onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\tawait renderer.xr.setSession( session );\n\t\t\t\tbutton.textContent = 'EXIT VR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\t// WebXR's requestReferenceSpace only works if the corresponding feature\n\t\t\t// was requested at session creation time. For simplicity, just ask for\n\t\t\t// the interesting ones as optional features, but be aware that the\n\t\t\t// requestReferenceSpace call will fail if it turns out to be unavailable.\n\t\t\t// ('local' is always available for immersive sessions and doesn't need to\n\t\t\t// be requested separately.)\n\n\t\t\tconst sessionOptions = {\n\t\t\t\t...sessionInit,\n\t\t\t\toptionalFeatures: [\n\t\t\t\t\t'local-floor',\n\t\t\t\t\t'bounded-floor',\n\t\t\t\t\t'layers',\n\t\t\t\t\t...( sessionInit.optionalFeatures || [] )\n\t\t\t\t],\n\t\t\t};\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-vr', sessionOptions ).then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t\tif ( navigator.xr.offerSession !== undefined ) {\n\n\t\t\t\t\t\tnavigator.xr.offerSession( 'immersive-vr', sessionOptions )\n\t\t\t\t\t\t\t.then( onSessionStarted )\n\t\t\t\t\t\t\t.catch( ( err ) => {\n\n\t\t\t\t\t\t\t\tconsole.warn( err );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tif ( navigator.xr.offerSession !== undefined ) {\n\n\t\t\t\tnavigator.xr.offerSession( 'immersive-vr', sessionOptions )\n\t\t\t\t\t.then( onSessionStarted )\n\t\t\t\t\t.catch( ( err ) => {\n\n\t\t\t\t\t\tconsole.warn( err );\n\n\t\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showWebXRNotFound() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'VR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction showVRNotAllowed( exception ) {\n\n\t\t\tdisableButton();\n\n\t\t\tconsole.warn( 'Exception when trying to call xr.isSessionSupported', exception );\n\n\t\t\tbutton.textContent = 'VR NOT ALLOWED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'VRButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' ).then( function ( supported ) {\n\n\t\t\t\tsupported ? showEnterVR() : showWebXRNotFound();\n\n\t\t\t\tif ( supported && VRButton.xrSessionIsGranted ) {\n\n\t\t\t\t\tbutton.click();\n\n\t\t\t\t}\n\n\t\t\t} ).catch( showVRNotAllowed );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Registers a `sessiongranted` event listener. When a session is granted, the {@link VRButton#xrSessionIsGranted}\n\t * flag will evaluate to `true`. This method is automatically called by the module itself so there\n\t * should be no need to use it on app level.\n\t */\n\tstatic registerSessionGrantedListener() {\n\n\t\tif ( typeof navigator !== 'undefined' && 'xr' in navigator ) {\n\n\t\t\t// WebXRViewer (based on Firefox) has a bug where addEventListener\n\t\t\t// throws a silent exception and aborts execution entirely.\n\t\t\tif ( /WebXRViewer\\//i.test( navigator.userAgent ) ) return;\n\n\t\t\tnavigator.xr.addEventListener( 'sessiongranted', () => {\n\n\t\t\t\tVRButton.xrSessionIsGranted = true;\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Whether a XR session has been granted or not.\n *\n * @static\n * @type {boolean}\n * @default false\n */\nVRButton.xrSessionIsGranted = false;\nVRButton.registerSessionGrantedListener();\n\nexport { VRButton };\n","/**\n * A utility class for creating a button that allows to initiate\n * immersive XR sessions based on WebXR. The button can be created\n * with a factory method and then appended ot the website's DOM.\n *\n * ```js\n * document.body.appendChild( XRButton.createButton( renderer ) );\n * ```\n *\n * Compared to {@link ARButton} and {@link VRButton}, this class will\n * try to offer an immersive AR session first. If the device does not\n * support this type of session, it uses an immersive VR session.\n *\n * @hideconstructor\n * @three_import import { XRButton } from 'three/addons/webxr/XRButton.js';\n */\nclass XRButton {\n\n\t/**\n\t * Constructs a new XR button.\n\t *\n\t * @param {WebGLRenderer|WebGPURenderer} renderer - The renderer.\n\t * @param {XRSessionInit} [sessionInit] - The a configuration object for the AR session.\n\t * @return {HTMLElement} The button or an error message if WebXR isn't supported.\n\t */\n\tstatic createButton( renderer, sessionInit = {} ) {\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showStartXR( mode ) {\n\n\t\t\tlet currentSession = null;\n\n\t\t\tasync function onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\tawait renderer.xr.setSession( session );\n\n\t\t\t\tbutton.textContent = 'STOP XR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'START XR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'START XR';\n\n\t\t\tconst sessionOptions = {\n\t\t\t\t...sessionInit,\n\t\t\t\toptionalFeatures: [\n\t\t\t\t\t'local-floor',\n\t\t\t\t\t'bounded-floor',\n\t\t\t\t\t'layers',\n\t\t\t\t\t...( sessionInit.optionalFeatures || [] )\n\t\t\t\t],\n\t\t\t};\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\tnavigator.xr.requestSession( mode, sessionOptions )\n\t\t\t\t\t\t.then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t\tif ( navigator.xr.offerSession !== undefined ) {\n\n\t\t\t\t\t\tnavigator.xr.offerSession( mode, sessionOptions )\n\t\t\t\t\t\t\t.then( onSessionStarted )\n\t\t\t\t\t\t\t.catch( ( err ) => {\n\n\t\t\t\t\t\t\t\tconsole.warn( err );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tif ( navigator.xr.offerSession !== undefined ) {\n\n\t\t\t\tnavigator.xr.offerSession( mode, sessionOptions )\n\t\t\t\t\t.then( onSessionStarted )\n\t\t\t\t\t.catch( ( err ) => {\n\n\t\t\t\t\t\tconsole.warn( err );\n\n\t\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showXRNotSupported() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'XR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction showXRNotAllowed( exception ) {\n\n\t\t\tdisableButton();\n\n\t\t\tconsole.warn( 'Exception when trying to call xr.isSessionSupported', exception );\n\n\t\t\tbutton.textContent = 'XR NOT ALLOWED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'XRButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-ar' )\n\t\t\t\t.then( function ( supported ) {\n\n\t\t\t\t\tif ( supported ) {\n\n\t\t\t\t\t\tshowStartXR( 'immersive-ar' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' )\n\t\t\t\t\t\t\t.then( function ( supported ) {\n\n\t\t\t\t\t\t\t\tif ( supported ) {\n\n\t\t\t\t\t\t\t\t\tshowStartXR( 'immersive-vr' );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tshowXRNotSupported();\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} ).catch( showXRNotAllowed );\n\n\t\t\t\t\t}\n\n\t\t\t\t} ).catch( showXRNotAllowed );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n}\n\nexport { XRButton };\n","class Input {\n    /**\n     * Constructor\n     * \n     * Initialize the input manager\n     * \n     * Listens to keydown, keyup and pointermove events\n     * \n     * @private\n     * @example\n     * const input = new Input();\n     * input.actions = [\n     *     { name: 'forward', keys: ['ArrowUp', 'KeyW'] },\n     *     { name: 'backward', keys: ['ArrowDown', 'KeyS'] },\n     *     { name: 'left', keys: ['ArrowLeft', 'KeyA'] },\n     *     { name: 'right', keys: ['ArrowRight', 'KeyD'] },\n     *     { name: 'run', keys: ['ShiftLeft', 'ShiftRight']}\n     * ]\n     */\n    constructor() {\n        this._actions = [];\n        this.actionState = {};\n        this.pointer = {\n            x: 0,\n            y: 0\n        };\n\n        window.addEventListener('keydown', (event) => {\n            // console.log(`keydown : ${event.code}`)\n            this._down(event.code)\n        });\n\n        window.addEventListener('keyup', (event) => {\n            // console.log(`keyup : ${event.code}`)\n            this._up(event.code)\n        });\n\n        window.addEventListener('pointermove', (event) => {\n            this.pointer.x = (event.clientX / window.innerWidth) * 2 - 1; // [-1,1]\n            this.pointer.y = (-event.clientY / window.innerHeight) * 2 + 1; // [-1,1]\n        });\n    }\n\n    /**\n     * Sets the actions for this input manager\n     * \n     * @param {Object[]} newActions - The new actions to set\n     * \n     * Each action is an object with the following properties:\n     * - name: The name of the action\n     * - keys: An array of keys that will trigger the action\n     */\n    set actions(newActions) {\n        this._actions = newActions;\n        this._actions.forEach( action => {\n            this.actionState[action.name] = {\n                pressed: false,\n                justPressed: false,\n                _lastPressed: false,\n            };\n        });\n    }\n\n    isPressed(actionName) {\n        // console.log(this.actionState[actionName])\n        return this.actionState[actionName].pressed;\n    }\n\n    isJustPressed(actionName) {\n        if (this.actionState[actionName].justPressed) {\n            this.actionState[actionName].justPressed = false;\n            return true;\n        }\n        return false;\n    }\n\n    _down(key) {\n        const action = this._actions.find( action => action.keys.includes(key) )\n        if (action !== undefined) {\n            // console.log(`${action.name} down`)\n            this.actionState[action.name].pressed = true;\n            if (!this.actionState[action.name]._lastPressed) {\n                this.actionState[action.name].justPressed = true;\n                this.actionState[action.name]._lastPressed = true;\n            }\n        }\n    }\n\n    _up(key) {\n        const action = this._actions.find( action => action.keys.includes(key) )\n        if (action !== undefined) {\n            // console.log(`${action.name} up`)\n            this.actionState[action.name].pressed = false;\n            this.actionState[action.name].justPressed = false;\n            this.actionState[action.name]._lastPressed = false;\n        }\n    }\n}\n\nexport { Input }","import { Pane } from 'tweakpane';\nimport { REVISION } from 'three';\n\nclass Outliner extends Pane {\n    constructor(scene, camera, camControl, renderer) {\n        super({\n            title: 'Outliner', expanded: false,\n        })\n        this.scene = scene;\n        this.camera = camera;\n        this.renderer = renderer;\n\n        this._cameraProps = this.addFolder({\n            title: ' Camera', expanded: false,\n        });\n\n        {\n            const positionFolder = this._cameraProps.addFolder({\n                title: 'Position',\n            });\n\n            positionFolder.addBinding(this.camera.position, 'x', {\n                readonly: true, label: 'X',\n            });\n\n            positionFolder.addBinding(this.camera.position, 'y', {\n                readonly: true, label: 'Y',\n            });\n\n            positionFolder.addBinding(this.camera.position, 'z', {\n                readonly: true, label: 'Z',\n            });\n        }\n\n        {\n            const targetFolder = this._cameraProps.addFolder({\n                title: 'Target',\n            });\n\n            targetFolder.addBinding(camControl.target, 'x', {\n                readonly: true, label: 'X',\n            });\n\n            targetFolder.addBinding(camControl.target, 'y', {\n                readonly: true, label: 'Y',\n            });\n\n            targetFolder.addBinding(camControl.target, 'z', {\n                readonly: true, label: 'Z',\n            });\n        }\n\n        this._gpuProps = {\n            backend: renderer.isWebGLRenderer ? 'WebGL' :\n                renderer.isWebGPURenderer ? renderer.backend.isWebGPUBackend ? 'WebGPU' : 'WebGL2' : 'Unknown',\n        }\n        {\n            const gpuFolder = this.addFolder({\n                title: ` GPU (Three.js r${REVISION})`, expanded: false,\n            });\n\n            gpuFolder.addBinding(this._gpuProps, 'backend', {\n                readonly: true, label: 'Backend',\n            });\n        }\n    }\n\n    update() {\n        this._gpuProps.backend = this.renderer.isWebGLRenderer ? 'WebGL' :\n            this.renderer.isWebGPURenderer ? this.renderer.backend.isWebGPUBackend ? 'WebGPU' : 'WebGL2' : 'Unknown';\n    }\n}\n\nexport { Outliner };","const entities = [];\n\nexport class EntityManager {\n    constructor( scene, physics ) {\n        this.scene = scene;\n        // this.physics = physics\n\n        // Array of physics object\n        this._phyObjects = [];\n    }\n\n    static #instance = null;\n\n    static init(scene, physics) {\n        if (this.#instance === null) {\n            this.#instance = new EntityManager(scene, physics);\n        }\n    }\n\n    static getInstance() {\n        if (this.#instance === null) {\n            return null;\n        }\n        return this.#instance;\n    }\n\n    add( entity ) {\n        entities.push( entity );\n        // console.log('add entity: ', entity);\n        entity.children.forEach( c => {\n            // console.log(c);\n            if (c.isObject3D) {\n                this.scene.add(c);\n            }\n            else if (c.rigidBody !== undefined) {\n                this._phyObjects.push(c);\n            }\n        })\n    }\n\n    remove( entity ) {\n\n    }\n\n    update() {\n        // console.log(this._phyObjects);\n        this._phyObjects.forEach( obj => {\n            // console.log(obj)\n            if (obj.rigidBody !== undefined) {\n                // console.log(obj.rigidBody);\n                if (obj.rigidBody.isDynamic()) {\n                    // console.log('Obj is dynamic');\n                    obj.mesh.position.copy(obj.rigidBody.translation());\n                    obj.mesh.quaternion.copy(obj.rigidBody.rotation());\n                }\n            }\n        })\n    }\n}\n\nexport class Entity {\n    constructor( name ) {\n        // console.log(`Create ${name}`);\n        this.name = name;\n        this.children = [];\n    }\n\n    init() {\n\n    }\n\n    add(child) {\n        this.children.push(child);\n    }\n\n    remove(child) {\n        this.children = this.children.filter( c => c !== child);\n    }\n}\n\n","import * as THREE from 'three';\nimport { OrbitControls } from 'three/addons/controls/OrbitControls.js';\nimport { VRButton } from 'three/addons/webxr/VRButton.js';\nimport { XRButton } from 'three/addons/webxr/XRButton.js';\n\nimport { Input } from './core/inputs';\nimport { Outliner } from './ui/outliner';\nimport { EntityManager, Entity } from './core/entity';\n\nimport { version } from '../package.json';\n\nexport { Entity };\n\n/**\n * Application options\n * \n * @typedef {Object} AppOptions\n * @property {string} [name=''] - A name for the application\n * @property {boolean} [interactive=false] - Enable interactive mode\n * @property {boolean} [vr=false] - Enable VR mode\n * @property {boolean} [ar=false] - Enable AR mode\n * @property {boolean} [monitor=false] - Enable monitor mode\n * @property {boolean} [antialias=false] - Enable antialiasing\n */\n\n/**\n * Class to create a 3D virtual world application\n */\nexport class App {\n    /**\n     * Construct a new application\n     * \n     * @param {AppOptions} [parameters] - The configuration parameter\n     */\n    constructor(renderEngine, parameters = {}) {\n        // console.log( renderEngine );\n        this.MODULE = renderEngine;\n        this.webgl = this.MODULE.WebGLRenderer !== undefined;\n\n        const {\n            name = 'Untitled',\n            interactive = false,\n            vr = false,\n            ar = false,\n            monitor = false,\n            antialias = false,\n            renderOptions = {}\n        } = parameters;\n\n        this.name = document.title === '' ? name : document.title;\n        this.name = `${this.name} ${interactive ? '(Interactive)' : ''}`;\n        document.title = this.name;\n\n        /**\n         * The rendering system\n         * @type {THREE.WebGLRenderer|THREE.WebGPURenderer}\n         */\n        this.renderer = null;\n        if (this.webgl) {\n            this.renderer = new this.MODULE.WebGLRenderer(renderOptions);\n        }\n        else {\n            this.renderer = new this.MODULE.WebGPURenderer({\n                antialias\n            });\n        }\n        console.log(`VirtualDev v${version} - ${this.webgl ? 'WebGL' : 'WebGPU'} renderer`);\n\n        if (this.renderer) {\n            this.renderer.setSize(window.innerWidth, window.innerHeight, false);\n            this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n\n            this.renderer.domElement.style.width = '100%';\n            this.renderer.domElement.style.height = '100%';\n            document.body.appendChild( this.renderer.domElement );\n            const canvas = this.renderer.domElement;\n\n            if ( canvas.parentNode.localName === 'body') {\n                canvas.parentNode.style.margin = 0;\n                canvas.parentNode.style.height = '100vh';\n            }\n        }\n \n        /**\n         * The scene\n         * @type {THREE.Scene}\n         */\n        this.scene = new THREE.Scene();\n        // this.scene.background = new THREE.Color( 0x606060 );\n\n        /**\n         * The camera\n         * @type {THREE.PerspectiveCamera}\n         */\n        this.camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );\n        this.camera.position.z = 5;\n\n        /**\n         * The input manager\n         * @example\n         * this.inputs.actions = [\n         *     { name: 'forward', keys: ['ArrowUp', 'KeyW'] },\n         *     { name: 'backward', keys: ['ArrowDown', 'KeyS'] },\n         *     { name: 'left', keys: ['ArrowLeft', 'KeyA'] },\n         *     { name: 'right', keys: ['ArrowRight', 'KeyD'] },\n         *     { name: 'run', keys: ['ShiftLeft', 'ShiftRight']}\n         * ]\n         *\n         * this.onRender = (time, deltaTime) => {\n         *      if (app.inputs.isPressed('forward')) {\n         *          // do something\n         *      }\n         * }\n         */\n        this.inputs = new Input();\n\n        this.interactive = interactive;\n        this.interactiveProps = {};\n        if (this.interactive) {\n            this.interactiveProps.orbitalControls = new OrbitControls( this.camera, this.renderer.domElement );\n            this.interactiveProps.orbitalControls.enableDamping = true;\n            this.outliner = new Outliner(\n                this.scene, this.camera,\n                this.interactiveProps.orbitalControls,\n                this.renderer\n             );\n        }\n\n        // VR\n        if (vr) {\n            document.body.appendChild(VRButton.createButton(this.renderer));\n            this.renderer.xr.enabled = true;\n        }\n        // AR\n        if (ar) {\n            document.body.appendChild(XRButton.createButton(this.renderer));\n            this.renderer.xr.enabled = true;\n        }\n        // Monitor\n        this.stats = null;\n        if (monitor) {\n            const Stats = import('./extras/stats-gl/main.js')\n                .then((Stats) => {\n                    this.stats = new Stats.default( {\n                        trackGPU: true\n                    });\n                    document.body.appendChild(this.stats.dom);\n                    this.stats.init( this.renderer );\n                })\n        }\n\n        // Entities Manager\n        // Instanciate Entity Manager\n        EntityManager.init( this.scene );\n        this.sceneTree = EntityManager.getInstance();\n\n        this._clock = new THREE.Clock();\n        this._lastTime = this._clock.getElapsedTime();\n        this._firstRender = true;\n\n        const renderLoop = () => {\n            const time = this._clock.getElapsedTime();\n            const deltaTime = time - this._lastTime;\n            this._lastTime = time;\n\n            if (this._firstRender) {\n                if (this.outliner) this.outliner.update();\n                this._firstRender = false;\n            }\n\n            this.onRender(time, deltaTime);\n\n            if (interactive) {\n                this.interactiveProps.orbitalControls.update();\n            }\n            if (this.stats) {\n                this.stats.update();\n                if (!this.webgl) {\n                    this.renderer.resolveTimestampsAsync( THREE.TimestampQuery.RENDER );\n                }\n            }\n            this.onBeforeRender(time, deltaTime);\n            this.renderer.render( this.scene, this.camera );\n            this.onAfterRender(time, deltaTime);\n        }\n\n        this.renderer.setAnimationLoop( renderLoop );\n\n        this.onRender = (time, deltaTime) => {\n            // console.log('onRender');\n        };\n        this.onBeforeRender = (time, deltaTime) => {\n            // console.log('onBeforeRender');\n        };\n        this.onAfterRender = (time, deltaTime) => {\n            // console.log('onAfterRender');\n        };\n\n        window.addEventListener( 'resize', () => {\n            // Update camera\n            this.camera.aspect = this.renderer.domElement.clientWidth / this.renderer.domElement.clientHeight;\n            this.camera.updateProjectionMatrix();\n            // Update renderer\n            this.renderer.setSize( this.renderer.domElement.clientWidth, this.renderer.domElement.clientHeight, false);\n        });\n    }\n\n    static #instance = null;\n\n    /**\n     * Initialize the application\n     * \n     * @param {THREE} renderEngine - The rendering engine (WebGL/WebGPU)\n     * @param {AppOptions} [parameters] - The configuration parameter\n     */\n    static init(renderEngine, parameters) {\n        if (this.#instance === null) {\n            this.#instance = new App(renderEngine, parameters);\n        }\n        return this.#instance;\n    }\n    static getInstance() {\n        if (this.#instance === null) {\n            return null;\n        }\n        return this.#instance;\n    }\n}\n","class StatsCore {\n  constructor({\n    trackGPU = false,\n    trackCPT = false,\n    trackHz = false,\n    trackFPS = true,\n    logsPerSecond = 4,\n    graphsPerSecond = 30,\n    samplesLog = 40,\n    samplesGraph = 10,\n    precision = 2\n  } = {}) {\n    this.gl = null;\n    this.ext = null;\n    this.gpuDevice = null;\n    this.gpuBackend = null;\n    this.renderer = null;\n    this.activeQuery = null;\n    this.gpuQueries = [];\n    this.threeRendererPatched = false;\n    this.webgpuNative = false;\n    this.gpuQuerySet = null;\n    this.gpuResolveBuffer = null;\n    this.gpuReadBuffers = [];\n    this.gpuWriteBufferIndex = 0;\n    this.gpuFrameCount = 0;\n    this.pendingResolve = null;\n    this.frameTimes = [];\n    this.renderCount = 0;\n    this.totalCpuDuration = 0;\n    this.totalGpuDuration = 0;\n    this.totalGpuDurationCompute = 0;\n    this.averageFps = { logs: [], graph: [] };\n    this.averageCpu = { logs: [], graph: [] };\n    this.averageGpu = { logs: [], graph: [] };\n    this.averageGpuCompute = { logs: [], graph: [] };\n    this.trackGPU = trackGPU;\n    this.trackCPT = trackCPT;\n    this.trackHz = trackHz;\n    this.trackFPS = trackFPS;\n    this.samplesLog = samplesLog;\n    this.samplesGraph = samplesGraph;\n    this.precision = precision;\n    this.logsPerSecond = logsPerSecond;\n    this.graphsPerSecond = graphsPerSecond;\n    const now = performance.now();\n    this.prevGraphTime = now;\n    this.beginTime = now;\n    this.prevTextTime = now;\n    this.prevCpuTime = now;\n  }\n  async init(canvasOrGL) {\n    if (!canvasOrGL) {\n      console.error('Stats: The \"canvas\" parameter is undefined.');\n      return;\n    }\n    if (this.handleThreeRenderer(canvasOrGL))\n      return;\n    if (await this.handleWebGPURenderer(canvasOrGL))\n      return;\n    if (this.handleNativeWebGPU(canvasOrGL))\n      return;\n    if (this.initializeWebGL(canvasOrGL)) {\n      if (this.trackGPU) {\n        this.initializeGPUTracking();\n      }\n      return;\n    } else {\n      console.error(\"Stats-gl: Failed to initialize WebGL context\");\n    }\n  }\n  handleNativeWebGPU(device) {\n    var _a;\n    if (device && typeof device.createCommandEncoder === \"function\" && typeof device.createQuerySet === \"function\" && device.queue) {\n      this.gpuDevice = device;\n      this.webgpuNative = true;\n      if (this.trackGPU && ((_a = device.features) == null ? void 0 : _a.has(\"timestamp-query\"))) {\n        this.initializeWebGPUTiming();\n        this.onWebGPUTimestampSupported();\n      }\n      return true;\n    }\n    return false;\n  }\n  initializeWebGPUTiming() {\n    if (!this.gpuDevice)\n      return;\n    this.gpuQuerySet = this.gpuDevice.createQuerySet({\n      type: \"timestamp\",\n      count: 2\n    });\n    this.gpuResolveBuffer = this.gpuDevice.createBuffer({\n      size: 16,\n      usage: GPUBufferUsage.QUERY_RESOLVE | GPUBufferUsage.COPY_SRC\n    });\n    for (let i = 0; i < 2; i++) {\n      this.gpuReadBuffers.push(this.gpuDevice.createBuffer({\n        size: 16,\n        usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ\n      }));\n    }\n  }\n  handleThreeRenderer(renderer) {\n    if (renderer.isWebGLRenderer && !this.threeRendererPatched) {\n      this.patchThreeRenderer(renderer);\n      this.gl = renderer.getContext();\n      if (this.trackGPU) {\n        this.initializeGPUTracking();\n      }\n      return true;\n    }\n    return false;\n  }\n  async handleWebGPURenderer(renderer) {\n    var _a;\n    if (renderer.isWebGPURenderer) {\n      this.renderer = renderer;\n      if (this.trackGPU || this.trackCPT) {\n        renderer.backend.trackTimestamp = true;\n        if (!renderer._initialized) {\n          await renderer.init();\n        }\n        if (renderer.hasFeature(\"timestamp-query\")) {\n          this.onWebGPUTimestampSupported();\n        }\n      }\n      this.info = renderer.info;\n      this.gpuBackend = renderer.backend;\n      this.gpuDevice = ((_a = renderer.backend) == null ? void 0 : _a.device) || null;\n      this.patchThreeWebGPU(renderer);\n      return true;\n    }\n    return false;\n  }\n  onWebGPUTimestampSupported() {\n  }\n  initializeWebGL(canvasOrGL) {\n    if (canvasOrGL instanceof WebGL2RenderingContext) {\n      this.gl = canvasOrGL;\n    } else if (canvasOrGL instanceof HTMLCanvasElement || canvasOrGL instanceof OffscreenCanvas) {\n      this.gl = canvasOrGL.getContext(\"webgl2\");\n      if (!this.gl) {\n        console.error(\"Stats: Unable to obtain WebGL2 context.\");\n        return false;\n      }\n    } else {\n      console.error(\n        \"Stats: Invalid input type. Expected WebGL2RenderingContext, HTMLCanvasElement, or OffscreenCanvas.\"\n      );\n      return false;\n    }\n    return true;\n  }\n  initializeGPUTracking() {\n    if (this.gl) {\n      this.ext = this.gl.getExtension(\"EXT_disjoint_timer_query_webgl2\");\n      if (this.ext) {\n        this.onGPUTrackingInitialized();\n      }\n    }\n  }\n  onGPUTrackingInitialized() {\n  }\n  /**\n   * Get timestampWrites configuration for WebGPU render pass.\n   * Use this when creating your render pass descriptor.\n   * @returns timestampWrites object or undefined if not tracking GPU\n   */\n  getTimestampWrites() {\n    if (!this.webgpuNative || !this.gpuQuerySet)\n      return void 0;\n    return {\n      querySet: this.gpuQuerySet,\n      beginningOfPassWriteIndex: 0,\n      endOfPassWriteIndex: 1\n    };\n  }\n  begin(encoder) {\n    this.beginProfiling(\"cpu-started\");\n    if (this.webgpuNative) {\n      return;\n    }\n    if (!this.gl || !this.ext)\n      return;\n    if (this.activeQuery) {\n      this.gl.endQuery(this.ext.TIME_ELAPSED_EXT);\n    }\n    this.activeQuery = this.gl.createQuery();\n    if (this.activeQuery) {\n      this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT, this.activeQuery);\n    }\n  }\n  end(encoder) {\n    this.renderCount++;\n    if (this.webgpuNative && encoder && this.gpuQuerySet && this.gpuResolveBuffer && this.gpuReadBuffers.length > 0) {\n      this.gpuFrameCount++;\n      const writeBuffer = this.gpuReadBuffers[this.gpuWriteBufferIndex];\n      if (writeBuffer.mapState === \"unmapped\") {\n        encoder.resolveQuerySet(this.gpuQuerySet, 0, 2, this.gpuResolveBuffer, 0);\n        encoder.copyBufferToBuffer(this.gpuResolveBuffer, 0, writeBuffer, 0, 16);\n      }\n      this.endProfiling(\"cpu-started\", \"cpu-finished\", \"cpu-duration\");\n      return;\n    }\n    if (this.gl && this.ext && this.activeQuery) {\n      this.gl.endQuery(this.ext.TIME_ELAPSED_EXT);\n      this.gpuQueries.push({ query: this.activeQuery });\n      this.activeQuery = null;\n    }\n    this.endProfiling(\"cpu-started\", \"cpu-finished\", \"cpu-duration\");\n  }\n  /**\n   * Resolve WebGPU timestamp queries. Call this after queue.submit().\n   * Returns a promise that resolves to the GPU duration in milliseconds.\n   */\n  async resolveTimestampsAsync() {\n    if (!this.webgpuNative || this.gpuReadBuffers.length === 0) {\n      return this.totalGpuDuration;\n    }\n    if (this.pendingResolve) {\n      return this.pendingResolve;\n    }\n    const readBufferIndex = (this.gpuWriteBufferIndex + 1) % 2;\n    const readBuffer = this.gpuReadBuffers[readBufferIndex];\n    this.gpuWriteBufferIndex = (this.gpuWriteBufferIndex + 1) % 2;\n    if (this.gpuFrameCount < 2) {\n      return this.totalGpuDuration;\n    }\n    if (readBuffer.mapState !== \"unmapped\") {\n      return this.totalGpuDuration;\n    }\n    this.pendingResolve = this._resolveTimestamps(readBuffer);\n    try {\n      const result = await this.pendingResolve;\n      return result;\n    } finally {\n      this.pendingResolve = null;\n    }\n  }\n  async _resolveTimestamps(readBuffer) {\n    try {\n      await readBuffer.mapAsync(GPUMapMode.READ);\n      const data = new BigInt64Array(readBuffer.getMappedRange());\n      const startTime = data[0];\n      const endTime = data[1];\n      readBuffer.unmap();\n      const durationNs = Number(endTime - startTime);\n      this.totalGpuDuration = durationNs / 1e6;\n      return this.totalGpuDuration;\n    } catch (_) {\n      return this.totalGpuDuration;\n    }\n  }\n  processGpuQueries() {\n    if (!this.gl || !this.ext)\n      return;\n    this.totalGpuDuration = 0;\n    for (let i = this.gpuQueries.length - 1; i >= 0; i--) {\n      const queryInfo = this.gpuQueries[i];\n      const available = this.gl.getQueryParameter(queryInfo.query, this.gl.QUERY_RESULT_AVAILABLE);\n      const disjoint = this.gl.getParameter(this.ext.GPU_DISJOINT_EXT);\n      if (available && !disjoint) {\n        const elapsed = this.gl.getQueryParameter(queryInfo.query, this.gl.QUERY_RESULT);\n        const duration = elapsed * 1e-6;\n        this.totalGpuDuration += duration;\n        this.gl.deleteQuery(queryInfo.query);\n        this.gpuQueries.splice(i, 1);\n      }\n    }\n  }\n  processWebGPUTimestamps() {\n    this.totalGpuDuration = this.info.render.timestamp;\n    this.totalGpuDurationCompute = this.info.compute.timestamp;\n  }\n  beginProfiling(marker) {\n    if (typeof performance !== \"undefined\") {\n      try {\n        performance.clearMarks(marker);\n        performance.mark(marker);\n      } catch (error) {\n        console.debug(\"Stats: Performance marking failed:\", error);\n      }\n    }\n  }\n  endProfiling(startMarker, endMarker, measureName) {\n    if (typeof performance === \"undefined\" || !endMarker || !startMarker)\n      return;\n    try {\n      const entries = performance.getEntriesByName(startMarker, \"mark\");\n      if (entries.length === 0) {\n        this.beginProfiling(startMarker);\n      }\n      performance.clearMarks(endMarker);\n      performance.mark(endMarker);\n      performance.clearMeasures(measureName);\n      const cpuMeasure = performance.measure(measureName, startMarker, endMarker);\n      this.totalCpuDuration += cpuMeasure.duration;\n      performance.clearMarks(startMarker);\n      performance.clearMarks(endMarker);\n      performance.clearMeasures(measureName);\n    } catch (error) {\n      console.debug(\"Stats: Performance measurement failed:\", error);\n    }\n  }\n  calculateFps() {\n    const currentTime = performance.now();\n    this.frameTimes.push(currentTime);\n    while (this.frameTimes.length > 0 && this.frameTimes[0] <= currentTime - 1e3) {\n      this.frameTimes.shift();\n    }\n    return Math.round(this.frameTimes.length);\n  }\n  updateAverages() {\n    this.addToAverage(this.totalCpuDuration, this.averageCpu);\n    this.addToAverage(this.totalGpuDuration, this.averageGpu);\n    if (this.info && this.totalGpuDurationCompute !== void 0) {\n      this.addToAverage(this.totalGpuDurationCompute, this.averageGpuCompute);\n    }\n  }\n  addToAverage(value, averageArray) {\n    averageArray.logs.push(value);\n    while (averageArray.logs.length > this.samplesLog) {\n      averageArray.logs.shift();\n    }\n    averageArray.graph.push(value);\n    while (averageArray.graph.length > this.samplesGraph) {\n      averageArray.graph.shift();\n    }\n  }\n  resetCounters() {\n    this.renderCount = 0;\n    this.totalCpuDuration = 0;\n    this.beginTime = performance.now();\n  }\n  getData() {\n    const fpsLogs = this.averageFps.logs;\n    const cpuLogs = this.averageCpu.logs;\n    const gpuLogs = this.averageGpu.logs;\n    const gpuComputeLogs = this.averageGpuCompute.logs;\n    return {\n      fps: fpsLogs.length > 0 ? fpsLogs[fpsLogs.length - 1] : 0,\n      cpu: cpuLogs.length > 0 ? cpuLogs[cpuLogs.length - 1] : 0,\n      gpu: gpuLogs.length > 0 ? gpuLogs[gpuLogs.length - 1] : 0,\n      gpuCompute: gpuComputeLogs.length > 0 ? gpuComputeLogs[gpuComputeLogs.length - 1] : 0\n    };\n  }\n  patchThreeWebGPU(renderer) {\n    const originalAnimationLoop = renderer.info.reset;\n    const statsInstance = this;\n    renderer.info.reset = function() {\n      statsInstance.beginProfiling(\"cpu-started\");\n      originalAnimationLoop.call(this);\n    };\n  }\n  patchThreeRenderer(renderer) {\n    const originalRenderMethod = renderer.render;\n    const statsInstance = this;\n    renderer.render = function(scene, camera) {\n      statsInstance.begin();\n      originalRenderMethod.call(this, scene, camera);\n      statsInstance.end();\n    };\n    this.threeRendererPatched = true;\n  }\n  /**\n   * Dispose of all resources. Call when done using the stats instance.\n   */\n  dispose() {\n    if (this.gl) {\n      if (this.activeQuery && this.ext) {\n        try {\n          this.gl.endQuery(this.ext.TIME_ELAPSED_EXT);\n        } catch (_) {\n        }\n        this.gl.deleteQuery(this.activeQuery);\n        this.activeQuery = null;\n      }\n      for (const queryInfo of this.gpuQueries) {\n        this.gl.deleteQuery(queryInfo.query);\n      }\n      this.gpuQueries.length = 0;\n    }\n    if (this.gpuQuerySet) {\n      this.gpuQuerySet.destroy();\n      this.gpuQuerySet = null;\n    }\n    if (this.gpuResolveBuffer) {\n      this.gpuResolveBuffer.destroy();\n      this.gpuResolveBuffer = null;\n    }\n    for (const buffer of this.gpuReadBuffers) {\n      if (buffer.mapState === \"mapped\") {\n        buffer.unmap();\n      }\n      buffer.destroy();\n    }\n    this.gpuReadBuffers.length = 0;\n    this.gpuFrameCount = 0;\n    this.pendingResolve = null;\n    this.webgpuNative = false;\n    this.gl = null;\n    this.ext = null;\n    this.info = void 0;\n    this.gpuDevice = null;\n    this.gpuBackend = null;\n    this.renderer = null;\n    this.frameTimes.length = 0;\n    this.averageFps.logs.length = 0;\n    this.averageFps.graph.length = 0;\n    this.averageCpu.logs.length = 0;\n    this.averageCpu.graph.length = 0;\n    this.averageGpu.logs.length = 0;\n    this.averageGpu.graph.length = 0;\n    this.averageGpuCompute.logs.length = 0;\n    this.averageGpuCompute.graph.length = 0;\n  }\n}\nexport {\n  StatsCore\n};\n//# sourceMappingURL=core.js.map\n","class Panel {\n  constructor(name, fg, bg) {\n    this.id = 0;\n    this.name = name;\n    this.fg = fg;\n    this.bg = bg;\n    this.gradient = null;\n    this.PR = Math.round(typeof window !== \"undefined\" ? window.devicePixelRatio || 1 : 1);\n    this.WIDTH = 90 * this.PR;\n    this.HEIGHT = 48 * this.PR;\n    this.TEXT_X = 3 * this.PR;\n    this.TEXT_Y = 2 * this.PR;\n    this.GRAPH_X = 3 * this.PR;\n    this.GRAPH_Y = 15 * this.PR;\n    this.GRAPH_WIDTH = 84 * this.PR;\n    this.GRAPH_HEIGHT = 30 * this.PR;\n    this.canvas = typeof document !== \"undefined\" ? document.createElement(\"canvas\") : new OffscreenCanvas(this.WIDTH, this.HEIGHT);\n    this.canvas.width = this.WIDTH;\n    this.canvas.height = this.HEIGHT;\n    this.canvas.style.width = \"90px\";\n    this.canvas.style.height = \"48px\";\n    this.canvas.style.position = \"absolute\";\n    this.canvas.style.cssText = \"width:90px;height:48px;background-color: transparent !important;\";\n    this.context = this.canvas.getContext(\"2d\");\n    this.initializeCanvas();\n  }\n  createGradient() {\n    if (!this.context)\n      throw new Error(\"No context\");\n    const gradient = this.context.createLinearGradient(\n      0,\n      this.GRAPH_Y,\n      0,\n      this.GRAPH_Y + this.GRAPH_HEIGHT\n    );\n    let startColor;\n    const endColor = this.fg;\n    switch (this.fg.toLowerCase()) {\n      case \"#0ff\":\n        startColor = \"#006666\";\n        break;\n      case \"#0f0\":\n        startColor = \"#006600\";\n        break;\n      case \"#ff0\":\n        startColor = \"#666600\";\n        break;\n      case \"#e1e1e1\":\n        startColor = \"#666666\";\n        break;\n      default:\n        startColor = this.bg;\n        break;\n    }\n    gradient.addColorStop(0, startColor);\n    gradient.addColorStop(1, endColor);\n    return gradient;\n  }\n  initializeCanvas() {\n    if (!this.context)\n      return;\n    this.context.imageSmoothingEnabled = false;\n    this.context.font = \"bold \" + 9 * this.PR + \"px Helvetica,Arial,sans-serif\";\n    this.context.textBaseline = \"top\";\n    this.gradient = this.createGradient();\n    this.context.fillStyle = this.bg;\n    this.context.fillRect(0, 0, this.WIDTH, this.HEIGHT);\n    this.context.fillStyle = this.fg;\n    this.context.fillText(this.name, this.TEXT_X, this.TEXT_Y);\n    this.context.fillStyle = this.bg;\n    this.context.globalAlpha = 0.9;\n    this.context.fillRect(this.GRAPH_X, this.GRAPH_Y, this.GRAPH_WIDTH, this.GRAPH_HEIGHT);\n  }\n  // Update only text portion\n  update(value, maxValue, decimals = 0, suffix = \"\") {\n    if (!this.context || !this.gradient)\n      return;\n    const min = Math.min(Infinity, value);\n    const max = Math.max(maxValue, value);\n    this.context.globalAlpha = 1;\n    this.context.fillStyle = this.bg;\n    this.context.fillRect(0, 0, this.WIDTH, this.GRAPH_Y);\n    const valueAndName = `${value.toFixed(decimals)} ${this.name}`;\n    this.context.fillStyle = this.fg;\n    this.context.fillText(valueAndName, this.TEXT_X, this.TEXT_Y);\n    let textX = this.TEXT_X + this.context.measureText(valueAndName).width;\n    if (suffix) {\n      this.context.fillStyle = \"#f90\";\n      this.context.fillText(suffix, textX, this.TEXT_Y);\n      textX += this.context.measureText(suffix).width;\n    }\n    this.context.fillStyle = this.fg;\n    this.context.fillText(\n      ` (${min.toFixed(decimals)}-${parseFloat(max.toFixed(decimals))})`,\n      textX,\n      this.TEXT_Y\n    );\n  }\n  // Update only graph portion\n  updateGraph(valueGraph, maxGraph) {\n    if (!this.context || !this.gradient)\n      return;\n    if (valueGraph === 0 && maxGraph === 0) {\n      maxGraph = 1;\n    }\n    maxGraph = Math.max(maxGraph, valueGraph, 0.1);\n    valueGraph = Math.max(valueGraph, 0);\n    const graphX = Math.round(this.GRAPH_X);\n    const graphY = Math.round(this.GRAPH_Y);\n    const graphWidth = Math.round(this.GRAPH_WIDTH);\n    const graphHeight = Math.round(this.GRAPH_HEIGHT);\n    const pr = Math.round(this.PR);\n    this.context.drawImage(\n      this.canvas,\n      graphX + pr,\n      graphY,\n      graphWidth - pr,\n      graphHeight,\n      graphX,\n      graphY,\n      graphWidth - pr,\n      graphHeight\n    );\n    this.context.fillStyle = this.bg;\n    this.context.fillRect(\n      graphX + graphWidth - pr,\n      graphY,\n      pr,\n      graphHeight\n    );\n    const columnHeight = Math.min(\n      graphHeight,\n      Math.round(valueGraph / maxGraph * graphHeight)\n    );\n    if (columnHeight > 0) {\n      this.context.globalAlpha = 0.9;\n      this.context.fillStyle = this.gradient;\n      this.context.fillRect(\n        graphX + graphWidth - pr,\n        graphY + (graphHeight - columnHeight),\n        pr,\n        columnHeight\n      );\n    }\n    this.context.globalAlpha = 1;\n  }\n}\nexport {\n  Panel\n};\n//# sourceMappingURL=panel.js.map\n","import { Panel } from \"./panel.js\";\nclass PanelVSync extends Panel {\n  constructor(name, fg, bg) {\n    super(name, fg, bg);\n    this.vsyncValue = 0;\n    this.SMALL_HEIGHT = 9 * this.PR;\n    this.HEIGHT = this.SMALL_HEIGHT;\n    this.WIDTH = 35 * this.PR;\n    this.TEXT_Y = 0 * this.PR;\n    this.canvas.height = this.HEIGHT;\n    this.canvas.width = this.WIDTH;\n    this.canvas.style.height = \"9px\";\n    this.canvas.style.width = \"35px\";\n    this.canvas.style.cssText = `\n            width: 35px;\n            height: 9px;\n            position: absolute;\n            top: 0;\n            left: 0;\n            background-color: transparent !important;\n            pointer-events: none;\n        `;\n    this.initializeCanvas();\n  }\n  initializeCanvas() {\n    if (!this.context)\n      return;\n    this.context.imageSmoothingEnabled = false;\n    this.context.font = \"bold \" + 9 * this.PR + \"px Helvetica,Arial,sans-serif\";\n    this.context.textBaseline = \"top\";\n    this.context.globalAlpha = 1;\n  }\n  // Override update for VSync-specific display\n  update(value, _maxValue, _decimals = 0) {\n    if (!this.context)\n      return;\n    this.vsyncValue = value;\n    this.context.clearRect(0, 0, this.WIDTH, this.HEIGHT);\n    this.context.globalAlpha = 1;\n    this.context.fillStyle = this.bg;\n    this.context.fillText(\n      `${value.toFixed(0)}Hz`,\n      this.TEXT_X,\n      this.TEXT_Y\n    );\n  }\n  // Override updateGraph to do nothing (we don't need a graph for VSync)\n  updateGraph(_valueGraph, _maxGraph) {\n    return;\n  }\n  // Method to set the offset position relative to parent panel\n  setOffset(x, y) {\n    this.canvas.style.transform = `translate(${x}px, ${y}px)`;\n  }\n}\nexport {\n  PanelVSync\n};\n//# sourceMappingURL=panelVsync.js.map\n","import { Panel } from \"./panel.js\";\nclass PanelTexture extends Panel {\n  // Source texture aspect ratio (width/height)\n  constructor(name) {\n    super(name, \"#fff\", \"#111\");\n    this.currentBitmap = null;\n    this.sourceAspect = 1;\n    this.initializeCanvas();\n  }\n  initializeCanvas() {\n    if (!this.context)\n      return;\n    this.context.imageSmoothingEnabled = true;\n    this.context.font = \"bold \" + 9 * this.PR + \"px Helvetica,Arial,sans-serif\";\n    this.context.textBaseline = \"top\";\n    this.context.fillStyle = \"#000\";\n    this.context.fillRect(0, 0, this.WIDTH, this.HEIGHT);\n    this.drawLabelOverlay();\n  }\n  drawLabelOverlay() {\n    if (!this.context)\n      return;\n    this.context.fillStyle = \"rgba(0, 0, 0, 0.5)\";\n    this.context.fillRect(0, 0, this.WIDTH, this.GRAPH_Y);\n    this.context.fillStyle = this.fg;\n    this.context.fillText(this.name, this.TEXT_X, this.TEXT_Y);\n  }\n  /**\n   * Set the source texture aspect ratio for proper display\n   * @param width - Source texture width\n   * @param height - Source texture height\n   */\n  setSourceSize(width, height) {\n    this.sourceAspect = width / height;\n  }\n  updateTexture(bitmap) {\n    if (!this.context)\n      return;\n    if (this.currentBitmap) {\n      this.currentBitmap.close();\n    }\n    this.currentBitmap = bitmap;\n    this.context.fillStyle = \"#000\";\n    this.context.fillRect(0, 0, this.WIDTH, this.HEIGHT);\n    const panelAspect = this.WIDTH / this.HEIGHT;\n    let destWidth;\n    let destHeight;\n    let destX;\n    let destY;\n    if (this.sourceAspect > panelAspect) {\n      destWidth = this.WIDTH;\n      destHeight = this.WIDTH / this.sourceAspect;\n      destX = 0;\n      destY = (this.HEIGHT - destHeight) / 2;\n    } else {\n      destHeight = this.HEIGHT;\n      destWidth = this.HEIGHT * this.sourceAspect;\n      destX = (this.WIDTH - destWidth) / 2;\n      destY = 0;\n    }\n    this.context.drawImage(\n      bitmap,\n      destX,\n      destY,\n      destWidth,\n      destHeight\n    );\n    this.drawLabelOverlay();\n  }\n  setLabel(label) {\n    this.name = label;\n    this.drawLabelOverlay();\n  }\n  // Override update - not used for texture panels\n  update(_value, _maxValue, _decimals = 0, _suffix = \"\") {\n  }\n  // Override updateGraph - not used for texture panels\n  updateGraph(_valueGraph, _maxGraph) {\n  }\n  /**\n   * Dispose of resources\n   */\n  dispose() {\n    if (this.currentBitmap) {\n      this.currentBitmap.close();\n      this.currentBitmap = null;\n    }\n  }\n}\nexport {\n  PanelTexture\n};\n//# sourceMappingURL=panelTexture.js.map\n","const DEFAULT_PREVIEW_WIDTH = 90;\nconst DEFAULT_PREVIEW_HEIGHT = 48;\nclass TextureCaptureWebGL {\n  constructor(gl, width = DEFAULT_PREVIEW_WIDTH, height = DEFAULT_PREVIEW_HEIGHT) {\n    this.previewFbo = null;\n    this.previewTexture = null;\n    this.gl = gl;\n    this.previewWidth = width;\n    this.previewHeight = height;\n    this.pixels = new Uint8Array(width * height * 4);\n    this.flippedPixels = new Uint8Array(width * height * 4);\n    this.initResources();\n  }\n  /**\n   * Resize preview dimensions\n   */\n  resize(width, height) {\n    if (width === this.previewWidth && height === this.previewHeight)\n      return;\n    this.previewWidth = width;\n    this.previewHeight = height;\n    this.pixels = new Uint8Array(width * height * 4);\n    this.flippedPixels = new Uint8Array(width * height * 4);\n    this.dispose();\n    this.initResources();\n  }\n  initResources() {\n    const gl = this.gl;\n    this.previewTexture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, this.previewTexture);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA8, this.previewWidth, this.previewHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    this.previewFbo = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.previewFbo);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.previewTexture, 0);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n  }\n  async capture(source, sourceWidth, sourceHeight, _sourceId = \"default\") {\n    const gl = this.gl;\n    const prevReadFbo = gl.getParameter(gl.READ_FRAMEBUFFER_BINDING);\n    const prevDrawFbo = gl.getParameter(gl.DRAW_FRAMEBUFFER_BINDING);\n    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, source);\n    gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this.previewFbo);\n    gl.blitFramebuffer(\n      0,\n      0,\n      sourceWidth,\n      sourceHeight,\n      0,\n      0,\n      this.previewWidth,\n      this.previewHeight,\n      gl.COLOR_BUFFER_BIT,\n      gl.LINEAR\n    );\n    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.previewFbo);\n    gl.readPixels(0, 0, this.previewWidth, this.previewHeight, gl.RGBA, gl.UNSIGNED_BYTE, this.pixels);\n    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, prevReadFbo);\n    gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, prevDrawFbo);\n    const flipped = this.flipY(this.pixels, this.previewWidth, this.previewHeight);\n    const imageData = new ImageData(new Uint8ClampedArray(flipped), this.previewWidth, this.previewHeight);\n    return createImageBitmap(imageData);\n  }\n  flipY(pixels, width, height) {\n    const rowSize = width * 4;\n    for (let y = 0; y < height; y++) {\n      const srcOffset = y * rowSize;\n      const dstOffset = (height - 1 - y) * rowSize;\n      this.flippedPixels.set(pixels.subarray(srcOffset, srcOffset + rowSize), dstOffset);\n    }\n    return this.flippedPixels;\n  }\n  removeSource(_sourceId) {\n  }\n  dispose() {\n    const gl = this.gl;\n    if (this.previewFbo) {\n      gl.deleteFramebuffer(this.previewFbo);\n      this.previewFbo = null;\n    }\n    if (this.previewTexture) {\n      gl.deleteTexture(this.previewTexture);\n      this.previewTexture = null;\n    }\n  }\n}\nclass TextureCaptureWebGPU {\n  constructor(device, width = DEFAULT_PREVIEW_WIDTH, height = DEFAULT_PREVIEW_HEIGHT) {\n    this.previewTexture = null;\n    this.stagingBuffer = null;\n    this.blitPipeline = null;\n    this.sampler = null;\n    this.bindGroupLayout = null;\n    this.initialized = false;\n    this.device = device;\n    this.previewWidth = width;\n    this.previewHeight = height;\n    this.pixelsBuffer = new Uint8ClampedArray(width * height * 4);\n  }\n  /**\n   * Resize preview dimensions\n   */\n  resize(width, height) {\n    if (width === this.previewWidth && height === this.previewHeight)\n      return;\n    this.previewWidth = width;\n    this.previewHeight = height;\n    this.pixelsBuffer = new Uint8ClampedArray(width * height * 4);\n    if (this.previewTexture)\n      this.previewTexture.destroy();\n    if (this.stagingBuffer)\n      this.stagingBuffer.destroy();\n    this.previewTexture = null;\n    this.stagingBuffer = null;\n    if (this.initialized) {\n      this.createSizeResources();\n    }\n  }\n  createSizeResources() {\n    const device = this.device;\n    this.previewTexture = device.createTexture({\n      size: { width: this.previewWidth, height: this.previewHeight },\n      format: \"rgba8unorm\",\n      usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC\n    });\n    const bytesPerRow = Math.ceil(this.previewWidth * 4 / 256) * 256;\n    this.stagingBuffer = device.createBuffer({\n      size: bytesPerRow * this.previewHeight,\n      usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ\n    });\n  }\n  async initResources() {\n    if (this.initialized)\n      return;\n    const device = this.device;\n    this.createSizeResources();\n    this.sampler = device.createSampler({\n      minFilter: \"linear\",\n      magFilter: \"linear\"\n    });\n    const shaderModule = device.createShaderModule({\n      code: `\n        @group(0) @binding(0) var texSampler: sampler;\n        @group(0) @binding(1) var texInput: texture_2d<f32>;\n\n        struct VertexOutput {\n          @builtin(position) position: vec4f,\n          @location(0) uv: vec2f\n        }\n\n        @vertex\n        fn vertexMain(@builtin(vertex_index) vertexIndex: u32) -> VertexOutput {\n          var positions = array<vec2f, 3>(\n            vec2f(-1.0, -1.0),\n            vec2f(3.0, -1.0),\n            vec2f(-1.0, 3.0)\n          );\n          var uvs = array<vec2f, 3>(\n            vec2f(0.0, 1.0),\n            vec2f(2.0, 1.0),\n            vec2f(0.0, -1.0)\n          );\n\n          var output: VertexOutput;\n          output.position = vec4f(positions[vertexIndex], 0.0, 1.0);\n          output.uv = uvs[vertexIndex];\n          return output;\n        }\n\n        @fragment\n        fn fragmentMain(@location(0) uv: vec2f) -> @location(0) vec4f {\n          return textureSample(texInput, texSampler, uv);\n        }\n      `\n    });\n    this.bindGroupLayout = device.createBindGroupLayout({\n      entries: [\n        { binding: 0, visibility: GPUShaderStage.FRAGMENT, sampler: { type: \"filtering\" } },\n        { binding: 1, visibility: GPUShaderStage.FRAGMENT, texture: { sampleType: \"float\" } }\n      ]\n    });\n    this.blitPipeline = device.createRenderPipeline({\n      layout: device.createPipelineLayout({ bindGroupLayouts: [this.bindGroupLayout] }),\n      vertex: {\n        module: shaderModule,\n        entryPoint: \"vertexMain\"\n      },\n      fragment: {\n        module: shaderModule,\n        entryPoint: \"fragmentMain\",\n        targets: [{ format: \"rgba8unorm\" }]\n      },\n      primitive: { topology: \"triangle-list\" }\n    });\n    this.initialized = true;\n  }\n  async capture(source) {\n    await this.initResources();\n    if (!this.previewTexture || !this.stagingBuffer || !this.blitPipeline || !this.sampler || !this.bindGroupLayout) {\n      return null;\n    }\n    const device = this.device;\n    const bindGroup = device.createBindGroup({\n      layout: this.bindGroupLayout,\n      entries: [\n        { binding: 0, resource: this.sampler },\n        { binding: 1, resource: source.createView() }\n      ]\n    });\n    const commandEncoder = device.createCommandEncoder();\n    const renderPass = commandEncoder.beginRenderPass({\n      colorAttachments: [{\n        view: this.previewTexture.createView(),\n        loadOp: \"clear\",\n        storeOp: \"store\",\n        clearValue: { r: 0, g: 0, b: 0, a: 1 }\n      }]\n    });\n    renderPass.setPipeline(this.blitPipeline);\n    renderPass.setBindGroup(0, bindGroup);\n    renderPass.draw(3);\n    renderPass.end();\n    const bytesPerRow = Math.ceil(this.previewWidth * 4 / 256) * 256;\n    commandEncoder.copyTextureToBuffer(\n      { texture: this.previewTexture },\n      { buffer: this.stagingBuffer, bytesPerRow },\n      { width: this.previewWidth, height: this.previewHeight }\n    );\n    device.queue.submit([commandEncoder.finish()]);\n    await this.stagingBuffer.mapAsync(GPUMapMode.READ);\n    const data = new Uint8Array(this.stagingBuffer.getMappedRange());\n    for (let y = 0; y < this.previewHeight; y++) {\n      const srcOffset = y * bytesPerRow;\n      const dstOffset = y * this.previewWidth * 4;\n      this.pixelsBuffer.set(data.subarray(srcOffset, srcOffset + this.previewWidth * 4), dstOffset);\n    }\n    this.stagingBuffer.unmap();\n    const imageData = new ImageData(new Uint8ClampedArray(this.pixelsBuffer), this.previewWidth, this.previewHeight);\n    return createImageBitmap(imageData);\n  }\n  dispose() {\n    if (this.previewTexture)\n      this.previewTexture.destroy();\n    if (this.stagingBuffer)\n      this.stagingBuffer.destroy();\n    this.previewTexture = null;\n    this.stagingBuffer = null;\n    this.blitPipeline = null;\n    this.sampler = null;\n    this.bindGroupLayout = null;\n    this.initialized = false;\n  }\n}\nfunction extractWebGLSource(target, gl) {\n  if (target.isWebGLRenderTarget && target.__webglFramebuffer) {\n    return {\n      framebuffer: target.__webglFramebuffer,\n      width: target.width || 1,\n      height: target.height || 1\n    };\n  }\n  return null;\n}\nfunction extractWebGPUSource(target, backend) {\n  if (target.isRenderTarget && target.texture && backend.get) {\n    const textureData = backend.get(target.texture);\n    return (textureData == null ? void 0 : textureData.texture) || null;\n  }\n  return null;\n}\nexport {\n  DEFAULT_PREVIEW_HEIGHT,\n  DEFAULT_PREVIEW_WIDTH,\n  TextureCaptureWebGL,\n  TextureCaptureWebGPU,\n  extractWebGLSource,\n  extractWebGPUSource\n};\n//# sourceMappingURL=textureCapture.js.map\n","import { StatsCore } from \"./core.js\";\nimport { Panel } from \"./panel.js\";\nimport { PanelVSync } from \"./panelVsync.js\";\nimport { PanelTexture } from \"./panelTexture.js\";\nimport { DEFAULT_PREVIEW_WIDTH, DEFAULT_PREVIEW_HEIGHT, TextureCaptureWebGL, TextureCaptureWebGPU, extractWebGLSource, extractWebGPUSource } from \"./textureCapture.js\";\nimport { StatsProfiler } from \"./profiler.js\";\nimport { StatsGLCapture } from \"./statsGLNode.js\";\nconst _Stats = class _Stats2 extends StatsCore {\n  constructor({\n    trackGPU = false,\n    trackCPT = false,\n    trackHz = false,\n    trackFPS = true,\n    logsPerSecond = 4,\n    graphsPerSecond = 30,\n    samplesLog = 40,\n    samplesGraph = 10,\n    precision = 2,\n    minimal = false,\n    horizontal = true,\n    mode = 0\n  } = {}) {\n    super({\n      trackGPU,\n      trackCPT,\n      trackHz,\n      trackFPS,\n      logsPerSecond,\n      graphsPerSecond,\n      samplesLog,\n      samplesGraph,\n      precision\n    });\n    this.fpsPanel = null;\n    this.msPanel = null;\n    this.gpuPanel = null;\n    this.gpuPanelCompute = null;\n    this.vsyncPanel = null;\n    this.workerCpuPanel = null;\n    this.texturePanels = /* @__PURE__ */ new Map();\n    this.texturePanelRow = null;\n    this.textureCaptureWebGL = null;\n    this.textureCaptureWebGPU = null;\n    this.textureSourcesWebGL = /* @__PURE__ */ new Map();\n    this.textureSourcesWebGPU = /* @__PURE__ */ new Map();\n    this.texturePreviewWidth = DEFAULT_PREVIEW_WIDTH;\n    this.texturePreviewHeight = DEFAULT_PREVIEW_HEIGHT;\n    this.lastRendererWidth = 0;\n    this.lastRendererHeight = 0;\n    this.textureUpdatePending = false;\n    this.updateCounter = 0;\n    this.lastMin = {};\n    this.lastMax = {};\n    this.lastValue = {};\n    this.VSYNC_RATES = [\n      { refreshRate: 60, frameTime: 16.67 },\n      { refreshRate: 75, frameTime: 13.33 },\n      { refreshRate: 90, frameTime: 11.11 },\n      { refreshRate: 120, frameTime: 8.33 },\n      { refreshRate: 144, frameTime: 6.94 },\n      { refreshRate: 165, frameTime: 6.06 },\n      { refreshRate: 240, frameTime: 4.17 }\n    ];\n    this.detectedVSync = null;\n    this.frameTimeHistory = [];\n    this.HISTORY_SIZE = 120;\n    this.VSYNC_THRESHOLD = 0.05;\n    this.lastFrameTime = 0;\n    this.externalData = null;\n    this.hasNewExternalData = false;\n    this.isWorker = false;\n    this.averageWorkerCpu = { logs: [], graph: [] };\n    this.handleClick = (event) => {\n      event.preventDefault();\n      this.showPanel(++this.mode % this.dom.children.length);\n    };\n    this.handleResize = () => {\n      if (this.fpsPanel)\n        this.resizePanel(this.fpsPanel);\n      if (this.msPanel)\n        this.resizePanel(this.msPanel);\n      if (this.workerCpuPanel)\n        this.resizePanel(this.workerCpuPanel);\n      if (this.gpuPanel)\n        this.resizePanel(this.gpuPanel);\n      if (this.gpuPanelCompute)\n        this.resizePanel(this.gpuPanelCompute);\n    };\n    this.mode = mode;\n    this.horizontal = horizontal;\n    this.minimal = minimal;\n    this.dom = document.createElement(\"div\");\n    this.initializeDOM();\n    this._panelId = 0;\n    if (this.trackFPS) {\n      this.fpsPanel = this.addPanel(new _Stats2.Panel(\"FPS\", \"#0ff\", \"#002\"));\n      this.msPanel = this.addPanel(new _Stats2.Panel(\"CPU\", \"#0f0\", \"#020\"));\n    }\n    if (this.trackGPU) {\n      this.gpuPanel = this.addPanel(new _Stats2.Panel(\"GPU\", \"#ff0\", \"#220\"));\n    }\n    if (this.trackCPT) {\n      this.gpuPanelCompute = this.addPanel(new _Stats2.Panel(\"CPT\", \"#e1e1e1\", \"#212121\"));\n    }\n    if (this.trackHz === true) {\n      this.vsyncPanel = new PanelVSync(\"\", \"#f0f\", \"#202\");\n      this.dom.appendChild(this.vsyncPanel.canvas);\n      this.vsyncPanel.setOffset(56, 35);\n    }\n    this.setupEventListeners();\n  }\n  initializeDOM() {\n    this.dom.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      opacity: 0.9;\n      z-index: 10000;\n      ${this.minimal ? \"cursor: pointer;\" : \"\"}\n    `;\n  }\n  setupEventListeners() {\n    if (this.minimal) {\n      this.dom.addEventListener(\"click\", this.handleClick);\n      this.showPanel(this.mode);\n    } else {\n      window.addEventListener(\"resize\", this.handleResize);\n    }\n  }\n  /**\n   * Compute and update texture preview dimensions based on renderer aspect ratio\n   */\n  updateTexturePreviewDimensions() {\n    var _a, _b;\n    if (!this.renderer)\n      return;\n    const rendererWidth = ((_a = this.renderer.domElement) == null ? void 0 : _a.width) || 0;\n    const rendererHeight = ((_b = this.renderer.domElement) == null ? void 0 : _b.height) || 0;\n    if (rendererWidth === this.lastRendererWidth && rendererHeight === this.lastRendererHeight) {\n      return;\n    }\n    if (rendererWidth === 0 || rendererHeight === 0)\n      return;\n    this.lastRendererWidth = rendererWidth;\n    this.lastRendererHeight = rendererHeight;\n    const sourceAspect = rendererWidth / rendererHeight;\n    const panelAspect = DEFAULT_PREVIEW_WIDTH / DEFAULT_PREVIEW_HEIGHT;\n    let newWidth;\n    let newHeight;\n    if (sourceAspect > panelAspect) {\n      newWidth = DEFAULT_PREVIEW_WIDTH;\n      newHeight = Math.round(DEFAULT_PREVIEW_WIDTH / sourceAspect);\n    } else {\n      newHeight = DEFAULT_PREVIEW_HEIGHT;\n      newWidth = Math.round(DEFAULT_PREVIEW_HEIGHT * sourceAspect);\n    }\n    newWidth = Math.max(newWidth, 16);\n    newHeight = Math.max(newHeight, 16);\n    if (newWidth !== this.texturePreviewWidth || newHeight !== this.texturePreviewHeight) {\n      this.texturePreviewWidth = newWidth;\n      this.texturePreviewHeight = newHeight;\n      if (this.textureCaptureWebGL) {\n        this.textureCaptureWebGL.resize(newWidth, newHeight);\n      }\n      if (this.textureCaptureWebGPU) {\n        this.textureCaptureWebGPU.resize(newWidth, newHeight);\n      }\n      for (const panel of this.texturePanels.values()) {\n        panel.setSourceSize(rendererWidth, rendererHeight);\n      }\n    }\n  }\n  onWebGPUTimestampSupported() {\n  }\n  onGPUTrackingInitialized() {\n  }\n  setData(data) {\n    this.externalData = data;\n    this.hasNewExternalData = true;\n    if (!this.isWorker && this.msPanel) {\n      this.isWorker = true;\n      this.workerCpuPanel = new _Stats2.Panel(\"WRK\", \"#f90\", \"#220\");\n      const insertPosition = this.msPanel.id + 1;\n      this.workerCpuPanel.id = insertPosition;\n      if (this.gpuPanel && this.gpuPanel.id >= insertPosition) {\n        this.gpuPanel.id++;\n        this.resizePanel(this.gpuPanel);\n      }\n      if (this.gpuPanelCompute && this.gpuPanelCompute.id >= insertPosition) {\n        this.gpuPanelCompute.id++;\n        this.resizePanel(this.gpuPanelCompute);\n      }\n      const msCanvas = this.msPanel.canvas;\n      if (msCanvas.nextSibling) {\n        this.dom.insertBefore(this.workerCpuPanel.canvas, msCanvas.nextSibling);\n      } else {\n        this.dom.appendChild(this.workerCpuPanel.canvas);\n      }\n      this.resizePanel(this.workerCpuPanel);\n      this._panelId++;\n    }\n  }\n  update() {\n    if (this.externalData) {\n      this.updateFromExternalData();\n    } else {\n      this.updateFromInternalData();\n    }\n  }\n  updateFromExternalData() {\n    const data = this.externalData;\n    this.endProfiling(\"cpu-started\", \"cpu-finished\", \"cpu-duration\");\n    this.addToAverage(this.totalCpuDuration, this.averageCpu);\n    this.totalCpuDuration = 0;\n    if (this.hasNewExternalData) {\n      this.addToAverage(data.cpu, this.averageWorkerCpu);\n      this.addToAverage(data.fps, this.averageFps);\n      this.addToAverage(data.gpu, this.averageGpu);\n      this.addToAverage(data.gpuCompute, this.averageGpuCompute);\n      this.hasNewExternalData = false;\n    }\n    this.renderPanels();\n  }\n  updateFromInternalData() {\n    this.endProfiling(\"cpu-started\", \"cpu-finished\", \"cpu-duration\");\n    if (this.webgpuNative) {\n      this.resolveTimestampsAsync();\n    } else if (!this.info) {\n      this.processGpuQueries();\n    } else {\n      this.processWebGPUTimestamps();\n    }\n    this.updateAverages();\n    this.resetCounters();\n    this.renderPanels();\n  }\n  renderPanels() {\n    var _a;\n    const currentTime = performance.now();\n    if (!this.isWorker) {\n      this.frameTimes.push(currentTime);\n      while (this.frameTimes.length > 0 && this.frameTimes[0] <= currentTime - 1e3) {\n        this.frameTimes.shift();\n      }\n      const fps = Math.round(this.frameTimes.length);\n      this.addToAverage(fps, this.averageFps);\n    }\n    const shouldUpdateText = currentTime >= this.prevTextTime + 1e3 / this.logsPerSecond;\n    const shouldUpdateGraph = currentTime >= this.prevGraphTime + 1e3 / this.graphsPerSecond;\n    const suffix = this.isWorker ? \" \" : \"\";\n    this.updatePanelComponents(this.fpsPanel, this.averageFps, 0, shouldUpdateText, shouldUpdateGraph, suffix);\n    this.updatePanelComponents(this.msPanel, this.averageCpu, this.precision, shouldUpdateText, shouldUpdateGraph, \"\");\n    if (this.workerCpuPanel && this.isWorker) {\n      this.updatePanelComponents(this.workerCpuPanel, this.averageWorkerCpu, this.precision, shouldUpdateText, shouldUpdateGraph, \" \");\n    }\n    if (this.gpuPanel) {\n      this.updatePanelComponents(this.gpuPanel, this.averageGpu, this.precision, shouldUpdateText, shouldUpdateGraph, suffix);\n    }\n    if (this.trackCPT && this.gpuPanelCompute) {\n      this.updatePanelComponents(this.gpuPanelCompute, this.averageGpuCompute, this.precision, shouldUpdateText, shouldUpdateGraph, suffix);\n    }\n    if (shouldUpdateText) {\n      this.prevTextTime = currentTime;\n    }\n    if (shouldUpdateGraph) {\n      this.prevGraphTime = currentTime;\n      if (this.texturePanels.size > 0 && !this.textureUpdatePending) {\n        this.textureUpdatePending = true;\n        this.updateTexturePanels().finally(() => {\n          this.textureUpdatePending = false;\n        });\n      }\n      this.captureStatsGLNodes();\n    }\n    if (this.vsyncPanel !== null) {\n      this.detectVSync(currentTime);\n      const vsyncValue = ((_a = this.detectedVSync) == null ? void 0 : _a.refreshRate) || 0;\n      if (shouldUpdateText && vsyncValue > 0) {\n        this.vsyncPanel.update(vsyncValue, vsyncValue);\n      }\n    }\n  }\n  resetCounters() {\n    this.renderCount = 0;\n    this.totalCpuDuration = 0;\n    this.beginTime = performance.now();\n  }\n  resizePanel(panel) {\n    panel.canvas.style.position = \"absolute\";\n    if (this.minimal) {\n      panel.canvas.style.display = \"none\";\n    } else {\n      panel.canvas.style.display = \"block\";\n      if (this.horizontal) {\n        panel.canvas.style.top = \"0px\";\n        panel.canvas.style.left = panel.id * panel.WIDTH / panel.PR + \"px\";\n      } else {\n        panel.canvas.style.left = \"0px\";\n        panel.canvas.style.top = panel.id * panel.HEIGHT / panel.PR + \"px\";\n      }\n    }\n  }\n  addPanel(panel) {\n    if (panel.canvas) {\n      this.dom.appendChild(panel.canvas);\n      panel.id = this._panelId;\n      this.resizePanel(panel);\n      this._panelId++;\n    }\n    return panel;\n  }\n  showPanel(id) {\n    for (let i = 0; i < this.dom.children.length; i++) {\n      const child = this.dom.children[i];\n      child.style.display = i === id ? \"block\" : \"none\";\n    }\n    this.mode = id;\n  }\n  // ==========================================================================\n  // Texture Panel API\n  // ==========================================================================\n  /**\n   * Add a new texture preview panel\n   * @param name - Label for the texture panel\n   * @returns The created PanelTexture instance\n   */\n  addTexturePanel(name) {\n    if (!this.texturePanelRow) {\n      this.texturePanelRow = document.createElement(\"div\");\n      this.texturePanelRow.style.cssText = `\n        position: absolute;\n        top: 48px;\n        left: 0;\n        display: flex;\n        flex-direction: row;\n      `;\n      this.dom.appendChild(this.texturePanelRow);\n    }\n    const panel = new PanelTexture(name);\n    panel.canvas.style.position = \"relative\";\n    panel.canvas.style.left = \"\";\n    panel.canvas.style.top = \"\";\n    this.texturePanelRow.appendChild(panel.canvas);\n    this.texturePanels.set(name, panel);\n    return panel;\n  }\n  /**\n   * Set texture source for a panel (Three.js render target)\n   * Auto-detects WebGL/WebGPU and extracts native handles\n   * @param name - Panel name\n   * @param source - Three.js RenderTarget or native texture\n   */\n  setTexture(name, source) {\n    this.updateTexturePreviewDimensions();\n    if (this.gl && !this.textureCaptureWebGL) {\n      this.textureCaptureWebGL = new TextureCaptureWebGL(this.gl, this.texturePreviewWidth, this.texturePreviewHeight);\n    }\n    if (this.gpuDevice && !this.textureCaptureWebGPU) {\n      this.textureCaptureWebGPU = new TextureCaptureWebGPU(this.gpuDevice, this.texturePreviewWidth, this.texturePreviewHeight);\n    }\n    const panel = this.texturePanels.get(name);\n    if (source.isWebGLRenderTarget && this.gl) {\n      const webglSource = extractWebGLSource(source, this.gl);\n      if (webglSource) {\n        this.textureSourcesWebGL.set(name, {\n          target: source,\n          ...webglSource\n        });\n        if (panel) {\n          panel.setSourceSize(webglSource.width, webglSource.height);\n        }\n      }\n      return;\n    }\n    if (source.isRenderTarget && this.gpuBackend) {\n      const gpuTexture = extractWebGPUSource(source, this.gpuBackend);\n      if (gpuTexture) {\n        this.textureSourcesWebGPU.set(name, gpuTexture);\n        if (panel && source.width && source.height) {\n          panel.setSourceSize(source.width, source.height);\n        }\n      }\n      return;\n    }\n    if (source && typeof source.createView === \"function\") {\n      this.textureSourcesWebGPU.set(name, source);\n      return;\n    }\n  }\n  /**\n   * Set WebGL framebuffer source with explicit dimensions\n   * @param name - Panel name\n   * @param framebuffer - WebGL framebuffer\n   * @param width - Texture width\n   * @param height - Texture height\n   */\n  setTextureWebGL(name, framebuffer, width, height) {\n    this.updateTexturePreviewDimensions();\n    if (this.gl && !this.textureCaptureWebGL) {\n      this.textureCaptureWebGL = new TextureCaptureWebGL(this.gl, this.texturePreviewWidth, this.texturePreviewHeight);\n    }\n    this.textureSourcesWebGL.set(name, {\n      target: { isWebGLRenderTarget: true },\n      framebuffer,\n      width,\n      height\n    });\n    const panel = this.texturePanels.get(name);\n    if (panel) {\n      panel.setSourceSize(width, height);\n    }\n  }\n  /**\n   * Set texture from ImageBitmap (for worker mode)\n   * @param name - Panel name\n   * @param bitmap - ImageBitmap transferred from worker\n   * @param sourceWidth - Optional source texture width for aspect ratio\n   * @param sourceHeight - Optional source texture height for aspect ratio\n   */\n  setTextureBitmap(name, bitmap, sourceWidth, sourceHeight) {\n    const panel = this.texturePanels.get(name);\n    if (panel) {\n      if (sourceWidth !== void 0 && sourceHeight !== void 0) {\n        panel.setSourceSize(sourceWidth, sourceHeight);\n      }\n      panel.updateTexture(bitmap);\n    }\n  }\n  /**\n   * Remove a texture panel\n   * @param name - Panel name to remove\n   */\n  removeTexturePanel(name) {\n    const panel = this.texturePanels.get(name);\n    if (panel) {\n      panel.dispose();\n      panel.canvas.remove();\n      this.texturePanels.delete(name);\n      this.textureSourcesWebGL.delete(name);\n      this.textureSourcesWebGPU.delete(name);\n    }\n  }\n  /**\n   * Capture and update all texture panels\n   * Called automatically during renderPanels at graphsPerSecond rate\n   */\n  async updateTexturePanels() {\n    this.updateTexturePreviewDimensions();\n    if (this.textureCaptureWebGL) {\n      for (const [name, source] of this.textureSourcesWebGL) {\n        const panel = this.texturePanels.get(name);\n        if (panel) {\n          let framebuffer = source.framebuffer;\n          let width = source.width;\n          let height = source.height;\n          if (source.target.isWebGLRenderTarget && source.target.__webglFramebuffer) {\n            framebuffer = source.target.__webglFramebuffer;\n            width = source.target.width || width;\n            height = source.target.height || height;\n          }\n          const bitmap = await this.textureCaptureWebGL.capture(framebuffer, width, height, name);\n          if (bitmap) {\n            panel.updateTexture(bitmap);\n          }\n        }\n      }\n    }\n    if (this.textureCaptureWebGPU) {\n      for (const [name, gpuTexture] of this.textureSourcesWebGPU) {\n        const panel = this.texturePanels.get(name);\n        if (panel) {\n          const bitmap = await this.textureCaptureWebGPU.capture(gpuTexture);\n          if (bitmap) {\n            panel.updateTexture(bitmap);\n          }\n        }\n      }\n    }\n  }\n  /**\n   * Capture StatsGL nodes registered by the addon\n   */\n  captureStatsGLNodes() {\n    const captures = this._statsGLCaptures;\n    if (!captures || captures.size === 0 || !this.renderer)\n      return;\n    for (const captureData of captures.values()) {\n      if (captureData.capture) {\n        captureData.capture(this.renderer);\n      }\n    }\n  }\n  detectVSync(currentTime) {\n    if (this.lastFrameTime === 0) {\n      this.lastFrameTime = currentTime;\n      return;\n    }\n    const frameTime = currentTime - this.lastFrameTime;\n    this.lastFrameTime = currentTime;\n    this.frameTimeHistory.push(frameTime);\n    if (this.frameTimeHistory.length > this.HISTORY_SIZE) {\n      this.frameTimeHistory.shift();\n    }\n    if (this.frameTimeHistory.length < 60)\n      return;\n    const avgFrameTime = this.frameTimeHistory.reduce((a, b) => a + b) / this.frameTimeHistory.length;\n    const variance = this.frameTimeHistory.reduce((acc, time) => acc + Math.pow(time - avgFrameTime, 2), 0) / this.frameTimeHistory.length;\n    const stability = Math.sqrt(variance);\n    if (stability > 2) {\n      this.detectedVSync = null;\n      return;\n    }\n    let closestMatch = null;\n    let smallestDiff = Infinity;\n    for (const rate of this.VSYNC_RATES) {\n      const diff = Math.abs(avgFrameTime - rate.frameTime);\n      if (diff < smallestDiff) {\n        smallestDiff = diff;\n        closestMatch = rate;\n      }\n    }\n    if (closestMatch && smallestDiff / closestMatch.frameTime <= this.VSYNC_THRESHOLD) {\n      this.detectedVSync = closestMatch;\n    } else {\n      this.detectedVSync = null;\n    }\n  }\n  updatePanelComponents(panel, averageArray, precision, shouldUpdateText, shouldUpdateGraph, suffix = \"\") {\n    if (!panel || averageArray.logs.length === 0)\n      return;\n    const key = String(panel.id);\n    if (!(key in this.lastMin)) {\n      this.lastMin[key] = Infinity;\n      this.lastMax[key] = 0;\n      this.lastValue[key] = 0;\n    }\n    const currentValue = averageArray.logs[averageArray.logs.length - 1];\n    this.lastMax[key] = Math.max(...averageArray.logs);\n    this.lastMin[key] = Math.min(this.lastMin[key], currentValue);\n    this.lastValue[key] = this.lastValue[key] * 0.7 + currentValue * 0.3;\n    const graphMax = Math.max(\n      Math.max(...averageArray.logs),\n      ...averageArray.graph.slice(-this.samplesGraph)\n    );\n    this.updateCounter++;\n    if (shouldUpdateText) {\n      panel.update(\n        this.lastValue[key],\n        this.lastMax[key],\n        precision,\n        suffix\n      );\n    }\n    if (shouldUpdateGraph) {\n      panel.updateGraph(\n        currentValue,\n        graphMax\n      );\n    }\n  }\n  updatePanel(panel, averageArray, precision = 2) {\n    if (!panel || averageArray.logs.length === 0)\n      return;\n    const currentTime = performance.now();\n    if (!(panel.name in this.lastMin)) {\n      this.lastMin[panel.name] = Infinity;\n      this.lastMax[panel.name] = 0;\n      this.lastValue[panel.name] = 0;\n    }\n    const currentValue = averageArray.logs[averageArray.logs.length - 1];\n    const recentMax = Math.max(...averageArray.logs.slice(-30));\n    this.lastMin[panel.name] = Math.min(this.lastMin[panel.name], currentValue);\n    this.lastMax[panel.name] = Math.max(this.lastMax[panel.name], currentValue);\n    this.lastValue[panel.name] = this.lastValue[panel.name] * 0.7 + currentValue * 0.3;\n    const graphMax = Math.max(recentMax, ...averageArray.graph.slice(-this.samplesGraph));\n    this.updateCounter++;\n    if (this.updateCounter % (this.logsPerSecond * 2) === 0) {\n      this.lastMax[panel.name] = recentMax;\n      this.lastMin[panel.name] = currentValue;\n    }\n    if (panel.update) {\n      if (currentTime >= this.prevCpuTime + 1e3 / this.logsPerSecond) {\n        panel.update(\n          this.lastValue[panel.name],\n          currentValue,\n          this.lastMax[panel.name],\n          graphMax,\n          precision\n        );\n      }\n      if (currentTime >= this.prevGraphTime + 1e3 / this.graphsPerSecond) {\n        panel.updateGraph(\n          currentValue,\n          graphMax\n        );\n        this.prevGraphTime = currentTime;\n      }\n    }\n  }\n  get domElement() {\n    return this.dom;\n  }\n  /**\n   * Dispose of all resources. Call when done using Stats.\n   */\n  dispose() {\n    if (this.minimal) {\n      this.dom.removeEventListener(\"click\", this.handleClick);\n    } else {\n      window.removeEventListener(\"resize\", this.handleResize);\n    }\n    if (this.textureCaptureWebGL) {\n      this.textureCaptureWebGL.dispose();\n      this.textureCaptureWebGL = null;\n    }\n    if (this.textureCaptureWebGPU) {\n      this.textureCaptureWebGPU.dispose();\n      this.textureCaptureWebGPU = null;\n    }\n    for (const panel of this.texturePanels.values()) {\n      panel.dispose();\n    }\n    this.texturePanels.clear();\n    this.textureSourcesWebGL.clear();\n    this.textureSourcesWebGPU.clear();\n    const captures = this._statsGLCaptures;\n    if (captures) {\n      for (const captureData of captures.values()) {\n        if (captureData.dispose) {\n          captureData.dispose();\n        }\n      }\n      captures.clear();\n    }\n    if (this.texturePanelRow) {\n      this.texturePanelRow.remove();\n      this.texturePanelRow = null;\n    }\n    this.dom.remove();\n    this.fpsPanel = null;\n    this.msPanel = null;\n    this.gpuPanel = null;\n    this.gpuPanelCompute = null;\n    this.vsyncPanel = null;\n    this.workerCpuPanel = null;\n    this.frameTimeHistory.length = 0;\n    this.averageWorkerCpu.logs.length = 0;\n    this.averageWorkerCpu.graph.length = 0;\n    super.dispose();\n  }\n};\n_Stats.Panel = Panel;\n_Stats.PanelTexture = PanelTexture;\nlet Stats = _Stats;\nexport {\n  PanelTexture,\n  StatsGLCapture,\n  StatsProfiler,\n  TextureCaptureWebGL,\n  TextureCaptureWebGPU,\n  Stats as default\n};\n//# sourceMappingURL=main.js.map\n"],"names":["Ray","Plane","MathUtils","Vector3","Controls","MOUSE","TOUCH","Quaternion","Spherical","Vector2","document","supported","action","Pane","REVISION","THREE","Stats"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAmBA,QAAM,eAAe,EAAE,MAAM,SAAQ;AAQrC,QAAM,cAAc,EAAE,MAAM,QAAO;AAQnC,QAAM,YAAY,EAAE,MAAM,MAAK;AAE/B,QAAM,OAAO,IAAIA,MAAAA,IAAG;AACpB,QAAM,SAAS,IAAIC,MAAAA,MAAK;AACxB,QAAM,cAAc,KAAK,IAAK,KAAKC,MAAAA,UAAU,OAAO;AAEpD,QAAM,KAAK,IAAIC,MAAAA,QAAO;AACtB,QAAM,SAAS,IAAI,KAAK;AAExB,QAAM,SAAS;AAAA,IACd,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,KAAK;AAAA,IACL,cAAc;AAAA,IACd,WAAW;AAAA,IACX,iBAAiB;AAAA,IACjB,oBAAoB;AAAA,EACrB;AACA,QAAM,OAAO;AAAA,EAiCb,MAAM,sBAAsBC,MAAAA,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAQpC,YAAa,QAAQ,aAAa,MAAO;AAExC,YAAO,QAAQ,UAAU;AAEzB,WAAK,QAAQ,OAAO;AAQpB,WAAK,SAAS,IAAID,cAAO;AASzB,WAAK,SAAS,IAAIA,cAAO;AAQzB,WAAK,cAAc;AAQnB,WAAK,cAAc;AAQnB,WAAK,UAAU;AAQf,WAAK,UAAU;AAQf,WAAK,kBAAkB;AAQvB,WAAK,kBAAkB;AAQvB,WAAK,gBAAgB;AAQrB,WAAK,gBAAgB,KAAK;AAS1B,WAAK,kBAAkB;AASvB,WAAK,kBAAkB;AAUvB,WAAK,gBAAgB;AAUrB,WAAK,gBAAgB;AAQrB,WAAK,aAAa;AAQlB,WAAK,YAAY;AAYjB,WAAK,eAAe;AAQpB,WAAK,cAAc;AAQnB,WAAK,iBAAiB;AAQtB,WAAK,YAAY;AAQjB,WAAK,WAAW;AAUhB,WAAK,qBAAqB;AAS1B,WAAK,cAAc;AAQnB,WAAK,eAAe;AAYpB,WAAK,aAAa;AAWlB,WAAK,kBAAkB;AAevB,WAAK,OAAO,EAAE,MAAM,aAAa,IAAI,WAAW,OAAO,cAAc,QAAQ,YAAW;AAcxF,WAAK,eAAe,EAAE,MAAME,MAAAA,MAAM,QAAQ,QAAQA,MAAAA,MAAM,OAAO,OAAOA,MAAAA,MAAM,IAAG;AAa/E,WAAK,UAAU,EAAE,KAAKC,MAAAA,MAAM,QAAQ,KAAKA,MAAAA,MAAM,UAAS;AAOxD,WAAK,UAAU,KAAK,OAAO,MAAK;AAOhC,WAAK,YAAY,KAAK,OAAO,SAAS,MAAK;AAO3C,WAAK,QAAQ,KAAK,OAAO;AAGzB,WAAK,uBAAuB;AAI5B,WAAK,gBAAgB,IAAIH,cAAO;AAChC,WAAK,kBAAkB,IAAII,iBAAU;AACrC,WAAK,sBAAsB,IAAIJ,cAAO;AAGtC,WAAK,QAAQ,IAAII,MAAAA,WAAU,EAAG,mBAAoB,OAAO,IAAI,IAAIJ,MAAAA,QAAS,GAAG,GAAG,CAAC,CAAE;AACnF,WAAK,eAAe,KAAK,MAAM,MAAK,EAAG,OAAM;AAG7C,WAAK,aAAa,IAAIK,gBAAS;AAC/B,WAAK,kBAAkB,IAAIA,gBAAS;AAEpC,WAAK,SAAS;AACd,WAAK,aAAa,IAAIL,cAAO;AAE7B,WAAK,eAAe,IAAIM,cAAO;AAC/B,WAAK,aAAa,IAAIA,cAAO;AAC7B,WAAK,eAAe,IAAIA,cAAO;AAE/B,WAAK,YAAY,IAAIA,cAAO;AAC5B,WAAK,UAAU,IAAIA,cAAO;AAC1B,WAAK,YAAY,IAAIA,cAAO;AAE5B,WAAK,cAAc,IAAIA,cAAO;AAC9B,WAAK,YAAY,IAAIA,cAAO;AAC5B,WAAK,cAAc,IAAIA,cAAO;AAE9B,WAAK,kBAAkB,IAAIN,cAAO;AAClC,WAAK,SAAS,IAAIM,cAAO;AACzB,WAAK,qBAAqB;AAE1B,WAAK,YAAY,CAAA;AACjB,WAAK,oBAAoB,CAAA;AAEzB,WAAK,iBAAiB;AAItB,WAAK,iBAAiB,cAAc,KAAM,IAAI;AAC9C,WAAK,iBAAiB,cAAc,KAAM,IAAI;AAC9C,WAAK,eAAe,YAAY,KAAM,IAAI;AAC1C,WAAK,iBAAiB,cAAc,KAAM,IAAI;AAC9C,WAAK,gBAAgB,aAAa,KAAM,IAAI;AAC5C,WAAK,aAAa,UAAU,KAAM,IAAI;AAEtC,WAAK,gBAAgB,aAAa,KAAM,IAAI;AAC5C,WAAK,eAAe,YAAY,KAAM,IAAI;AAE1C,WAAK,eAAe,YAAY,KAAM,IAAI;AAC1C,WAAK,eAAe,YAAY,KAAM,IAAI;AAE1C,WAAK,wBAAwB,qBAAqB,KAAM,IAAI;AAC5D,WAAK,sBAAsB,mBAAmB,KAAM,IAAI;AAIxD,UAAK,KAAK,eAAe,MAAO;AAE/B,aAAK,QAAS,KAAK,UAAU;AAAA,MAE9B;AAEA,WAAK,OAAM;AAAA,IAEZ;AAAA,IAEA,QAAS,SAAU;AAElB,YAAM,QAAS,OAAO;AAEtB,WAAK,WAAW,iBAAkB,eAAe,KAAK,cAAc;AACpE,WAAK,WAAW,iBAAkB,iBAAiB,KAAK,YAAY;AAEpE,WAAK,WAAW,iBAAkB,eAAe,KAAK,cAAc;AACpE,WAAK,WAAW,iBAAkB,SAAS,KAAK,eAAe,EAAE,SAAS,OAAO;AAEjF,YAAMC,YAAW,KAAK,WAAW,YAAW;AAC5C,MAAAA,UAAS,iBAAkB,WAAW,KAAK,uBAAuB,EAAE,SAAS,MAAM,SAAS,MAAM;AAElG,WAAK,WAAW,MAAM,cAAc;AAAA,IAErC;AAAA,IAEA,aAAa;AAEZ,WAAK,WAAW,oBAAqB,eAAe,KAAK,cAAc;AACvE,WAAK,WAAW,cAAc,oBAAqB,eAAe,KAAK,cAAc;AACrF,WAAK,WAAW,cAAc,oBAAqB,aAAa,KAAK,YAAY;AACjF,WAAK,WAAW,oBAAqB,iBAAiB,KAAK,YAAY;AAEvE,WAAK,WAAW,oBAAqB,SAAS,KAAK,aAAa;AAChE,WAAK,WAAW,oBAAqB,eAAe,KAAK,cAAc;AAEvE,WAAK,sBAAqB;AAE1B,YAAMA,YAAW,KAAK,WAAW,YAAW;AAC5C,MAAAA,UAAS,oBAAqB,WAAW,KAAK,uBAAuB,EAAE,SAAS,MAAM;AAEtF,WAAK,WAAW,MAAM,cAAc;AAAA,IAErC;AAAA,IAEA,UAAU;AAET,WAAK,WAAU;AAAA,IAEhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,gBAAgB;AAEf,aAAO,KAAK,WAAW;AAAA,IAExB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,oBAAoB;AAEnB,aAAO,KAAK,WAAW;AAAA,IAExB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,cAAc;AAEb,aAAO,KAAK,OAAO,SAAS,WAAY,KAAK,MAAM;AAAA,IAEpD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAQA,kBAAmB,YAAa;AAE/B,iBAAW,iBAAkB,WAAW,KAAK,UAAU;AACvD,WAAK,uBAAuB;AAAA,IAE7B;AAAA;AAAA;AAAA;AAAA,IAKA,wBAAwB;AAEvB,UAAK,KAAK,yBAAyB,MAAO;AAEzC,aAAK,qBAAqB,oBAAqB,WAAW,KAAK,UAAU;AACzE,aAAK,uBAAuB;AAAA,MAE7B;AAAA,IAED;AAAA;AAAA;AAAA;AAAA,IAKA,YAAY;AAEX,WAAK,QAAQ,KAAM,KAAK,MAAM;AAC9B,WAAK,UAAU,KAAM,KAAK,OAAO,QAAQ;AACzC,WAAK,QAAQ,KAAK,OAAO;AAAA,IAE1B;AAAA;AAAA;AAAA;AAAA;AAAA,IAMA,QAAQ;AAEP,WAAK,OAAO,KAAM,KAAK,OAAO;AAC9B,WAAK,OAAO,SAAS,KAAM,KAAK,SAAS;AACzC,WAAK,OAAO,OAAO,KAAK;AAExB,WAAK,OAAO,uBAAsB;AAClC,WAAK,cAAe,YAAY;AAEhC,WAAK,OAAM;AAEX,WAAK,QAAQ,OAAO;AAAA,IAErB;AAAA,IAEA,OAAQ,YAAY,MAAO;AAE1B,YAAM,WAAW,KAAK,OAAO;AAE7B,SAAG,KAAM,QAAQ,EAAG,IAAK,KAAK,MAAM;AAGpC,SAAG,gBAAiB,KAAK,KAAK;AAG9B,WAAK,WAAW,eAAgB,EAAE;AAElC,UAAK,KAAK,cAAc,KAAK,UAAU,OAAO,MAAO;AAEpD,aAAK,YAAa,KAAK,sBAAuB,SAAS,CAAE;AAAA,MAE1D;AAEA,UAAK,KAAK,eAAgB;AAEzB,aAAK,WAAW,SAAS,KAAK,gBAAgB,QAAQ,KAAK;AAC3D,aAAK,WAAW,OAAO,KAAK,gBAAgB,MAAM,KAAK;AAAA,MAExD,OAAO;AAEN,aAAK,WAAW,SAAS,KAAK,gBAAgB;AAC9C,aAAK,WAAW,OAAO,KAAK,gBAAgB;AAAA,MAE7C;AAIA,UAAI,MAAM,KAAK;AACf,UAAI,MAAM,KAAK;AAEf,UAAK,SAAU,GAAG,KAAM,SAAU,GAAG,GAAK;AAEzC,YAAK,MAAM,CAAE,KAAK,GAAK,QAAO;AAAA,iBAAkB,MAAM,KAAK,GAAK,QAAO;AAEvE,YAAK,MAAM,CAAE,KAAK,GAAK,QAAO;AAAA,iBAAkB,MAAM,KAAK,GAAK,QAAO;AAEvE,YAAK,OAAO,KAAM;AAEjB,eAAK,WAAW,QAAQ,KAAK,IAAK,KAAK,KAAK,IAAK,KAAK,KAAK,WAAW,KAAK,CAAE;AAAA,QAE9E,OAAO;AAEN,eAAK,WAAW,QAAU,KAAK,WAAW,SAAU,MAAM,OAAQ,IACjE,KAAK,IAAK,KAAK,KAAK,WAAW,KAAK,IACpC,KAAK,IAAK,KAAK,KAAK,WAAW,KAAK;AAAA,QAEtC;AAAA,MAED;AAGA,WAAK,WAAW,MAAM,KAAK,IAAK,KAAK,eAAe,KAAK,IAAK,KAAK,eAAe,KAAK,WAAW,GAAG,CAAE;AAEvG,WAAK,WAAW,SAAQ;AAKxB,UAAK,KAAK,kBAAkB,MAAO;AAElC,aAAK,OAAO,gBAAiB,KAAK,YAAY,KAAK,aAAa;AAAA,MAEjE,OAAO;AAEN,aAAK,OAAO,IAAK,KAAK,UAAU;AAAA,MAEjC;AAGA,WAAK,OAAO,IAAK,KAAK,MAAM;AAC5B,WAAK,OAAO,YAAa,KAAK,iBAAiB,KAAK,eAAe;AACnE,WAAK,OAAO,IAAK,KAAK,MAAM;AAE5B,UAAI,cAAc;AAGlB,UAAK,KAAK,gBAAgB,KAAK,sBAAsB,KAAK,OAAO,sBAAuB;AAEvF,aAAK,WAAW,SAAS,KAAK,eAAgB,KAAK,WAAW,MAAM;AAAA,MAErE,OAAO;AAEN,cAAM,aAAa,KAAK,WAAW;AACnC,aAAK,WAAW,SAAS,KAAK,eAAgB,KAAK,WAAW,SAAS,KAAK,MAAM;AAClF,sBAAc,cAAc,KAAK,WAAW;AAAA,MAE7C;AAEA,SAAG,iBAAkB,KAAK,UAAU;AAGpC,SAAG,gBAAiB,KAAK,YAAY;AAErC,eAAS,KAAM,KAAK,MAAM,EAAG,IAAK,EAAE;AAEpC,WAAK,OAAO,OAAQ,KAAK,MAAM;AAE/B,UAAK,KAAK,kBAAkB,MAAO;AAElC,aAAK,gBAAgB,SAAW,IAAI,KAAK;AACzC,aAAK,gBAAgB,OAAS,IAAI,KAAK;AAEvC,aAAK,WAAW,eAAgB,IAAI,KAAK,aAAa;AAAA,MAEvD,OAAO;AAEN,aAAK,gBAAgB,IAAK,GAAG,GAAG,CAAC;AAEjC,aAAK,WAAW,IAAK,GAAG,GAAG,CAAC;AAAA,MAE7B;AAGA,UAAK,KAAK,gBAAgB,KAAK,oBAAqB;AAEnD,YAAI,YAAY;AAChB,YAAK,KAAK,OAAO,qBAAsB;AAItC,gBAAM,aAAa,GAAG,OAAM;AAC5B,sBAAY,KAAK,eAAgB,aAAa,KAAK,MAAM;AAEzD,gBAAM,cAAc,aAAa;AACjC,eAAK,OAAO,SAAS,gBAAiB,KAAK,iBAAiB,WAAW;AACvE,eAAK,OAAO,kBAAiB;AAE7B,wBAAc,CAAC,CAAE;AAAA,QAElB,WAAY,KAAK,OAAO,sBAAuB;AAG9C,gBAAM,cAAc,IAAIP,MAAAA,QAAS,KAAK,OAAO,GAAG,KAAK,OAAO,GAAG,CAAC;AAChE,sBAAY,UAAW,KAAK,MAAM;AAElC,gBAAM,WAAW,KAAK,OAAO;AAC7B,eAAK,OAAO,OAAO,KAAK,IAAK,KAAK,SAAS,KAAK,IAAK,KAAK,SAAS,KAAK,OAAO,OAAO,KAAK,OAAQ;AACnG,eAAK,OAAO,uBAAsB;AAElC,wBAAc,aAAa,KAAK,OAAO;AAEvC,gBAAM,aAAa,IAAIA,MAAAA,QAAS,KAAK,OAAO,GAAG,KAAK,OAAO,GAAG,CAAC;AAC/D,qBAAW,UAAW,KAAK,MAAM;AAEjC,eAAK,OAAO,SAAS,IAAK,UAAU,EAAG,IAAK,WAAW;AACvD,eAAK,OAAO,kBAAiB;AAE7B,sBAAY,GAAG,OAAM;AAAA,QAEtB,OAAO;AAEN,kBAAQ,KAAM,yFAAyF;AACvG,eAAK,eAAe;AAAA,QAErB;AAGA,YAAK,cAAc,MAAO;AAEzB,cAAK,KAAK,oBAAqB;AAG9B,iBAAK,OAAO,IAAK,GAAG,GAAG,EAAG,EACxB,mBAAoB,KAAK,OAAO,MAAM,EACtC,eAAgB,SAAS,EACzB,IAAK,KAAK,OAAO,QAAQ;AAAA,UAE5B,OAAO;AAGN,iBAAK,OAAO,KAAM,KAAK,OAAO,QAAQ;AACtC,iBAAK,UAAU,IAAK,GAAG,GAAG,EAAG,EAAG,mBAAoB,KAAK,OAAO,MAAM;AAItE,gBAAK,KAAK,IAAK,KAAK,OAAO,GAAG,IAAK,KAAK,UAAW,IAAK,aAAc;AAErE,mBAAK,OAAO,OAAQ,KAAK,MAAM;AAAA,YAEhC,OAAO;AAEN,qBAAO,8BAA+B,KAAK,OAAO,IAAI,KAAK,MAAM;AACjE,mBAAK,eAAgB,QAAQ,KAAK,MAAM;AAAA,YAEzC;AAAA,UAED;AAAA,QAED;AAAA,MAED,WAAY,KAAK,OAAO,sBAAuB;AAE9C,cAAM,WAAW,KAAK,OAAO;AAC7B,aAAK,OAAO,OAAO,KAAK,IAAK,KAAK,SAAS,KAAK,IAAK,KAAK,SAAS,KAAK,OAAO,OAAO,KAAK,OAAQ;AAEnG,YAAK,aAAa,KAAK,OAAO,MAAO;AAEpC,eAAK,OAAO,uBAAsB;AAClC,wBAAc;AAAA,QAEf;AAAA,MAED;AAEA,WAAK,SAAS;AACd,WAAK,qBAAqB;AAM1B,UAAK,eACJ,KAAK,cAAc,kBAAmB,KAAK,OAAO,QAAQ,IAAK,QAC/D,KAAM,IAAI,KAAK,gBAAgB,IAAK,KAAK,OAAO,UAAU,KAAO,QACjE,KAAK,oBAAoB,kBAAmB,KAAK,MAAM,IAAK,MAAO;AAEnE,aAAK,cAAe,YAAY;AAEhC,aAAK,cAAc,KAAM,KAAK,OAAO,QAAQ;AAC7C,aAAK,gBAAgB,KAAM,KAAK,OAAO,UAAU;AACjD,aAAK,oBAAoB,KAAM,KAAK,MAAM;AAE1C,eAAO;AAAA,MAER;AAEA,aAAO;AAAA,IAER;AAAA,IAEA,sBAAuB,WAAY;AAElC,UAAK,cAAc,MAAO;AAEzB,eAAS,SAAS,KAAK,KAAK,kBAAoB;AAAA,MAEjD,OAAO;AAEN,eAAO,SAAS,KAAK,KAAK,KAAK;AAAA,MAEhC;AAAA,IAED;AAAA,IAEA,cAAe,OAAQ;AAEtB,YAAM,kBAAkB,KAAK,IAAK,QAAQ,IAAI;AAC9C,aAAO,KAAK,IAAK,MAAM,KAAK,YAAY,eAAe;AAAA,IAExD;AAAA,IAEA,YAAa,OAAQ;AAEpB,WAAK,gBAAgB,SAAS;AAAA,IAE/B;AAAA,IAEA,UAAW,OAAQ;AAElB,WAAK,gBAAgB,OAAO;AAAA,IAE7B;AAAA,IAEA,SAAU,UAAU,cAAe;AAElC,SAAG,oBAAqB,cAAc;AACtC,SAAG,eAAgB,CAAE,QAAQ;AAE7B,WAAK,WAAW,IAAK,EAAE;AAAA,IAExB;AAAA,IAEA,OAAQ,UAAU,cAAe;AAEhC,UAAK,KAAK,uBAAuB,MAAO;AAEvC,WAAG,oBAAqB,cAAc,CAAC;AAAA,MAExC,OAAO;AAEN,WAAG,oBAAqB,cAAc,CAAC;AACvC,WAAG,aAAc,KAAK,OAAO,IAAI,EAAE;AAAA,MAEpC;AAEA,SAAG,eAAgB,QAAQ;AAE3B,WAAK,WAAW,IAAK,EAAE;AAAA,IAExB;AAAA;AAAA,IAGA,KAAM,QAAQ,QAAS;AAEtB,YAAM,UAAU,KAAK;AAErB,UAAK,KAAK,OAAO,qBAAsB;AAGtC,cAAM,WAAW,KAAK,OAAO;AAC7B,WAAG,KAAM,QAAQ,EAAG,IAAK,KAAK,MAAM;AACpC,YAAI,iBAAiB,GAAG,OAAM;AAG9B,0BAAkB,KAAK,IAAO,KAAK,OAAO,MAAM,IAAM,KAAK,KAAK,GAAK;AAGrE,aAAK,SAAU,IAAI,SAAS,iBAAiB,QAAQ,cAAc,KAAK,OAAO,MAAM;AACrF,aAAK,OAAQ,IAAI,SAAS,iBAAiB,QAAQ,cAAc,KAAK,OAAO,MAAM;AAAA,MAEpF,WAAY,KAAK,OAAO,sBAAuB;AAG9C,aAAK,SAAU,UAAW,KAAK,OAAO,QAAQ,KAAK,OAAO,QAAS,KAAK,OAAO,OAAO,QAAQ,aAAa,KAAK,OAAO,MAAM;AAC7H,aAAK,OAAQ,UAAW,KAAK,OAAO,MAAM,KAAK,OAAO,UAAW,KAAK,OAAO,OAAO,QAAQ,cAAc,KAAK,OAAO,MAAM;AAAA,MAE7H,OAAO;AAGN,gBAAQ,KAAM,8EAA8E;AAC5F,aAAK,YAAY;AAAA,MAElB;AAAA,IAED;AAAA,IAEA,UAAW,YAAa;AAEvB,UAAK,KAAK,OAAO,uBAAuB,KAAK,OAAO,sBAAuB;AAE1E,aAAK,UAAU;AAAA,MAEhB,OAAO;AAEN,gBAAQ,KAAM,qFAAqF;AACnG,aAAK,aAAa;AAAA,MAEnB;AAAA,IAED;AAAA,IAEA,SAAU,YAAa;AAEtB,UAAK,KAAK,OAAO,uBAAuB,KAAK,OAAO,sBAAuB;AAE1E,aAAK,UAAU;AAAA,MAEhB,OAAO;AAEN,gBAAQ,KAAM,qFAAqF;AACnG,aAAK,aAAa;AAAA,MAEnB;AAAA,IAED;AAAA,IAEA,sBAAuB,GAAG,GAAI;AAE7B,UAAK,CAAE,KAAK,cAAe;AAE1B;AAAA,MAED;AAEA,WAAK,qBAAqB;AAE1B,YAAM,OAAO,KAAK,WAAW,sBAAqB;AAClD,YAAM,KAAK,IAAI,KAAK;AACpB,YAAM,KAAK,IAAI,KAAK;AACpB,YAAM,IAAI,KAAK;AACf,YAAM,IAAI,KAAK;AAEf,WAAK,OAAO,IAAM,KAAK,IAAM,IAAI;AACjC,WAAK,OAAO,IAAI,EAAI,KAAK,KAAM,IAAI;AAEnC,WAAK,gBAAgB,IAAK,KAAK,OAAO,GAAG,KAAK,OAAO,GAAG,CAAC,EAAG,UAAW,KAAK,QAAS,IAAK,KAAK,OAAO,QAAQ,EAAG,UAAS;AAAA,IAE3H;AAAA,IAEA,eAAgB,MAAO;AAEtB,aAAO,KAAK,IAAK,KAAK,aAAa,KAAK,IAAK,KAAK,aAAa,KAAM;AAAA,IAEtE;AAAA;AAAA;AAAA;AAAA,IAMA,uBAAwB,OAAQ;AAE/B,WAAK,aAAa,IAAK,MAAM,SAAS,MAAM,OAAO;AAAA,IAEpD;AAAA,IAEA,sBAAuB,OAAQ;AAE9B,WAAK,sBAAuB,MAAM,SAAS,MAAM,OAAO;AACxD,WAAK,YAAY,IAAK,MAAM,SAAS,MAAM,OAAO;AAAA,IAEnD;AAAA,IAEA,oBAAqB,OAAQ;AAE5B,WAAK,UAAU,IAAK,MAAM,SAAS,MAAM,OAAO;AAAA,IAEjD;AAAA,IAEA,uBAAwB,OAAQ;AAE/B,WAAK,WAAW,IAAK,MAAM,SAAS,MAAM,OAAO;AAEjD,WAAK,aAAa,WAAY,KAAK,YAAY,KAAK,cAAe,eAAgB,KAAK,WAAW;AAEnG,YAAM,UAAU,KAAK;AAErB,WAAK,YAAa,SAAS,KAAK,aAAa,IAAI,QAAQ;AAEzD,WAAK,UAAW,SAAS,KAAK,aAAa,IAAI,QAAQ,YAAY;AAEnE,WAAK,aAAa,KAAM,KAAK,UAAU;AAEvC,WAAK,OAAM;AAAA,IAEZ;AAAA,IAEA,sBAAuB,OAAQ;AAE9B,WAAK,UAAU,IAAK,MAAM,SAAS,MAAM,OAAO;AAEhD,WAAK,YAAY,WAAY,KAAK,WAAW,KAAK,WAAW;AAE7D,UAAK,KAAK,YAAY,IAAI,GAAI;AAE7B,aAAK,UAAW,KAAK,cAAe,KAAK,YAAY,EAAG;AAAA,MAEzD,WAAY,KAAK,YAAY,IAAI,GAAI;AAEpC,aAAK,SAAU,KAAK,cAAe,KAAK,YAAY,EAAG;AAAA,MAExD;AAEA,WAAK,YAAY,KAAM,KAAK,SAAS;AAErC,WAAK,OAAM;AAAA,IAEZ;AAAA,IAEA,oBAAqB,OAAQ;AAE5B,WAAK,QAAQ,IAAK,MAAM,SAAS,MAAM,OAAO;AAE9C,WAAK,UAAU,WAAY,KAAK,SAAS,KAAK,WAAY,eAAgB,KAAK,QAAQ;AAEvF,WAAK,KAAM,KAAK,UAAU,GAAG,KAAK,UAAU,CAAC;AAE7C,WAAK,UAAU,KAAM,KAAK,OAAO;AAEjC,WAAK,OAAM;AAAA,IAEZ;AAAA,IAEA,kBAAmB,OAAQ;AAE1B,WAAK,sBAAuB,MAAM,SAAS,MAAM,OAAO;AAExD,UAAK,MAAM,SAAS,GAAI;AAEvB,aAAK,SAAU,KAAK,cAAe,MAAM,MAAM,CAAE;AAAA,MAElD,WAAY,MAAM,SAAS,GAAI;AAE9B,aAAK,UAAW,KAAK,cAAe,MAAM,MAAM,CAAE;AAAA,MAEnD;AAEA,WAAK,OAAM;AAAA,IAEZ;AAAA,IAEA,eAAgB,OAAQ;AAEvB,UAAI,cAAc;AAElB,cAAS,MAAM,MAAI;AAAA,QAElB,KAAK,KAAK,KAAK;AAEd,cAAK,MAAM,WAAW,MAAM,WAAW,MAAM,UAAW;AAEvD,gBAAK,KAAK,cAAe;AAExB,mBAAK,UAAW,SAAS,KAAK,iBAAiB,KAAK,WAAW,YAAY;AAAA,YAE5E;AAAA,UAED,OAAO;AAEN,gBAAK,KAAK,WAAY;AAErB,mBAAK,KAAM,GAAG,KAAK,WAAW;AAAA,YAE/B;AAAA,UAED;AAEA,wBAAc;AACd;AAAA,QAED,KAAK,KAAK,KAAK;AAEd,cAAK,MAAM,WAAW,MAAM,WAAW,MAAM,UAAW;AAEvD,gBAAK,KAAK,cAAe;AAExB,mBAAK,UAAW,CAAE,SAAS,KAAK,iBAAiB,KAAK,WAAW,YAAY;AAAA,YAE9E;AAAA,UAED,OAAO;AAEN,gBAAK,KAAK,WAAY;AAErB,mBAAK,KAAM,GAAG,CAAE,KAAK,WAAW;AAAA,YAEjC;AAAA,UAED;AAEA,wBAAc;AACd;AAAA,QAED,KAAK,KAAK,KAAK;AAEd,cAAK,MAAM,WAAW,MAAM,WAAW,MAAM,UAAW;AAEvD,gBAAK,KAAK,cAAe;AAExB,mBAAK,YAAa,SAAS,KAAK,iBAAiB,KAAK,WAAW,YAAY;AAAA,YAE9E;AAAA,UAED,OAAO;AAEN,gBAAK,KAAK,WAAY;AAErB,mBAAK,KAAM,KAAK,aAAa,CAAC;AAAA,YAE/B;AAAA,UAED;AAEA,wBAAc;AACd;AAAA,QAED,KAAK,KAAK,KAAK;AAEd,cAAK,MAAM,WAAW,MAAM,WAAW,MAAM,UAAW;AAEvD,gBAAK,KAAK,cAAe;AAExB,mBAAK,YAAa,CAAE,SAAS,KAAK,iBAAiB,KAAK,WAAW,YAAY;AAAA,YAEhF;AAAA,UAED,OAAO;AAEN,gBAAK,KAAK,WAAY;AAErB,mBAAK,KAAM,CAAE,KAAK,aAAa,CAAC;AAAA,YAEjC;AAAA,UAED;AAEA,wBAAc;AACd;AAAA,MAEJ;AAEE,UAAK,aAAc;AAGlB,cAAM,eAAc;AAEpB,aAAK,OAAM;AAAA,MAEZ;AAAA,IAGD;AAAA,IAEA,wBAAyB,OAAQ;AAEhC,UAAK,KAAK,UAAU,WAAW,GAAI;AAElC,aAAK,aAAa,IAAK,MAAM,OAAO,MAAM,KAAK;AAAA,MAEhD,OAAO;AAEN,cAAM,WAAW,KAAK,0BAA2B,KAAK;AAEtD,cAAM,IAAI,OAAQ,MAAM,QAAQ,SAAS;AACzC,cAAM,IAAI,OAAQ,MAAM,QAAQ,SAAS;AAEzC,aAAK,aAAa,IAAK,GAAG,CAAC;AAAA,MAE5B;AAAA,IAED;AAAA,IAEA,qBAAsB,OAAQ;AAE7B,UAAK,KAAK,UAAU,WAAW,GAAI;AAElC,aAAK,UAAU,IAAK,MAAM,OAAO,MAAM,KAAK;AAAA,MAE7C,OAAO;AAEN,cAAM,WAAW,KAAK,0BAA2B,KAAK;AAEtD,cAAM,IAAI,OAAQ,MAAM,QAAQ,SAAS;AACzC,cAAM,IAAI,OAAQ,MAAM,QAAQ,SAAS;AAEzC,aAAK,UAAU,IAAK,GAAG,CAAC;AAAA,MAEzB;AAAA,IAED;AAAA,IAEA,uBAAwB,OAAQ;AAE/B,YAAM,WAAW,KAAK,0BAA2B,KAAK;AAEtD,YAAM,KAAK,MAAM,QAAQ,SAAS;AAClC,YAAM,KAAK,MAAM,QAAQ,SAAS;AAElC,YAAM,WAAW,KAAK,KAAM,KAAK,KAAK,KAAK,EAAE;AAE7C,WAAK,YAAY,IAAK,GAAG,QAAQ;AAAA,IAElC;AAAA,IAEA,0BAA2B,OAAQ;AAElC,UAAK,KAAK,WAAa,MAAK,uBAAwB,KAAK;AAEzD,UAAK,KAAK,UAAY,MAAK,qBAAsB,KAAK;AAAA,IAEvD;AAAA,IAEA,6BAA8B,OAAQ;AAErC,UAAK,KAAK,WAAa,MAAK,uBAAwB,KAAK;AAEzD,UAAK,KAAK,aAAe,MAAK,wBAAyB,KAAK;AAAA,IAE7D;AAAA,IAEA,uBAAwB,OAAQ;AAE/B,UAAK,KAAK,UAAU,UAAU,GAAI;AAEjC,aAAK,WAAW,IAAK,MAAM,OAAO,MAAM,KAAK;AAAA,MAE9C,OAAO;AAEN,cAAM,WAAW,KAAK,0BAA2B,KAAK;AAEtD,cAAM,IAAI,OAAQ,MAAM,QAAQ,SAAS;AACzC,cAAM,IAAI,OAAQ,MAAM,QAAQ,SAAS;AAEzC,aAAK,WAAW,IAAK,GAAG,CAAC;AAAA,MAE1B;AAEA,WAAK,aAAa,WAAY,KAAK,YAAY,KAAK,cAAe,eAAgB,KAAK,WAAW;AAEnG,YAAM,UAAU,KAAK;AAErB,WAAK,YAAa,SAAS,KAAK,aAAa,IAAI,QAAQ;AAEzD,WAAK,UAAW,SAAS,KAAK,aAAa,IAAI,QAAQ,YAAY;AAEnE,WAAK,aAAa,KAAM,KAAK,UAAU;AAAA,IAExC;AAAA,IAEA,oBAAqB,OAAQ;AAE5B,UAAK,KAAK,UAAU,WAAW,GAAI;AAElC,aAAK,QAAQ,IAAK,MAAM,OAAO,MAAM,KAAK;AAAA,MAE3C,OAAO;AAEN,cAAM,WAAW,KAAK,0BAA2B,KAAK;AAEtD,cAAM,IAAI,OAAQ,MAAM,QAAQ,SAAS;AACzC,cAAM,IAAI,OAAQ,MAAM,QAAQ,SAAS;AAEzC,aAAK,QAAQ,IAAK,GAAG,CAAC;AAAA,MAEvB;AAEA,WAAK,UAAU,WAAY,KAAK,SAAS,KAAK,WAAY,eAAgB,KAAK,QAAQ;AAEvF,WAAK,KAAM,KAAK,UAAU,GAAG,KAAK,UAAU,CAAC;AAE7C,WAAK,UAAU,KAAM,KAAK,OAAO;AAAA,IAElC;AAAA,IAEA,sBAAuB,OAAQ;AAE9B,YAAM,WAAW,KAAK,0BAA2B,KAAK;AAEtD,YAAM,KAAK,MAAM,QAAQ,SAAS;AAClC,YAAM,KAAK,MAAM,QAAQ,SAAS;AAElC,YAAM,WAAW,KAAK,KAAM,KAAK,KAAK,KAAK,EAAE;AAE7C,WAAK,UAAU,IAAK,GAAG,QAAQ;AAE/B,WAAK,YAAY,IAAK,GAAG,KAAK,IAAK,KAAK,UAAU,IAAI,KAAK,YAAY,GAAG,KAAK,SAAS,CAAE;AAE1F,WAAK,UAAW,KAAK,YAAY,CAAC;AAElC,WAAK,YAAY,KAAM,KAAK,SAAS;AAErC,YAAM,WAAY,MAAM,QAAQ,SAAS,KAAM;AAC/C,YAAM,WAAY,MAAM,QAAQ,SAAS,KAAM;AAE/C,WAAK,sBAAuB,SAAS,OAAO;AAAA,IAE7C;AAAA,IAEA,yBAA0B,OAAQ;AAEjC,UAAK,KAAK,WAAa,MAAK,sBAAuB,KAAK;AAExD,UAAK,KAAK,UAAY,MAAK,oBAAqB,KAAK;AAAA,IAEtD;AAAA,IAEA,4BAA6B,OAAQ;AAEpC,UAAK,KAAK,WAAa,MAAK,sBAAuB,KAAK;AAExD,UAAK,KAAK,aAAe,MAAK,uBAAwB,KAAK;AAAA,IAE5D;AAAA;AAAA,IAIA,YAAa,OAAQ;AAEpB,WAAK,UAAU,KAAM,MAAM,SAAS;AAAA,IAErC;AAAA,IAEA,eAAgB,OAAQ;AAEvB,aAAO,KAAK,kBAAmB,MAAM,SAAS;AAE9C,eAAU,IAAI,GAAG,IAAI,KAAK,UAAU,QAAQ,KAAO;AAElD,YAAK,KAAK,UAAW,CAAC,KAAM,MAAM,WAAY;AAE7C,eAAK,UAAU,OAAQ,GAAG,CAAC;AAC3B;AAAA,QAED;AAAA,MAED;AAAA,IAED;AAAA,IAEA,mBAAoB,OAAQ;AAE3B,eAAU,IAAI,GAAG,IAAI,KAAK,UAAU,QAAQ,KAAO;AAElD,YAAK,KAAK,UAAW,CAAC,KAAM,MAAM,UAAY,QAAO;AAAA,MAEtD;AAEA,aAAO;AAAA,IAER;AAAA,IAEA,cAAe,OAAQ;AAEtB,UAAI,WAAW,KAAK,kBAAmB,MAAM,SAAS;AAEtD,UAAK,aAAa,QAAY;AAE7B,mBAAW,IAAIM,MAAAA,QAAO;AACtB,aAAK,kBAAmB,MAAM,SAAS,IAAK;AAAA,MAE7C;AAEA,eAAS,IAAK,MAAM,OAAO,MAAM,KAAK;AAAA,IAEvC;AAAA,IAEA,0BAA2B,OAAQ;AAElC,YAAM,YAAc,MAAM,cAAc,KAAK,UAAW,CAAC,IAAO,KAAK,UAAW,CAAC,IAAK,KAAK,UAAW,CAAC;AAEvG,aAAO,KAAK,kBAAmB,SAAS;AAAA,IAEzC;AAAA;AAAA,IAIA,kBAAmB,OAAQ;AAE1B,YAAM,OAAO,MAAM;AAGnB,YAAM,WAAW;AAAA,QAChB,SAAS,MAAM;AAAA,QACf,SAAS,MAAM;AAAA,QACf,QAAQ,MAAM;AAAA,MACjB;AAEE,cAAS,MAAI;AAAA,QAEZ,KAAK;AACJ,mBAAS,UAAU;AACnB;AAAA,QAED,KAAK;AACJ,mBAAS,UAAU;AACnB;AAAA,MAEJ;AAGE,UAAK,MAAM,WAAW,CAAE,KAAK,gBAAiB;AAE7C,iBAAS,UAAU;AAAA,MAEpB;AAEA,aAAO;AAAA,IAER;AAAA,EAED;AAEA,WAAS,cAAe,OAAQ;AAE/B,QAAK,KAAK,YAAY,MAAQ;AAE9B,QAAK,KAAK,UAAU,WAAW,GAAI;AAElC,WAAK,WAAW,kBAAmB,MAAM,SAAS;AAElD,WAAK,WAAW,cAAc,iBAAkB,eAAe,KAAK,cAAc;AAClF,WAAK,WAAW,cAAc,iBAAkB,aAAa,KAAK,YAAY;AAAA,IAE/E;AAIA,QAAK,KAAK,mBAAoB,OAAU;AAIxC,SAAK,YAAa,KAAK;AAEvB,QAAK,MAAM,gBAAgB,SAAU;AAEpC,WAAK,cAAe,KAAK;AAAA,IAE1B,OAAO;AAEN,WAAK,aAAc,KAAK;AAAA,IAEzB;AAAA,EAED;AAEA,WAAS,cAAe,OAAQ;AAE/B,QAAK,KAAK,YAAY,MAAQ;AAE9B,QAAK,MAAM,gBAAgB,SAAU;AAEpC,WAAK,aAAc,KAAK;AAAA,IAEzB,OAAO;AAEN,WAAK,aAAc,KAAK;AAAA,IAEzB;AAAA,EAED;AAEA,WAAS,YAAa,OAAQ;AAE7B,SAAK,eAAgB,KAAK;AAE1B,YAAS,KAAK,UAAU,QAAM;AAAA,MAE7B,KAAK;AAEJ,aAAK,WAAW,sBAAuB,MAAM,SAAS;AAEtD,aAAK,WAAW,cAAc,oBAAqB,eAAe,KAAK,cAAc;AACrF,aAAK,WAAW,cAAc,oBAAqB,aAAa,KAAK,YAAY;AAEjF,aAAK,cAAe,SAAS;AAE7B,aAAK,QAAQ,OAAO;AAEpB;AAAA,MAED,KAAK;AAEJ,cAAM,YAAY,KAAK,UAAW,CAAC;AACnC,cAAM,WAAW,KAAK,kBAAmB,SAAS;AAGlD,aAAK,cAAe,EAAE,WAAsB,OAAO,SAAS,GAAG,OAAO,SAAS,EAAC,CAAE;AAElF;AAAA,IAEH;AAAA,EAEA;AAEA,WAAS,YAAa,OAAQ;AAE7B,QAAI;AAEJ,YAAS,MAAM,QAAM;AAAA,MAEpB,KAAK;AAEJ,sBAAc,KAAK,aAAa;AAChC;AAAA,MAED,KAAK;AAEJ,sBAAc,KAAK,aAAa;AAChC;AAAA,MAED,KAAK;AAEJ,sBAAc,KAAK,aAAa;AAChC;AAAA,MAED;AAEC,sBAAc;AAAA,IAEjB;AAEC,YAAS,aAAW;AAAA,MAEnB,KAAKJ,MAAAA,MAAM;AAEV,YAAK,KAAK,eAAe,MAAQ;AAEjC,aAAK,sBAAuB,KAAK;AAEjC,aAAK,QAAQ,OAAO;AAEpB;AAAA,MAED,KAAKA,MAAAA,MAAM;AAEV,YAAK,MAAM,WAAW,MAAM,WAAW,MAAM,UAAW;AAEvD,cAAK,KAAK,cAAc,MAAQ;AAEhC,eAAK,oBAAqB,KAAK;AAE/B,eAAK,QAAQ,OAAO;AAAA,QAErB,OAAO;AAEN,cAAK,KAAK,iBAAiB,MAAQ;AAEnC,eAAK,uBAAwB,KAAK;AAElC,eAAK,QAAQ,OAAO;AAAA,QAErB;AAEA;AAAA,MAED,KAAKA,MAAAA,MAAM;AAEV,YAAK,MAAM,WAAW,MAAM,WAAW,MAAM,UAAW;AAEvD,cAAK,KAAK,iBAAiB,MAAQ;AAEnC,eAAK,uBAAwB,KAAK;AAElC,eAAK,QAAQ,OAAO;AAAA,QAErB,OAAO;AAEN,cAAK,KAAK,cAAc,MAAQ;AAEhC,eAAK,oBAAqB,KAAK;AAE/B,eAAK,QAAQ,OAAO;AAAA,QAErB;AAEA;AAAA,MAED;AAEC,aAAK,QAAQ,OAAO;AAAA,IAEvB;AAEC,QAAK,KAAK,UAAU,OAAO,MAAO;AAEjC,WAAK,cAAe,WAAW;AAAA,IAEhC;AAAA,EAED;AAEA,WAAS,YAAa,OAAQ;AAE7B,YAAS,KAAK,OAAK;AAAA,MAElB,KAAK,OAAO;AAEX,YAAK,KAAK,iBAAiB,MAAQ;AAEnC,aAAK,uBAAwB,KAAK;AAElC;AAAA,MAED,KAAK,OAAO;AAEX,YAAK,KAAK,eAAe,MAAQ;AAEjC,aAAK,sBAAuB,KAAK;AAEjC;AAAA,MAED,KAAK,OAAO;AAEX,YAAK,KAAK,cAAc,MAAQ;AAEhC,aAAK,oBAAqB,KAAK;AAE/B;AAAA,IAEH;AAAA,EAEA;AAEA,WAAS,aAAc,OAAQ;AAE9B,QAAK,KAAK,YAAY,SAAS,KAAK,eAAe,SAAS,KAAK,UAAU,OAAO,KAAO;AAEzF,UAAM,eAAc;AAEpB,SAAK,cAAe,WAAW;AAE/B,SAAK,kBAAmB,KAAK,kBAAmB,KAAK,CAAE;AAEvD,SAAK,cAAe,SAAS;AAAA,EAE9B;AAEA,WAAS,UAAW,OAAQ;AAE3B,QAAK,KAAK,YAAY,MAAQ;AAE9B,SAAK,eAAgB,KAAK;AAAA,EAE3B;AAEA,WAAS,aAAc,OAAQ;AAE9B,SAAK,cAAe,KAAK;AAEzB,YAAS,KAAK,UAAU,QAAM;AAAA,MAE7B,KAAK;AAEJ,gBAAS,KAAK,QAAQ,KAAG;AAAA,UAExB,KAAKC,MAAAA,MAAM;AAEV,gBAAK,KAAK,iBAAiB,MAAQ;AAEnC,iBAAK,wBAAyB,KAAK;AAEnC,iBAAK,QAAQ,OAAO;AAEpB;AAAA,UAED,KAAKA,MAAAA,MAAM;AAEV,gBAAK,KAAK,cAAc,MAAQ;AAEhC,iBAAK,qBAAsB,KAAK;AAEhC,iBAAK,QAAQ,OAAO;AAEpB;AAAA,UAED;AAEC,iBAAK,QAAQ,OAAO;AAAA,QAEzB;AAEG;AAAA,MAED,KAAK;AAEJ,gBAAS,KAAK,QAAQ,KAAG;AAAA,UAExB,KAAKA,MAAAA,MAAM;AAEV,gBAAK,KAAK,eAAe,SAAS,KAAK,cAAc,MAAQ;AAE7D,iBAAK,0BAA2B,KAAK;AAErC,iBAAK,QAAQ,OAAO;AAEpB;AAAA,UAED,KAAKA,MAAAA,MAAM;AAEV,gBAAK,KAAK,eAAe,SAAS,KAAK,iBAAiB,MAAQ;AAEhE,iBAAK,6BAA8B,KAAK;AAExC,iBAAK,QAAQ,OAAO;AAEpB;AAAA,UAED;AAEC,iBAAK,QAAQ,OAAO;AAAA,QAEzB;AAEG;AAAA,MAED;AAEC,aAAK,QAAQ,OAAO;AAAA,IAEvB;AAEC,QAAK,KAAK,UAAU,OAAO,MAAO;AAEjC,WAAK,cAAe,WAAW;AAAA,IAEhC;AAAA,EAED;AAEA,WAAS,YAAa,OAAQ;AAE7B,SAAK,cAAe,KAAK;AAEzB,YAAS,KAAK,OAAK;AAAA,MAElB,KAAK,OAAO;AAEX,YAAK,KAAK,iBAAiB,MAAQ;AAEnC,aAAK,uBAAwB,KAAK;AAElC,aAAK,OAAM;AAEX;AAAA,MAED,KAAK,OAAO;AAEX,YAAK,KAAK,cAAc,MAAQ;AAEhC,aAAK,oBAAqB,KAAK;AAE/B,aAAK,OAAM;AAEX;AAAA,MAED,KAAK,OAAO;AAEX,YAAK,KAAK,eAAe,SAAS,KAAK,cAAc,MAAQ;AAE7D,aAAK,yBAA0B,KAAK;AAEpC,aAAK,OAAM;AAEX;AAAA,MAED,KAAK,OAAO;AAEX,YAAK,KAAK,eAAe,SAAS,KAAK,iBAAiB,MAAQ;AAEhE,aAAK,4BAA6B,KAAK;AAEvC,aAAK,OAAM;AAEX;AAAA,MAED;AAEC,aAAK,QAAQ,OAAO;AAAA,IAEvB;AAAA,EAEA;AAEA,WAAS,cAAe,OAAQ;AAE/B,QAAK,KAAK,YAAY,MAAQ;AAE9B,UAAM,eAAc;AAAA,EAErB;AAEA,WAAS,qBAAsB,OAAQ;AAEtC,QAAK,MAAM,QAAQ,WAAY;AAE9B,WAAK,iBAAiB;AAEtB,YAAMI,YAAW,KAAK,WAAW,YAAW;AAE5C,MAAAA,UAAS,iBAAkB,SAAS,KAAK,qBAAqB,EAAE,SAAS,MAAM,SAAS,MAAM;AAAA,IAE/F;AAAA,EAED;AAEA,WAAS,mBAAoB,OAAQ;AAEpC,QAAK,MAAM,QAAQ,WAAY;AAE9B,WAAK,iBAAiB;AAEtB,YAAMA,YAAW,KAAK,WAAW,YAAW;AAE5C,MAAAA,UAAS,oBAAqB,SAAS,KAAK,qBAAqB,EAAE,SAAS,MAAM,SAAS,MAAM;AAAA,IAElG;AAAA,EAED;AAAA,ECrzDA,MAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IASd,OAAO,aAAc,UAAU,cAAc,IAAK;AAEjD,YAAM,SAAS,SAAS,cAAe,QAAQ;AAE/C,eAAS,cAA0B;AAElC,YAAI,iBAAiB;AAErB,uBAAe,iBAAkB,SAAU;AAE1C,kBAAQ,iBAAkB,OAAO,cAAc;AAE/C,gBAAM,SAAS,GAAG,WAAY,OAAO;AACrC,iBAAO,cAAc;AAErB,2BAAiB;AAAA,QAElB;AAEA,iBAAS,iBAA4B;AAEpC,yBAAe,oBAAqB,OAAO,cAAc;AAEzD,iBAAO,cAAc;AAErB,2BAAiB;AAAA,QAElB;AAIA,eAAO,MAAM,UAAU;AAEvB,eAAO,MAAM,SAAS;AACtB,eAAO,MAAM,OAAO;AACpB,eAAO,MAAM,QAAQ;AAErB,eAAO,cAAc;AASrB,cAAM,iBAAiB;AAAA,UACtB,GAAG;AAAA,UACH,kBAAkB;AAAA,YACjB;AAAA,YACA;AAAA,YACA;AAAA,YACA,GAAK,YAAY,oBAAoB,CAAA;AAAA,UAC1C;AAAA,QACA;AAEG,eAAO,eAAe,WAAY;AAEjC,iBAAO,MAAM,UAAU;AAAA,QAExB;AAEA,eAAO,eAAe,WAAY;AAEjC,iBAAO,MAAM,UAAU;AAAA,QAExB;AAEA,eAAO,UAAU,WAAY;AAE5B,cAAK,mBAAmB,MAAO;AAE9B,sBAAU,GAAG,eAAgB,gBAAgB,cAAc,EAAG,KAAM,gBAAgB;AAAA,UAErF,OAAO;AAEN,2BAAe,IAAG;AAElB,gBAAK,UAAU,GAAG,iBAAiB,QAAY;AAE9C,wBAAU,GAAG,aAAc,gBAAgB,cAAc,EACvD,KAAM,gBAAgB,EACtB,MAAO,CAAE,QAAS;AAElB,wBAAQ,KAAM,GAAG;AAAA,cAElB,CAAC;AAAA,YAEH;AAAA,UAED;AAAA,QAED;AAEA,YAAK,UAAU,GAAG,iBAAiB,QAAY;AAE9C,oBAAU,GAAG,aAAc,gBAAgB,cAAc,EACvD,KAAM,gBAAgB,EACtB,MAAO,CAAE,QAAS;AAElB,oBAAQ,KAAM,GAAG;AAAA,UAElB,CAAC;AAAA,QAEH;AAAA,MAED;AAEA,eAAS,gBAAgB;AAExB,eAAO,MAAM,UAAU;AAEvB,eAAO,MAAM,SAAS;AACtB,eAAO,MAAM,OAAO;AACpB,eAAO,MAAM,QAAQ;AAErB,eAAO,eAAe;AACtB,eAAO,eAAe;AAEtB,eAAO,UAAU;AAAA,MAElB;AAEA,eAAS,oBAAoB;AAE5B,sBAAa;AAEb,eAAO,cAAc;AAAA,MAEtB;AAEA,eAAS,iBAAkB,WAAY;AAEtC,sBAAa;AAEb,gBAAQ,KAAM,uDAAuD,SAAS;AAE9E,eAAO,cAAc;AAAA,MAEtB;AAEA,eAAS,eAAgB,SAAU;AAElC,gBAAQ,MAAM,WAAW;AACzB,gBAAQ,MAAM,SAAS;AACvB,gBAAQ,MAAM,UAAU;AACxB,gBAAQ,MAAM,SAAS;AACvB,gBAAQ,MAAM,eAAe;AAC7B,gBAAQ,MAAM,aAAa;AAC3B,gBAAQ,MAAM,QAAQ;AACtB,gBAAQ,MAAM,OAAO;AACrB,gBAAQ,MAAM,YAAY;AAC1B,gBAAQ,MAAM,UAAU;AACxB,gBAAQ,MAAM,UAAU;AACxB,gBAAQ,MAAM,SAAS;AAAA,MAExB;AAEA,UAAK,QAAQ,WAAY;AAExB,eAAO,KAAK;AACZ,eAAO,MAAM,UAAU;AAEvB,uBAAgB,MAAM;AAEtB,kBAAU,GAAG,mBAAoB,cAAc,EAAG,KAAM,SAAW,WAAY;AAE9E,sBAAY,YAAW,IAAK,kBAAiB;AAE7C,cAAK,aAAa,SAAS,oBAAqB;AAE/C,mBAAO,MAAK;AAAA,UAEb;AAAA,QAED,CAAC,EAAG,MAAO,gBAAgB;AAE3B,eAAO;AAAA,MAER,OAAO;AAEN,cAAM,UAAU,SAAS,cAAe,GAAG;AAE3C,YAAK,OAAO,oBAAoB,OAAQ;AAEvC,kBAAQ,OAAO,SAAS,SAAS,KAAK,QAAS,UAAU,QAAQ;AACjE,kBAAQ,YAAY;AAAA,QAErB,OAAO;AAEN,kBAAQ,OAAO;AACf,kBAAQ,YAAY;AAAA,QAErB;AAEA,gBAAQ,MAAM,OAAO;AACrB,gBAAQ,MAAM,QAAQ;AACtB,gBAAQ,MAAM,iBAAiB;AAE/B,uBAAgB,OAAO;AAEvB,eAAO;AAAA,MAER;AAAA,IAED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,OAAO,iCAAiC;AAEvC,UAAK,OAAO,cAAc,eAAe,QAAQ,WAAY;AAI5D,YAAK,iBAAiB,KAAM,UAAU,SAAS,EAAK;AAEpD,kBAAU,GAAG,iBAAkB,kBAAkB,MAAM;AAEtD,mBAAS,qBAAqB;AAAA,QAE/B,CAAC;AAAA,MAEF;AAAA,IAED;AAAA,EAED;AASA,WAAS,qBAAqB;AAC9B,WAAS,+BAA8B;AAAA,ECrPvC,MAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IASd,OAAO,aAAc,UAAU,cAAc,IAAK;AAEjD,YAAM,SAAS,SAAS,cAAe,QAAQ;AAE/C,eAAS,YAAa,MAAO;AAE5B,YAAI,iBAAiB;AAErB,uBAAe,iBAAkB,SAAU;AAE1C,kBAAQ,iBAAkB,OAAO,cAAc;AAE/C,gBAAM,SAAS,GAAG,WAAY,OAAO;AAErC,iBAAO,cAAc;AAErB,2BAAiB;AAAA,QAElB;AAEA,iBAAS,iBAA4B;AAEpC,yBAAe,oBAAqB,OAAO,cAAc;AAEzD,iBAAO,cAAc;AAErB,2BAAiB;AAAA,QAElB;AAIA,eAAO,MAAM,UAAU;AAEvB,eAAO,MAAM,SAAS;AACtB,eAAO,MAAM,OAAO;AACpB,eAAO,MAAM,QAAQ;AAErB,eAAO,cAAc;AAErB,cAAM,iBAAiB;AAAA,UACtB,GAAG;AAAA,UACH,kBAAkB;AAAA,YACjB;AAAA,YACA;AAAA,YACA;AAAA,YACA,GAAK,YAAY,oBAAoB,CAAA;AAAA,UAC1C;AAAA,QACA;AAEG,eAAO,eAAe,WAAY;AAEjC,iBAAO,MAAM,UAAU;AAAA,QAExB;AAEA,eAAO,eAAe,WAAY;AAEjC,iBAAO,MAAM,UAAU;AAAA,QAExB;AAEA,eAAO,UAAU,WAAY;AAE5B,cAAK,mBAAmB,MAAO;AAE9B,sBAAU,GAAG,eAAgB,MAAM,cAAc,EAC/C,KAAM,gBAAgB;AAAA,UAEzB,OAAO;AAEN,2BAAe,IAAG;AAElB,gBAAK,UAAU,GAAG,iBAAiB,QAAY;AAE9C,wBAAU,GAAG,aAAc,MAAM,cAAc,EAC7C,KAAM,gBAAgB,EACtB,MAAO,CAAE,QAAS;AAElB,wBAAQ,KAAM,GAAG;AAAA,cAElB,CAAC;AAAA,YAEH;AAAA,UAED;AAAA,QAED;AAEA,YAAK,UAAU,GAAG,iBAAiB,QAAY;AAE9C,oBAAU,GAAG,aAAc,MAAM,cAAc,EAC7C,KAAM,gBAAgB,EACtB,MAAO,CAAE,QAAS;AAElB,oBAAQ,KAAM,GAAG;AAAA,UAElB,CAAC;AAAA,QAEH;AAAA,MAED;AAEA,eAAS,gBAAgB;AAExB,eAAO,MAAM,UAAU;AAEvB,eAAO,MAAM,SAAS;AACtB,eAAO,MAAM,OAAO;AACpB,eAAO,MAAM,QAAQ;AAErB,eAAO,eAAe;AACtB,eAAO,eAAe;AAEtB,eAAO,UAAU;AAAA,MAElB;AAEA,eAAS,qBAAqB;AAE7B,sBAAa;AAEb,eAAO,cAAc;AAAA,MAEtB;AAEA,eAAS,iBAAkB,WAAY;AAEtC,sBAAa;AAEb,gBAAQ,KAAM,uDAAuD,SAAS;AAE9E,eAAO,cAAc;AAAA,MAEtB;AAEA,eAAS,eAAgB,SAAU;AAElC,gBAAQ,MAAM,WAAW;AACzB,gBAAQ,MAAM,SAAS;AACvB,gBAAQ,MAAM,UAAU;AACxB,gBAAQ,MAAM,SAAS;AACvB,gBAAQ,MAAM,eAAe;AAC7B,gBAAQ,MAAM,aAAa;AAC3B,gBAAQ,MAAM,QAAQ;AACtB,gBAAQ,MAAM,OAAO;AACrB,gBAAQ,MAAM,YAAY;AAC1B,gBAAQ,MAAM,UAAU;AACxB,gBAAQ,MAAM,UAAU;AACxB,gBAAQ,MAAM,SAAS;AAAA,MAExB;AAEA,UAAK,QAAQ,WAAY;AAExB,eAAO,KAAK;AACZ,eAAO,MAAM,UAAU;AAEvB,uBAAgB,MAAM;AAEtB,kBAAU,GAAG,mBAAoB,cAAc,EAC7C,KAAM,SAAW,WAAY;AAE7B,cAAK,WAAY;AAEhB,wBAAa,cAAc;AAAA,UAE5B,OAAO;AAEN,sBAAU,GAAG,mBAAoB,cAAc,EAC7C,KAAM,SAAWC,YAAY;AAE7B,kBAAKA,YAAY;AAEhB,4BAAa,cAAc;AAAA,cAE5B,OAAO;AAEN,mCAAkB;AAAA,cAEnB;AAAA,YAED,CAAC,EAAG,MAAO,gBAAgB;AAAA,UAE7B;AAAA,QAED,CAAC,EAAG,MAAO,gBAAgB;AAE5B,eAAO;AAAA,MAER,OAAO;AAEN,cAAM,UAAU,SAAS,cAAe,GAAG;AAE3C,YAAK,OAAO,oBAAoB,OAAQ;AAEvC,kBAAQ,OAAO,SAAS,SAAS,KAAK,QAAS,UAAU,QAAQ;AACjE,kBAAQ,YAAY;AAAA,QAErB,OAAO;AAEN,kBAAQ,OAAO;AACf,kBAAQ,YAAY;AAAA,QAErB;AAEA,gBAAQ,MAAM,OAAO;AACrB,gBAAQ,MAAM,QAAQ;AACtB,gBAAQ,MAAM,iBAAiB;AAE/B,uBAAgB,OAAO;AAEvB,eAAO;AAAA,MAER;AAAA,IAED;AAAA,EAED;AAAA,ECnPA,MAAM,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAmBR,cAAc;AACV,WAAK,WAAW,CAAA;AAChB,WAAK,cAAc,CAAA;AACnB,WAAK,UAAU;AAAA,QACX,GAAG;AAAA,QACH,GAAG;AAAA,MACf;AAEQ,aAAO,iBAAiB,WAAW,CAAC,UAAU;AAE1C,aAAK,MAAM,MAAM,IAAI;AAAA,MACzB,CAAC;AAED,aAAO,iBAAiB,SAAS,CAAC,UAAU;AAExC,aAAK,IAAI,MAAM,IAAI;AAAA,MACvB,CAAC;AAED,aAAO,iBAAiB,eAAe,CAAC,UAAU;AAC9C,aAAK,QAAQ,IAAK,MAAM,UAAU,OAAO,aAAc,IAAI;AAC3D,aAAK,QAAQ,IAAK,CAAC,MAAM,UAAU,OAAO,cAAe,IAAI;AAAA,MACjE,CAAC;AAAA,IACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAWA,IAAI,QAAQ,YAAY;AACpB,WAAK,WAAW;AAChB,WAAK,SAAS,QAAS,YAAU;AAC7B,aAAK,YAAY,OAAO,IAAI,IAAI;AAAA,UAC5B,SAAS;AAAA,UACT,aAAa;AAAA,UACb,cAAc;AAAA,QAC9B;AAAA,MACQ,CAAC;AAAA,IACL;AAAA,IAEA,UAAU,YAAY;AAElB,aAAO,KAAK,YAAY,UAAU,EAAE;AAAA,IACxC;AAAA,IAEA,cAAc,YAAY;AACtB,UAAI,KAAK,YAAY,UAAU,EAAE,aAAa;AAC1C,aAAK,YAAY,UAAU,EAAE,cAAc;AAC3C,eAAO;AAAA,MACX;AACA,aAAO;AAAA,IACX;AAAA,IAEA,MAAM,KAAK;AACP,YAAM,SAAS,KAAK,SAAS,KAAM,CAAAC,YAAUA,QAAO,KAAK,SAAS,GAAG,CAAC;AACtE,UAAI,WAAW,QAAW;AAEtB,aAAK,YAAY,OAAO,IAAI,EAAE,UAAU;AACxC,YAAI,CAAC,KAAK,YAAY,OAAO,IAAI,EAAE,cAAc;AAC7C,eAAK,YAAY,OAAO,IAAI,EAAE,cAAc;AAC5C,eAAK,YAAY,OAAO,IAAI,EAAE,eAAe;AAAA,QACjD;AAAA,MACJ;AAAA,IACJ;AAAA,IAEA,IAAI,KAAK;AACL,YAAM,SAAS,KAAK,SAAS,KAAM,CAAAA,YAAUA,QAAO,KAAK,SAAS,GAAG,CAAC;AACtE,UAAI,WAAW,QAAW;AAEtB,aAAK,YAAY,OAAO,IAAI,EAAE,UAAU;AACxC,aAAK,YAAY,OAAO,IAAI,EAAE,cAAc;AAC5C,aAAK,YAAY,OAAO,IAAI,EAAE,eAAe;AAAA,MACjD;AAAA,IACJ;AAAA,EACJ;AAAA,EC9FA,MAAM,iBAAiBC,UAAAA,KAAK;AAAA,IACxB,YAAY,OAAO,QAAQ,YAAY,UAAU;AAC7C,YAAM;AAAA,QACF,OAAO;AAAA,QAAY,UAAU;AAAA,MACzC,CAAS;AACD,WAAK,QAAQ;AACb,WAAK,SAAS;AACd,WAAK,WAAW;AAEhB,WAAK,eAAe,KAAK,UAAU;AAAA,QAC/B,OAAO;AAAA,QAAa,UAAU;AAAA,MAC1C,CAAS;AAED;AACI,cAAM,iBAAiB,KAAK,aAAa,UAAU;AAAA,UAC/C,OAAO;AAAA,QACvB,CAAa;AAED,uBAAe,WAAW,KAAK,OAAO,UAAU,KAAK;AAAA,UACjD,UAAU;AAAA,UAAM,OAAO;AAAA,QACvC,CAAa;AAED,uBAAe,WAAW,KAAK,OAAO,UAAU,KAAK;AAAA,UACjD,UAAU;AAAA,UAAM,OAAO;AAAA,QACvC,CAAa;AAED,uBAAe,WAAW,KAAK,OAAO,UAAU,KAAK;AAAA,UACjD,UAAU;AAAA,UAAM,OAAO;AAAA,QACvC,CAAa;AAAA,MACL;AAEA;AACI,cAAM,eAAe,KAAK,aAAa,UAAU;AAAA,UAC7C,OAAO;AAAA,QACvB,CAAa;AAED,qBAAa,WAAW,WAAW,QAAQ,KAAK;AAAA,UAC5C,UAAU;AAAA,UAAM,OAAO;AAAA,QACvC,CAAa;AAED,qBAAa,WAAW,WAAW,QAAQ,KAAK;AAAA,UAC5C,UAAU;AAAA,UAAM,OAAO;AAAA,QACvC,CAAa;AAED,qBAAa,WAAW,WAAW,QAAQ,KAAK;AAAA,UAC5C,UAAU;AAAA,UAAM,OAAO;AAAA,QACvC,CAAa;AAAA,MACL;AAEA,WAAK,YAAY;AAAA,QACb,SAAS,SAAS,kBAAkB,UAChC,SAAS,mBAAmB,SAAS,QAAQ,kBAAkB,WAAW,WAAW;AAAA,MACrG;AACQ;AACI,cAAM,YAAY,KAAK,UAAU;AAAA,UAC7B,OAAO,qBAAqBC,MAAAA,QAAQ;AAAA,UAAK,UAAU;AAAA,QACnE,CAAa;AAED,kBAAU,WAAW,KAAK,WAAW,WAAW;AAAA,UAC5C,UAAU;AAAA,UAAM,OAAO;AAAA,QACvC,CAAa;AAAA,MACL;AAAA,IACJ;AAAA,IAEA,SAAS;AACL,WAAK,UAAU,UAAU,KAAK,SAAS,kBAAkB,UACrD,KAAK,SAAS,mBAAmB,KAAK,SAAS,QAAQ,kBAAkB,WAAW,WAAW;AAAA,IACvG;AAAA,EACJ;AAAA,ECrEO,MAAM,cAAc;AAAA,IACvB,YAAa,OAAO,SAAU;AAC1B,WAAK,QAAQ;AAIb,WAAK,cAAc,CAAA;AAAA,IACvB;AAAA,IAEA,OAAO,YAAY;AAAA,IAEnB,OAAO,KAAK,OAAO,SAAS;AACxB,UAAI,KAAK,cAAc,MAAM;AACzB,aAAK,YAAY,IAAI,cAAc,OAAO,OAAO;AAAA,MACrD;AAAA,IACJ;AAAA,IAEA,OAAO,cAAc;AACjB,UAAI,KAAK,cAAc,MAAM;AACzB,eAAO;AAAA,MACX;AACA,aAAO,KAAK;AAAA,IAChB;AAAA,IAEA,IAAK,QAAS;AAGV,aAAO,SAAS,QAAS,OAAK;AAE1B,YAAI,EAAE,YAAY;AACd,eAAK,MAAM,IAAI,CAAC;AAAA,QACpB,WACS,EAAE,cAAc,QAAW;AAChC,eAAK,YAAY,KAAK,CAAC;AAAA,QAC3B;AAAA,MACJ,CAAC;AAAA,IACL;AAAA,IAEA,OAAQ,QAAS;AAAA,IAEjB;AAAA,IAEA,SAAS;AAEL,WAAK,YAAY,QAAS,SAAO;AAE7B,YAAI,IAAI,cAAc,QAAW;AAE7B,cAAI,IAAI,UAAU,aAAa;AAE3B,gBAAI,KAAK,SAAS,KAAK,IAAI,UAAU,aAAa;AAClD,gBAAI,KAAK,WAAW,KAAK,IAAI,UAAU,UAAU;AAAA,UACrD;AAAA,QACJ;AAAA,MACJ,CAAC;AAAA,IACL;AAAA,EACJ;AAAA,EAEO,MAAM,OAAO;AAAA,IAChB,YAAa,MAAO;AAEhB,WAAK,OAAO;AACZ,WAAK,WAAW,CAAA;AAAA,IACpB;AAAA,IAEA,OAAO;AAAA,IAEP;AAAA,IAEA,IAAI,OAAO;AACP,WAAK,SAAS,KAAK,KAAK;AAAA,IAC5B;AAAA,IAEA,OAAO,OAAO;AACV,WAAK,WAAW,KAAK,SAAS,OAAQ,OAAK,MAAM,KAAK;AAAA,IAC1D;AAAA,EACJ;;EClDO,MAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMb,YAAY,cAAc,aAAa,IAAI;AAEvC,WAAK,SAAS;AACd,WAAK,QAAQ,KAAK,OAAO,kBAAkB;AAE3C,YAAM;AAAA,QACF,OAAO;AAAA,QACP,cAAc;AAAA,QACd,KAAK;AAAA,QACL,KAAK;AAAA,QACL,UAAU;AAAA,QACV,YAAY;AAAA,QACZ,gBAAgB,CAAA;AAAA,MAC5B,IAAY;AAEJ,WAAK,OAAO,SAAS,UAAU,KAAK,OAAO,SAAS;AACpD,WAAK,OAAO,GAAG,KAAK,IAAI,IAAI,cAAc,kBAAkB,EAAE;AAC9D,eAAS,QAAQ,KAAK;AAMtB,WAAK,WAAW;AAChB,UAAI,KAAK,OAAO;AACZ,aAAK,WAAW,IAAI,KAAK,OAAO,cAAc,aAAa;AAAA,MAC/D,OACK;AACD,aAAK,WAAW,IAAI,KAAK,OAAO,eAAe;AAAA,UAC3C;AAAA,QAChB,CAAa;AAAA,MACL;AACA,cAAQ,IAAI,eAAe,OAAO,MAAM,KAAK,QAAQ,UAAU,QAAQ,WAAW;AAElF,UAAI,KAAK,UAAU;AACf,aAAK,SAAS,QAAQ,OAAO,YAAY,OAAO,aAAa,KAAK;AAClE,aAAK,SAAS,cAAc,KAAK,IAAI,OAAO,kBAAkB,CAAC,CAAC;AAEhE,aAAK,SAAS,WAAW,MAAM,QAAQ;AACvC,aAAK,SAAS,WAAW,MAAM,SAAS;AACxC,iBAAS,KAAK,YAAa,KAAK,SAAS,UAAU;AACnD,cAAM,SAAS,KAAK,SAAS;AAE7B,YAAK,OAAO,WAAW,cAAc,QAAQ;AACzC,iBAAO,WAAW,MAAM,SAAS;AACjC,iBAAO,WAAW,MAAM,SAAS;AAAA,QACrC;AAAA,MACJ;AAMA,WAAK,QAAQ,IAAIC,iBAAM,MAAK;AAO5B,WAAK,SAAS,IAAIA,iBAAM,kBAAmB,IAAI,OAAO,aAAa,OAAO,aAAa,KAAK,GAAI;AAChG,WAAK,OAAO,SAAS,IAAI;AAmBzB,WAAK,SAAS,IAAI,MAAK;AAEvB,WAAK,cAAc;AACnB,WAAK,mBAAmB,CAAA;AACxB,UAAI,KAAK,aAAa;AAClB,aAAK,iBAAiB,kBAAkB,IAAI,cAAe,KAAK,QAAQ,KAAK,SAAS,UAAU;AAChG,aAAK,iBAAiB,gBAAgB,gBAAgB;AACtD,aAAK,WAAW,IAAI;AAAA,UAChB,KAAK;AAAA,UAAO,KAAK;AAAA,UACjB,KAAK,iBAAiB;AAAA,UACtB,KAAK;AAAA,QACrB;AAAA,MACQ;AAGA,UAAI,IAAI;AACJ,iBAAS,KAAK,YAAY,SAAS,aAAa,KAAK,QAAQ,CAAC;AAC9D,aAAK,SAAS,GAAG,UAAU;AAAA,MAC/B;AAEA,UAAI,IAAI;AACJ,iBAAS,KAAK,YAAY,SAAS,aAAa,KAAK,QAAQ,CAAC;AAC9D,aAAK,SAAS,GAAG,UAAU;AAAA,MAC/B;AAEA,WAAK,QAAQ;AACb,UAAI,SAAS;AACK,gBAAA,QAAA,EAAA,KAAA,MAAA,IAAA,EACT,KAAK,CAACC,WAAU;AACb,eAAK,QAAQ,IAAIA,OAAM,QAAS;AAAA,YAC5B,UAAU;AAAA,UAClC,CAAqB;AACD,mBAAS,KAAK,YAAY,KAAK,MAAM,GAAG;AACxC,eAAK,MAAM,KAAM,KAAK,QAAQ;AAAA,QAClC,CAAC;AAAA,MACT;AAIA,oBAAc,KAAM,KAAK,KAAK;AAC9B,WAAK,YAAY,cAAc,YAAW;AAE1C,WAAK,SAAS,IAAID,iBAAM,MAAK;AAC7B,WAAK,YAAY,KAAK,OAAO,eAAc;AAC3C,WAAK,eAAe;AAEpB,YAAM,aAAa,MAAM;AACrB,cAAM,OAAO,KAAK,OAAO,eAAc;AACvC,cAAM,YAAY,OAAO,KAAK;AAC9B,aAAK,YAAY;AAEjB,YAAI,KAAK,cAAc;AACnB,cAAI,KAAK,SAAU,MAAK,SAAS,OAAM;AACvC,eAAK,eAAe;AAAA,QACxB;AAEA,aAAK,SAAS,MAAM,SAAS;AAE7B,YAAI,aAAa;AACb,eAAK,iBAAiB,gBAAgB,OAAM;AAAA,QAChD;AACA,YAAI,KAAK,OAAO;AACZ,eAAK,MAAM,OAAM;AACjB,cAAI,CAAC,KAAK,OAAO;AACb,iBAAK,SAAS,uBAAwBA,iBAAM,eAAe,MAAM;AAAA,UACrE;AAAA,QACJ;AACA,aAAK,eAAe,MAAM,SAAS;AACnC,aAAK,SAAS,OAAQ,KAAK,OAAO,KAAK,MAAM;AAC7C,aAAK,cAAc,MAAM,SAAS;AAAA,MACtC;AAEA,WAAK,SAAS,iBAAkB,UAAU;AAE1C,WAAK,WAAW,CAAC,MAAM,cAAc;AAAA,MAErC;AACA,WAAK,iBAAiB,CAAC,MAAM,cAAc;AAAA,MAE3C;AACA,WAAK,gBAAgB,CAAC,MAAM,cAAc;AAAA,MAE1C;AAEA,aAAO,iBAAkB,UAAU,MAAM;AAErC,aAAK,OAAO,SAAS,KAAK,SAAS,WAAW,cAAc,KAAK,SAAS,WAAW;AACrF,aAAK,OAAO,uBAAsB;AAElC,aAAK,SAAS,QAAS,KAAK,SAAS,WAAW,aAAa,KAAK,SAAS,WAAW,cAAc,KAAK;AAAA,MAC7G,CAAC;AAAA,IACL;AAAA,IAEA,OAAO,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAQnB,OAAO,KAAK,cAAc,YAAY;AAClC,UAAI,KAAK,cAAc,MAAM;AACzB,aAAK,YAAY,IAAI,IAAI,cAAc,UAAU;AAAA,MACrD;AACA,aAAO,KAAK;AAAA,IAChB;AAAA,IACA,OAAO,cAAc;AACjB,UAAI,KAAK,cAAc,MAAM;AACzB,eAAO;AAAA,MACX;AACA,aAAO,KAAK;AAAA,IAChB;AAAA,EACJ;AAAA,ECnOA,MAAM,UAAU;AAAA,IACd,YAAY;AAAA,MACV,WAAW;AAAA,MACX,WAAW;AAAA,MACX,UAAU;AAAA,MACV,WAAW;AAAA,MACX,gBAAgB;AAAA,MAChB,kBAAkB;AAAA,MAClB,aAAa;AAAA,MACb,eAAe;AAAA,MACf,YAAY;AAAA,IAChB,IAAM,IAAI;AACN,WAAK,KAAK;AACV,WAAK,MAAM;AACX,WAAK,YAAY;AACjB,WAAK,aAAa;AAClB,WAAK,WAAW;AAChB,WAAK,cAAc;AACnB,WAAK,aAAa,CAAA;AAClB,WAAK,uBAAuB;AAC5B,WAAK,eAAe;AACpB,WAAK,cAAc;AACnB,WAAK,mBAAmB;AACxB,WAAK,iBAAiB,CAAA;AACtB,WAAK,sBAAsB;AAC3B,WAAK,gBAAgB;AACrB,WAAK,iBAAiB;AACtB,WAAK,aAAa,CAAA;AAClB,WAAK,cAAc;AACnB,WAAK,mBAAmB;AACxB,WAAK,mBAAmB;AACxB,WAAK,0BAA0B;AAC/B,WAAK,aAAa,EAAE,MAAM,CAAA,GAAI,OAAO,CAAA,EAAE;AACvC,WAAK,aAAa,EAAE,MAAM,CAAA,GAAI,OAAO,CAAA,EAAE;AACvC,WAAK,aAAa,EAAE,MAAM,CAAA,GAAI,OAAO,CAAA,EAAE;AACvC,WAAK,oBAAoB,EAAE,MAAM,CAAA,GAAI,OAAO,CAAA,EAAE;AAC9C,WAAK,WAAW;AAChB,WAAK,WAAW;AAChB,WAAK,UAAU;AACf,WAAK,WAAW;AAChB,WAAK,aAAa;AAClB,WAAK,eAAe;AACpB,WAAK,YAAY;AACjB,WAAK,gBAAgB;AACrB,WAAK,kBAAkB;AACvB,YAAM,MAAM,YAAY,IAAG;AAC3B,WAAK,gBAAgB;AACrB,WAAK,YAAY;AACjB,WAAK,eAAe;AACpB,WAAK,cAAc;AAAA,IACrB;AAAA,IACA,MAAM,KAAK,YAAY;AACrB,UAAI,CAAC,YAAY;AACf,gBAAQ,MAAM,6CAA6C;AAC3D;AAAA,MACF;AACA,UAAI,KAAK,oBAAoB,UAAU;AACrC;AACF,UAAI,MAAM,KAAK,qBAAqB,UAAU;AAC5C;AACF,UAAI,KAAK,mBAAmB,UAAU;AACpC;AACF,UAAI,KAAK,gBAAgB,UAAU,GAAG;AACpC,YAAI,KAAK,UAAU;AACjB,eAAK,sBAAqB;AAAA,QAC5B;AACA;AAAA,MACF,OAAO;AACL,gBAAQ,MAAM,8CAA8C;AAAA,MAC9D;AAAA,IACF;AAAA,IACA,mBAAmB,QAAQ;AACzB,UAAI;AACJ,UAAI,UAAU,OAAO,OAAO,yBAAyB,cAAc,OAAO,OAAO,mBAAmB,cAAc,OAAO,OAAO;AAC9H,aAAK,YAAY;AACjB,aAAK,eAAe;AACpB,YAAI,KAAK,cAAc,KAAK,OAAO,aAAa,OAAO,SAAS,GAAG,IAAI,iBAAiB,IAAI;AAC1F,eAAK,uBAAsB;AAC3B,eAAK,2BAA0B;AAAA,QACjC;AACA,eAAO;AAAA,MACT;AACA,aAAO;AAAA,IACT;AAAA,IACA,yBAAyB;AACvB,UAAI,CAAC,KAAK;AACR;AACF,WAAK,cAAc,KAAK,UAAU,eAAe;AAAA,QAC/C,MAAM;AAAA,QACN,OAAO;AAAA,MACb,CAAK;AACD,WAAK,mBAAmB,KAAK,UAAU,aAAa;AAAA,QAClD,MAAM;AAAA,QACN,OAAO,eAAe,gBAAgB,eAAe;AAAA,MAC3D,CAAK;AACD,eAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,aAAK,eAAe,KAAK,KAAK,UAAU,aAAa;AAAA,UACnD,MAAM;AAAA,UACN,OAAO,eAAe,WAAW,eAAe;AAAA,QACxD,CAAO,CAAC;AAAA,MACJ;AAAA,IACF;AAAA,IACA,oBAAoB,UAAU;AAC5B,UAAI,SAAS,mBAAmB,CAAC,KAAK,sBAAsB;AAC1D,aAAK,mBAAmB,QAAQ;AAChC,aAAK,KAAK,SAAS,WAAU;AAC7B,YAAI,KAAK,UAAU;AACjB,eAAK,sBAAqB;AAAA,QAC5B;AACA,eAAO;AAAA,MACT;AACA,aAAO;AAAA,IACT;AAAA,IACA,MAAM,qBAAqB,UAAU;AACnC,UAAI;AACJ,UAAI,SAAS,kBAAkB;AAC7B,aAAK,WAAW;AAChB,YAAI,KAAK,YAAY,KAAK,UAAU;AAClC,mBAAS,QAAQ,iBAAiB;AAClC,cAAI,CAAC,SAAS,cAAc;AAC1B,kBAAM,SAAS,KAAI;AAAA,UACrB;AACA,cAAI,SAAS,WAAW,iBAAiB,GAAG;AAC1C,iBAAK,2BAA0B;AAAA,UACjC;AAAA,QACF;AACA,aAAK,OAAO,SAAS;AACrB,aAAK,aAAa,SAAS;AAC3B,aAAK,cAAc,KAAK,SAAS,YAAY,OAAO,SAAS,GAAG,WAAW;AAC3E,aAAK,iBAAiB,QAAQ;AAC9B,eAAO;AAAA,MACT;AACA,aAAO;AAAA,IACT;AAAA,IACA,6BAA6B;AAAA,IAC7B;AAAA,IACA,gBAAgB,YAAY;AAC1B,UAAI,sBAAsB,wBAAwB;AAChD,aAAK,KAAK;AAAA,MACZ,WAAW,sBAAsB,qBAAqB,sBAAsB,iBAAiB;AAC3F,aAAK,KAAK,WAAW,WAAW,QAAQ;AACxC,YAAI,CAAC,KAAK,IAAI;AACZ,kBAAQ,MAAM,yCAAyC;AACvD,iBAAO;AAAA,QACT;AAAA,MACF,OAAO;AACL,gBAAQ;AAAA,UACN;AAAA,QACR;AACM,eAAO;AAAA,MACT;AACA,aAAO;AAAA,IACT;AAAA,IACA,wBAAwB;AACtB,UAAI,KAAK,IAAI;AACX,aAAK,MAAM,KAAK,GAAG,aAAa,iCAAiC;AACjE,YAAI,KAAK,KAAK;AACZ,eAAK,yBAAwB;AAAA,QAC/B;AAAA,MACF;AAAA,IACF;AAAA,IACA,2BAA2B;AAAA,IAC3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMA,qBAAqB;AACnB,UAAI,CAAC,KAAK,gBAAgB,CAAC,KAAK;AAC9B,eAAO;AACT,aAAO;AAAA,QACL,UAAU,KAAK;AAAA,QACf,2BAA2B;AAAA,QAC3B,qBAAqB;AAAA,MAC3B;AAAA,IACE;AAAA,IACA,MAAM,SAAS;AACb,WAAK,eAAe,aAAa;AACjC,UAAI,KAAK,cAAc;AACrB;AAAA,MACF;AACA,UAAI,CAAC,KAAK,MAAM,CAAC,KAAK;AACpB;AACF,UAAI,KAAK,aAAa;AACpB,aAAK,GAAG,SAAS,KAAK,IAAI,gBAAgB;AAAA,MAC5C;AACA,WAAK,cAAc,KAAK,GAAG,YAAW;AACtC,UAAI,KAAK,aAAa;AACpB,aAAK,GAAG,WAAW,KAAK,IAAI,kBAAkB,KAAK,WAAW;AAAA,MAChE;AAAA,IACF;AAAA,IACA,IAAI,SAAS;AACX,WAAK;AACL,UAAI,KAAK,gBAAgB,WAAW,KAAK,eAAe,KAAK,oBAAoB,KAAK,eAAe,SAAS,GAAG;AAC/G,aAAK;AACL,cAAM,cAAc,KAAK,eAAe,KAAK,mBAAmB;AAChE,YAAI,YAAY,aAAa,YAAY;AACvC,kBAAQ,gBAAgB,KAAK,aAAa,GAAG,GAAG,KAAK,kBAAkB,CAAC;AACxE,kBAAQ,mBAAmB,KAAK,kBAAkB,GAAG,aAAa,GAAG,EAAE;AAAA,QACzE;AACA,aAAK,aAAa,eAAe,gBAAgB,cAAc;AAC/D;AAAA,MACF;AACA,UAAI,KAAK,MAAM,KAAK,OAAO,KAAK,aAAa;AAC3C,aAAK,GAAG,SAAS,KAAK,IAAI,gBAAgB;AAC1C,aAAK,WAAW,KAAK,EAAE,OAAO,KAAK,aAAa;AAChD,aAAK,cAAc;AAAA,MACrB;AACA,WAAK,aAAa,eAAe,gBAAgB,cAAc;AAAA,IACjE;AAAA;AAAA;AAAA;AAAA;AAAA,IAKA,MAAM,yBAAyB;AAC7B,UAAI,CAAC,KAAK,gBAAgB,KAAK,eAAe,WAAW,GAAG;AAC1D,eAAO,KAAK;AAAA,MACd;AACA,UAAI,KAAK,gBAAgB;AACvB,eAAO,KAAK;AAAA,MACd;AACA,YAAM,mBAAmB,KAAK,sBAAsB,KAAK;AACzD,YAAM,aAAa,KAAK,eAAe,eAAe;AACtD,WAAK,uBAAuB,KAAK,sBAAsB,KAAK;AAC5D,UAAI,KAAK,gBAAgB,GAAG;AAC1B,eAAO,KAAK;AAAA,MACd;AACA,UAAI,WAAW,aAAa,YAAY;AACtC,eAAO,KAAK;AAAA,MACd;AACA,WAAK,iBAAiB,KAAK,mBAAmB,UAAU;AACxD,UAAI;AACF,cAAM,SAAS,MAAM,KAAK;AAC1B,eAAO;AAAA,MACT,UAAC;AACC,aAAK,iBAAiB;AAAA,MACxB;AAAA,IACF;AAAA,IACA,MAAM,mBAAmB,YAAY;AACnC,UAAI;AACF,cAAM,WAAW,SAAS,WAAW,IAAI;AACzC,cAAM,OAAO,IAAI,cAAc,WAAW,eAAc,CAAE;AAC1D,cAAM,YAAY,KAAK,CAAC;AACxB,cAAM,UAAU,KAAK,CAAC;AACtB,mBAAW,MAAK;AAChB,cAAM,aAAa,OAAO,UAAU,SAAS;AAC7C,aAAK,mBAAmB,aAAa;AACrC,eAAO,KAAK;AAAA,MACd,SAAS,GAAG;AACV,eAAO,KAAK;AAAA,MACd;AAAA,IACF;AAAA,IACA,oBAAoB;AAClB,UAAI,CAAC,KAAK,MAAM,CAAC,KAAK;AACpB;AACF,WAAK,mBAAmB;AACxB,eAAS,IAAI,KAAK,WAAW,SAAS,GAAG,KAAK,GAAG,KAAK;AACpD,cAAM,YAAY,KAAK,WAAW,CAAC;AACnC,cAAM,YAAY,KAAK,GAAG,kBAAkB,UAAU,OAAO,KAAK,GAAG,sBAAsB;AAC3F,cAAM,WAAW,KAAK,GAAG,aAAa,KAAK,IAAI,gBAAgB;AAC/D,YAAI,aAAa,CAAC,UAAU;AAC1B,gBAAM,UAAU,KAAK,GAAG,kBAAkB,UAAU,OAAO,KAAK,GAAG,YAAY;AAC/E,gBAAM,WAAW,UAAU;AAC3B,eAAK,oBAAoB;AACzB,eAAK,GAAG,YAAY,UAAU,KAAK;AACnC,eAAK,WAAW,OAAO,GAAG,CAAC;AAAA,QAC7B;AAAA,MACF;AAAA,IACF;AAAA,IACA,0BAA0B;AACxB,WAAK,mBAAmB,KAAK,KAAK,OAAO;AACzC,WAAK,0BAA0B,KAAK,KAAK,QAAQ;AAAA,IACnD;AAAA,IACA,eAAe,QAAQ;AACrB,UAAI,OAAO,gBAAgB,aAAa;AACtC,YAAI;AACF,sBAAY,WAAW,MAAM;AAC7B,sBAAY,KAAK,MAAM;AAAA,QACzB,SAAS,OAAO;AACd,kBAAQ,MAAM,sCAAsC,KAAK;AAAA,QAC3D;AAAA,MACF;AAAA,IACF;AAAA,IACA,aAAa,aAAa,WAAW,aAAa;AAChD,UAAI,OAAO,gBAAgB,eAAe,CAAC,aAAa,CAAC;AACvD;AACF,UAAI;AACF,cAAM,UAAU,YAAY,iBAAiB,aAAa,MAAM;AAChE,YAAI,QAAQ,WAAW,GAAG;AACxB,eAAK,eAAe,WAAW;AAAA,QACjC;AACA,oBAAY,WAAW,SAAS;AAChC,oBAAY,KAAK,SAAS;AAC1B,oBAAY,cAAc,WAAW;AACrC,cAAM,aAAa,YAAY,QAAQ,aAAa,aAAa,SAAS;AAC1E,aAAK,oBAAoB,WAAW;AACpC,oBAAY,WAAW,WAAW;AAClC,oBAAY,WAAW,SAAS;AAChC,oBAAY,cAAc,WAAW;AAAA,MACvC,SAAS,OAAO;AACd,gBAAQ,MAAM,0CAA0C,KAAK;AAAA,MAC/D;AAAA,IACF;AAAA,IACA,eAAe;AACb,YAAM,cAAc,YAAY,IAAG;AACnC,WAAK,WAAW,KAAK,WAAW;AAChC,aAAO,KAAK,WAAW,SAAS,KAAK,KAAK,WAAW,CAAC,KAAK,cAAc,KAAK;AAC5E,aAAK,WAAW,MAAK;AAAA,MACvB;AACA,aAAO,KAAK,MAAM,KAAK,WAAW,MAAM;AAAA,IAC1C;AAAA,IACA,iBAAiB;AACf,WAAK,aAAa,KAAK,kBAAkB,KAAK,UAAU;AACxD,WAAK,aAAa,KAAK,kBAAkB,KAAK,UAAU;AACxD,UAAI,KAAK,QAAQ,KAAK,4BAA4B,QAAQ;AACxD,aAAK,aAAa,KAAK,yBAAyB,KAAK,iBAAiB;AAAA,MACxE;AAAA,IACF;AAAA,IACA,aAAa,OAAO,cAAc;AAChC,mBAAa,KAAK,KAAK,KAAK;AAC5B,aAAO,aAAa,KAAK,SAAS,KAAK,YAAY;AACjD,qBAAa,KAAK,MAAK;AAAA,MACzB;AACA,mBAAa,MAAM,KAAK,KAAK;AAC7B,aAAO,aAAa,MAAM,SAAS,KAAK,cAAc;AACpD,qBAAa,MAAM,MAAK;AAAA,MAC1B;AAAA,IACF;AAAA,IACA,gBAAgB;AACd,WAAK,cAAc;AACnB,WAAK,mBAAmB;AACxB,WAAK,YAAY,YAAY,IAAG;AAAA,IAClC;AAAA,IACA,UAAU;AACR,YAAM,UAAU,KAAK,WAAW;AAChC,YAAM,UAAU,KAAK,WAAW;AAChC,YAAM,UAAU,KAAK,WAAW;AAChC,YAAM,iBAAiB,KAAK,kBAAkB;AAC9C,aAAO;AAAA,QACL,KAAK,QAAQ,SAAS,IAAI,QAAQ,QAAQ,SAAS,CAAC,IAAI;AAAA,QACxD,KAAK,QAAQ,SAAS,IAAI,QAAQ,QAAQ,SAAS,CAAC,IAAI;AAAA,QACxD,KAAK,QAAQ,SAAS,IAAI,QAAQ,QAAQ,SAAS,CAAC,IAAI;AAAA,QACxD,YAAY,eAAe,SAAS,IAAI,eAAe,eAAe,SAAS,CAAC,IAAI;AAAA,MAC1F;AAAA,IACE;AAAA,IACA,iBAAiB,UAAU;AACzB,YAAM,wBAAwB,SAAS,KAAK;AAC5C,YAAM,gBAAgB;AACtB,eAAS,KAAK,QAAQ,WAAW;AAC/B,sBAAc,eAAe,aAAa;AAC1C,8BAAsB,KAAK,IAAI;AAAA,MACjC;AAAA,IACF;AAAA,IACA,mBAAmB,UAAU;AAC3B,YAAM,uBAAuB,SAAS;AACtC,YAAM,gBAAgB;AACtB,eAAS,SAAS,SAAS,OAAO,QAAQ;AACxC,sBAAc,MAAK;AACnB,6BAAqB,KAAK,MAAM,OAAO,MAAM;AAC7C,sBAAc,IAAG;AAAA,MACnB;AACA,WAAK,uBAAuB;AAAA,IAC9B;AAAA;AAAA;AAAA;AAAA,IAIA,UAAU;AACR,UAAI,KAAK,IAAI;AACX,YAAI,KAAK,eAAe,KAAK,KAAK;AAChC,cAAI;AACF,iBAAK,GAAG,SAAS,KAAK,IAAI,gBAAgB;AAAA,UAC5C,SAAS,GAAG;AAAA,UACZ;AACA,eAAK,GAAG,YAAY,KAAK,WAAW;AACpC,eAAK,cAAc;AAAA,QACrB;AACA,mBAAW,aAAa,KAAK,YAAY;AACvC,eAAK,GAAG,YAAY,UAAU,KAAK;AAAA,QACrC;AACA,aAAK,WAAW,SAAS;AAAA,MAC3B;AACA,UAAI,KAAK,aAAa;AACpB,aAAK,YAAY,QAAO;AACxB,aAAK,cAAc;AAAA,MACrB;AACA,UAAI,KAAK,kBAAkB;AACzB,aAAK,iBAAiB,QAAO;AAC7B,aAAK,mBAAmB;AAAA,MAC1B;AACA,iBAAW,UAAU,KAAK,gBAAgB;AACxC,YAAI,OAAO,aAAa,UAAU;AAChC,iBAAO,MAAK;AAAA,QACd;AACA,eAAO,QAAO;AAAA,MAChB;AACA,WAAK,eAAe,SAAS;AAC7B,WAAK,gBAAgB;AACrB,WAAK,iBAAiB;AACtB,WAAK,eAAe;AACpB,WAAK,KAAK;AACV,WAAK,MAAM;AACX,WAAK,OAAO;AACZ,WAAK,YAAY;AACjB,WAAK,aAAa;AAClB,WAAK,WAAW;AAChB,WAAK,WAAW,SAAS;AACzB,WAAK,WAAW,KAAK,SAAS;AAC9B,WAAK,WAAW,MAAM,SAAS;AAC/B,WAAK,WAAW,KAAK,SAAS;AAC9B,WAAK,WAAW,MAAM,SAAS;AAC/B,WAAK,WAAW,KAAK,SAAS;AAC9B,WAAK,WAAW,MAAM,SAAS;AAC/B,WAAK,kBAAkB,KAAK,SAAS;AACrC,WAAK,kBAAkB,MAAM,SAAS;AAAA,IACxC;AAAA,EACF;AAAA,EChaA,MAAM,MAAM;AAAA,IACV,YAAY,MAAM,IAAI,IAAI;AACxB,WAAK,KAAK;AACV,WAAK,OAAO;AACZ,WAAK,KAAK;AACV,WAAK,KAAK;AACV,WAAK,WAAW;AAChB,WAAK,KAAK,KAAK,MAAM,OAAO,WAAW,cAAc,OAAO,oBAAoB,IAAI,CAAC;AACrF,WAAK,QAAQ,KAAK,KAAK;AACvB,WAAK,SAAS,KAAK,KAAK;AACxB,WAAK,SAAS,IAAI,KAAK;AACvB,WAAK,SAAS,IAAI,KAAK;AACvB,WAAK,UAAU,IAAI,KAAK;AACxB,WAAK,UAAU,KAAK,KAAK;AACzB,WAAK,cAAc,KAAK,KAAK;AAC7B,WAAK,eAAe,KAAK,KAAK;AAC9B,WAAK,SAAS,OAAO,aAAa,cAAc,SAAS,cAAc,QAAQ,IAAI,IAAI,gBAAgB,KAAK,OAAO,KAAK,MAAM;AAC9H,WAAK,OAAO,QAAQ,KAAK;AACzB,WAAK,OAAO,SAAS,KAAK;AAC1B,WAAK,OAAO,MAAM,QAAQ;AAC1B,WAAK,OAAO,MAAM,SAAS;AAC3B,WAAK,OAAO,MAAM,WAAW;AAC7B,WAAK,OAAO,MAAM,UAAU;AAC5B,WAAK,UAAU,KAAK,OAAO,WAAW,IAAI;AAC1C,WAAK,iBAAgB;AAAA,IACvB;AAAA,IACA,iBAAiB;AACf,UAAI,CAAC,KAAK;AACR,cAAM,IAAI,MAAM,YAAY;AAC9B,YAAM,WAAW,KAAK,QAAQ;AAAA,QAC5B;AAAA,QACA,KAAK;AAAA,QACL;AAAA,QACA,KAAK,UAAU,KAAK;AAAA,MAC1B;AACI,UAAI;AACJ,YAAM,WAAW,KAAK;AACtB,cAAQ,KAAK,GAAG,YAAW,GAAE;AAAA,QAC3B,KAAK;AACH,uBAAa;AACb;AAAA,QACF,KAAK;AACH,uBAAa;AACb;AAAA,QACF,KAAK;AACH,uBAAa;AACb;AAAA,QACF,KAAK;AACH,uBAAa;AACb;AAAA,QACF;AACE,uBAAa,KAAK;AAClB;AAAA,MACR;AACI,eAAS,aAAa,GAAG,UAAU;AACnC,eAAS,aAAa,GAAG,QAAQ;AACjC,aAAO;AAAA,IACT;AAAA,IACA,mBAAmB;AACjB,UAAI,CAAC,KAAK;AACR;AACF,WAAK,QAAQ,wBAAwB;AACrC,WAAK,QAAQ,OAAO,UAAU,IAAI,KAAK,KAAK;AAC5C,WAAK,QAAQ,eAAe;AAC5B,WAAK,WAAW,KAAK,eAAc;AACnC,WAAK,QAAQ,YAAY,KAAK;AAC9B,WAAK,QAAQ,SAAS,GAAG,GAAG,KAAK,OAAO,KAAK,MAAM;AACnD,WAAK,QAAQ,YAAY,KAAK;AAC9B,WAAK,QAAQ,SAAS,KAAK,MAAM,KAAK,QAAQ,KAAK,MAAM;AACzD,WAAK,QAAQ,YAAY,KAAK;AAC9B,WAAK,QAAQ,cAAc;AAC3B,WAAK,QAAQ,SAAS,KAAK,SAAS,KAAK,SAAS,KAAK,aAAa,KAAK,YAAY;AAAA,IACvF;AAAA;AAAA,IAEA,OAAO,OAAO,UAAU,WAAW,GAAG,SAAS,IAAI;AACjD,UAAI,CAAC,KAAK,WAAW,CAAC,KAAK;AACzB;AACF,YAAM,MAAM,KAAK,IAAI,UAAU,KAAK;AACpC,YAAM,MAAM,KAAK,IAAI,UAAU,KAAK;AACpC,WAAK,QAAQ,cAAc;AAC3B,WAAK,QAAQ,YAAY,KAAK;AAC9B,WAAK,QAAQ,SAAS,GAAG,GAAG,KAAK,OAAO,KAAK,OAAO;AACpD,YAAM,eAAe,GAAG,MAAM,QAAQ,QAAQ,CAAC,IAAI,KAAK,IAAI;AAC5D,WAAK,QAAQ,YAAY,KAAK;AAC9B,WAAK,QAAQ,SAAS,cAAc,KAAK,QAAQ,KAAK,MAAM;AAC5D,UAAI,QAAQ,KAAK,SAAS,KAAK,QAAQ,YAAY,YAAY,EAAE;AACjE,UAAI,QAAQ;AACV,aAAK,QAAQ,YAAY;AACzB,aAAK,QAAQ,SAAS,QAAQ,OAAO,KAAK,MAAM;AAChD,iBAAS,KAAK,QAAQ,YAAY,MAAM,EAAE;AAAA,MAC5C;AACA,WAAK,QAAQ,YAAY,KAAK;AAC9B,WAAK,QAAQ;AAAA,QACX,KAAK,IAAI,QAAQ,QAAQ,CAAC,IAAI,WAAW,IAAI,QAAQ,QAAQ,CAAC,CAAC;AAAA,QAC/D;AAAA,QACA,KAAK;AAAA,MACX;AAAA,IACE;AAAA;AAAA,IAEA,YAAY,YAAY,UAAU;AAChC,UAAI,CAAC,KAAK,WAAW,CAAC,KAAK;AACzB;AACF,UAAI,eAAe,KAAK,aAAa,GAAG;AACtC,mBAAW;AAAA,MACb;AACA,iBAAW,KAAK,IAAI,UAAU,YAAY,GAAG;AAC7C,mBAAa,KAAK,IAAI,YAAY,CAAC;AACnC,YAAM,SAAS,KAAK,MAAM,KAAK,OAAO;AACtC,YAAM,SAAS,KAAK,MAAM,KAAK,OAAO;AACtC,YAAM,aAAa,KAAK,MAAM,KAAK,WAAW;AAC9C,YAAM,cAAc,KAAK,MAAM,KAAK,YAAY;AAChD,YAAM,KAAK,KAAK,MAAM,KAAK,EAAE;AAC7B,WAAK,QAAQ;AAAA,QACX,KAAK;AAAA,QACL,SAAS;AAAA,QACT;AAAA,QACA,aAAa;AAAA,QACb;AAAA,QACA;AAAA,QACA;AAAA,QACA,aAAa;AAAA,QACb;AAAA,MACN;AACI,WAAK,QAAQ,YAAY,KAAK;AAC9B,WAAK,QAAQ;AAAA,QACX,SAAS,aAAa;AAAA,QACtB;AAAA,QACA;AAAA,QACA;AAAA,MACN;AACI,YAAM,eAAe,KAAK;AAAA,QACxB;AAAA,QACA,KAAK,MAAM,aAAa,WAAW,WAAW;AAAA,MACpD;AACI,UAAI,eAAe,GAAG;AACpB,aAAK,QAAQ,cAAc;AAC3B,aAAK,QAAQ,YAAY,KAAK;AAC9B,aAAK,QAAQ;AAAA,UACX,SAAS,aAAa;AAAA,UACtB,UAAU,cAAc;AAAA,UACxB;AAAA,UACA;AAAA,QACR;AAAA,MACI;AACA,WAAK,QAAQ,cAAc;AAAA,IAC7B;AAAA,EACF;AAAA,ECjJA,MAAM,mBAAmB,MAAM;AAAA,IAC7B,YAAY,MAAM,IAAI,IAAI;AACxB,YAAM,MAAM,IAAI,EAAE;AAClB,WAAK,aAAa;AAClB,WAAK,eAAe,IAAI,KAAK;AAC7B,WAAK,SAAS,KAAK;AACnB,WAAK,QAAQ,KAAK,KAAK;AACvB,WAAK,SAAS,IAAI,KAAK;AACvB,WAAK,OAAO,SAAS,KAAK;AAC1B,WAAK,OAAO,QAAQ,KAAK;AACzB,WAAK,OAAO,MAAM,SAAS;AAC3B,WAAK,OAAO,MAAM,QAAQ;AAC1B,WAAK,OAAO,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAS5B,WAAK,iBAAgB;AAAA,IACvB;AAAA,IACA,mBAAmB;AACjB,UAAI,CAAC,KAAK;AACR;AACF,WAAK,QAAQ,wBAAwB;AACrC,WAAK,QAAQ,OAAO,UAAU,IAAI,KAAK,KAAK;AAC5C,WAAK,QAAQ,eAAe;AAC5B,WAAK,QAAQ,cAAc;AAAA,IAC7B;AAAA;AAAA,IAEA,OAAO,OAAO,WAAW,YAAY,GAAG;AACtC,UAAI,CAAC,KAAK;AACR;AACF,WAAK,aAAa;AAClB,WAAK,QAAQ,UAAU,GAAG,GAAG,KAAK,OAAO,KAAK,MAAM;AACpD,WAAK,QAAQ,cAAc;AAC3B,WAAK,QAAQ,YAAY,KAAK;AAC9B,WAAK,QAAQ;AAAA,QACX,GAAG,MAAM,QAAQ,CAAC,CAAC;AAAA,QACnB,KAAK;AAAA,QACL,KAAK;AAAA,MACX;AAAA,IACE;AAAA;AAAA,IAEA,YAAY,aAAa,WAAW;AAClC;AAAA,IACF;AAAA;AAAA,IAEA,UAAU,GAAG,GAAG;AACd,WAAK,OAAO,MAAM,YAAY,aAAa,CAAC,OAAO,CAAC;AAAA,IACtD;AAAA,EACF;AAAA,ECrDA,MAAM,qBAAqB,MAAM;AAAA;AAAA,IAE/B,YAAY,MAAM;AAChB,YAAM,MAAM,QAAQ,MAAM;AAC1B,WAAK,gBAAgB;AACrB,WAAK,eAAe;AACpB,WAAK,iBAAgB;AAAA,IACvB;AAAA,IACA,mBAAmB;AACjB,UAAI,CAAC,KAAK;AACR;AACF,WAAK,QAAQ,wBAAwB;AACrC,WAAK,QAAQ,OAAO,UAAU,IAAI,KAAK,KAAK;AAC5C,WAAK,QAAQ,eAAe;AAC5B,WAAK,QAAQ,YAAY;AACzB,WAAK,QAAQ,SAAS,GAAG,GAAG,KAAK,OAAO,KAAK,MAAM;AACnD,WAAK,iBAAgB;AAAA,IACvB;AAAA,IACA,mBAAmB;AACjB,UAAI,CAAC,KAAK;AACR;AACF,WAAK,QAAQ,YAAY;AACzB,WAAK,QAAQ,SAAS,GAAG,GAAG,KAAK,OAAO,KAAK,OAAO;AACpD,WAAK,QAAQ,YAAY,KAAK;AAC9B,WAAK,QAAQ,SAAS,KAAK,MAAM,KAAK,QAAQ,KAAK,MAAM;AAAA,IAC3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMA,cAAc,OAAO,QAAQ;AAC3B,WAAK,eAAe,QAAQ;AAAA,IAC9B;AAAA,IACA,cAAc,QAAQ;AACpB,UAAI,CAAC,KAAK;AACR;AACF,UAAI,KAAK,eAAe;AACtB,aAAK,cAAc,MAAK;AAAA,MAC1B;AACA,WAAK,gBAAgB;AACrB,WAAK,QAAQ,YAAY;AACzB,WAAK,QAAQ,SAAS,GAAG,GAAG,KAAK,OAAO,KAAK,MAAM;AACnD,YAAM,cAAc,KAAK,QAAQ,KAAK;AACtC,UAAI;AACJ,UAAI;AACJ,UAAI;AACJ,UAAI;AACJ,UAAI,KAAK,eAAe,aAAa;AACnC,oBAAY,KAAK;AACjB,qBAAa,KAAK,QAAQ,KAAK;AAC/B,gBAAQ;AACR,iBAAS,KAAK,SAAS,cAAc;AAAA,MACvC,OAAO;AACL,qBAAa,KAAK;AAClB,oBAAY,KAAK,SAAS,KAAK;AAC/B,iBAAS,KAAK,QAAQ,aAAa;AACnC,gBAAQ;AAAA,MACV;AACA,WAAK,QAAQ;AAAA,QACX;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACN;AACI,WAAK,iBAAgB;AAAA,IACvB;AAAA,IACA,SAAS,OAAO;AACd,WAAK,OAAO;AACZ,WAAK,iBAAgB;AAAA,IACvB;AAAA;AAAA,IAEA,OAAO,QAAQ,WAAW,YAAY,GAAG,UAAU,IAAI;AAAA,IACvD;AAAA;AAAA,IAEA,YAAY,aAAa,WAAW;AAAA,IACpC;AAAA;AAAA;AAAA;AAAA,IAIA,UAAU;AACR,UAAI,KAAK,eAAe;AACtB,aAAK,cAAc,MAAK;AACxB,aAAK,gBAAgB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;ACxFA,QAAM,wBAAwB;AAC9B,QAAM,yBAAyB;AAAA,EAC/B,MAAM,oBAAoB;AAAA,IACxB,YAAY,IAAI,QAAQ,uBAAuB,SAAS,wBAAwB;AAC9E,WAAK,aAAa;AAClB,WAAK,iBAAiB;AACtB,WAAK,KAAK;AACV,WAAK,eAAe;AACpB,WAAK,gBAAgB;AACrB,WAAK,SAAS,IAAI,WAAW,QAAQ,SAAS,CAAC;AAC/C,WAAK,gBAAgB,IAAI,WAAW,QAAQ,SAAS,CAAC;AACtD,WAAK,cAAa;AAAA,IACpB;AAAA;AAAA;AAAA;AAAA,IAIA,OAAO,OAAO,QAAQ;AACpB,UAAI,UAAU,KAAK,gBAAgB,WAAW,KAAK;AACjD;AACF,WAAK,eAAe;AACpB,WAAK,gBAAgB;AACrB,WAAK,SAAS,IAAI,WAAW,QAAQ,SAAS,CAAC;AAC/C,WAAK,gBAAgB,IAAI,WAAW,QAAQ,SAAS,CAAC;AACtD,WAAK,QAAO;AACZ,WAAK,cAAa;AAAA,IACpB;AAAA,IACA,gBAAgB;AACd,YAAM,KAAK,KAAK;AAChB,WAAK,iBAAiB,GAAG,cAAa;AACtC,SAAG,YAAY,GAAG,YAAY,KAAK,cAAc;AACjD,SAAG,WAAW,GAAG,YAAY,GAAG,GAAG,OAAO,KAAK,cAAc,KAAK,eAAe,GAAG,GAAG,MAAM,GAAG,eAAe,IAAI;AACnH,SAAG,cAAc,GAAG,YAAY,GAAG,oBAAoB,GAAG,MAAM;AAChE,SAAG,cAAc,GAAG,YAAY,GAAG,oBAAoB,GAAG,MAAM;AAChE,SAAG,cAAc,GAAG,YAAY,GAAG,gBAAgB,GAAG,aAAa;AACnE,SAAG,cAAc,GAAG,YAAY,GAAG,gBAAgB,GAAG,aAAa;AACnE,WAAK,aAAa,GAAG,kBAAiB;AACtC,SAAG,gBAAgB,GAAG,aAAa,KAAK,UAAU;AAClD,SAAG,qBAAqB,GAAG,aAAa,GAAG,mBAAmB,GAAG,YAAY,KAAK,gBAAgB,CAAC;AACnG,SAAG,gBAAgB,GAAG,aAAa,IAAI;AACvC,SAAG,YAAY,GAAG,YAAY,IAAI;AAAA,IACpC;AAAA,IACA,MAAM,QAAQ,QAAQ,aAAa,cAAc,YAAY,WAAW;AACtE,YAAM,KAAK,KAAK;AAChB,YAAM,cAAc,GAAG,aAAa,GAAG,wBAAwB;AAC/D,YAAM,cAAc,GAAG,aAAa,GAAG,wBAAwB;AAC/D,SAAG,gBAAgB,GAAG,kBAAkB,MAAM;AAC9C,SAAG,gBAAgB,GAAG,kBAAkB,KAAK,UAAU;AACvD,SAAG;AAAA,QACD;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK;AAAA,QACL,KAAK;AAAA,QACL,GAAG;AAAA,QACH,GAAG;AAAA,MACT;AACI,SAAG,gBAAgB,GAAG,kBAAkB,KAAK,UAAU;AACvD,SAAG,WAAW,GAAG,GAAG,KAAK,cAAc,KAAK,eAAe,GAAG,MAAM,GAAG,eAAe,KAAK,MAAM;AACjG,SAAG,gBAAgB,GAAG,kBAAkB,WAAW;AACnD,SAAG,gBAAgB,GAAG,kBAAkB,WAAW;AACnD,YAAM,UAAU,KAAK,MAAM,KAAK,QAAQ,KAAK,cAAc,KAAK,aAAa;AAC7E,YAAM,YAAY,IAAI,UAAU,IAAI,kBAAkB,OAAO,GAAG,KAAK,cAAc,KAAK,aAAa;AACrG,aAAO,kBAAkB,SAAS;AAAA,IACpC;AAAA,IACA,MAAM,QAAQ,OAAO,QAAQ;AAC3B,YAAM,UAAU,QAAQ;AACxB,eAAS,IAAI,GAAG,IAAI,QAAQ,KAAK;AAC/B,cAAM,YAAY,IAAI;AACtB,cAAM,aAAa,SAAS,IAAI,KAAK;AACrC,aAAK,cAAc,IAAI,OAAO,SAAS,WAAW,YAAY,OAAO,GAAG,SAAS;AAAA,MACnF;AACA,aAAO,KAAK;AAAA,IACd;AAAA,IACA,aAAa,WAAW;AAAA,IACxB;AAAA,IACA,UAAU;AACR,YAAM,KAAK,KAAK;AAChB,UAAI,KAAK,YAAY;AACnB,WAAG,kBAAkB,KAAK,UAAU;AACpC,aAAK,aAAa;AAAA,MACpB;AACA,UAAI,KAAK,gBAAgB;AACvB,WAAG,cAAc,KAAK,cAAc;AACpC,aAAK,iBAAiB;AAAA,MACxB;AAAA,IACF;AAAA,EACF;AAAA,EACA,MAAM,qBAAqB;AAAA,IACzB,YAAY,QAAQ,QAAQ,uBAAuB,SAAS,wBAAwB;AAClF,WAAK,iBAAiB;AACtB,WAAK,gBAAgB;AACrB,WAAK,eAAe;AACpB,WAAK,UAAU;AACf,WAAK,kBAAkB;AACvB,WAAK,cAAc;AACnB,WAAK,SAAS;AACd,WAAK,eAAe;AACpB,WAAK,gBAAgB;AACrB,WAAK,eAAe,IAAI,kBAAkB,QAAQ,SAAS,CAAC;AAAA,IAC9D;AAAA;AAAA;AAAA;AAAA,IAIA,OAAO,OAAO,QAAQ;AACpB,UAAI,UAAU,KAAK,gBAAgB,WAAW,KAAK;AACjD;AACF,WAAK,eAAe;AACpB,WAAK,gBAAgB;AACrB,WAAK,eAAe,IAAI,kBAAkB,QAAQ,SAAS,CAAC;AAC5D,UAAI,KAAK;AACP,aAAK,eAAe,QAAO;AAC7B,UAAI,KAAK;AACP,aAAK,cAAc,QAAO;AAC5B,WAAK,iBAAiB;AACtB,WAAK,gBAAgB;AACrB,UAAI,KAAK,aAAa;AACpB,aAAK,oBAAmB;AAAA,MAC1B;AAAA,IACF;AAAA,IACA,sBAAsB;AACpB,YAAM,SAAS,KAAK;AACpB,WAAK,iBAAiB,OAAO,cAAc;AAAA,QACzC,MAAM,EAAE,OAAO,KAAK,cAAc,QAAQ,KAAK,cAAa;AAAA,QAC5D,QAAQ;AAAA,QACR,OAAO,gBAAgB,oBAAoB,gBAAgB;AAAA,MACjE,CAAK;AACD,YAAM,cAAc,KAAK,KAAK,KAAK,eAAe,IAAI,GAAG,IAAI;AAC7D,WAAK,gBAAgB,OAAO,aAAa;AAAA,QACvC,MAAM,cAAc,KAAK;AAAA,QACzB,OAAO,eAAe,WAAW,eAAe;AAAA,MACtD,CAAK;AAAA,IACH;AAAA,IACA,MAAM,gBAAgB;AACpB,UAAI,KAAK;AACP;AACF,YAAM,SAAS,KAAK;AACpB,WAAK,oBAAmB;AACxB,WAAK,UAAU,OAAO,cAAc;AAAA,QAClC,WAAW;AAAA,QACX,WAAW;AAAA,MACjB,CAAK;AACD,YAAM,eAAe,OAAO,mBAAmB;AAAA,QAC7C,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAiCZ,CAAK;AACD,WAAK,kBAAkB,OAAO,sBAAsB;AAAA,QAClD,SAAS;AAAA,UACP,EAAE,SAAS,GAAG,YAAY,eAAe,UAAU,SAAS,EAAE,MAAM,cAAa;AAAA,UACjF,EAAE,SAAS,GAAG,YAAY,eAAe,UAAU,SAAS,EAAE,YAAY,QAAO,EAAE;AAAA,QAC3F;AAAA,MACA,CAAK;AACD,WAAK,eAAe,OAAO,qBAAqB;AAAA,QAC9C,QAAQ,OAAO,qBAAqB,EAAE,kBAAkB,CAAC,KAAK,eAAe,GAAG;AAAA,QAChF,QAAQ;AAAA,UACN,QAAQ;AAAA,UACR,YAAY;AAAA,QACpB;AAAA,QACM,UAAU;AAAA,UACR,QAAQ;AAAA,UACR,YAAY;AAAA,UACZ,SAAS,CAAC,EAAE,QAAQ,aAAY,CAAE;AAAA,QAC1C;AAAA,QACM,WAAW,EAAE,UAAU,gBAAe;AAAA,MAC5C,CAAK;AACD,WAAK,cAAc;AAAA,IACrB;AAAA,IACA,MAAM,QAAQ,QAAQ;AACpB,YAAM,KAAK,cAAa;AACxB,UAAI,CAAC,KAAK,kBAAkB,CAAC,KAAK,iBAAiB,CAAC,KAAK,gBAAgB,CAAC,KAAK,WAAW,CAAC,KAAK,iBAAiB;AAC/G,eAAO;AAAA,MACT;AACA,YAAM,SAAS,KAAK;AACpB,YAAM,YAAY,OAAO,gBAAgB;AAAA,QACvC,QAAQ,KAAK;AAAA,QACb,SAAS;AAAA,UACP,EAAE,SAAS,GAAG,UAAU,KAAK,QAAO;AAAA,UACpC,EAAE,SAAS,GAAG,UAAU,OAAO,WAAU,EAAE;AAAA,QACnD;AAAA,MACA,CAAK;AACD,YAAM,iBAAiB,OAAO,qBAAoB;AAClD,YAAM,aAAa,eAAe,gBAAgB;AAAA,QAChD,kBAAkB,CAAC;AAAA,UACjB,MAAM,KAAK,eAAe,WAAU;AAAA,UACpC,QAAQ;AAAA,UACR,SAAS;AAAA,UACT,YAAY,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAC;AAAA,QAC5C,CAAO;AAAA,MACP,CAAK;AACD,iBAAW,YAAY,KAAK,YAAY;AACxC,iBAAW,aAAa,GAAG,SAAS;AACpC,iBAAW,KAAK,CAAC;AACjB,iBAAW,IAAG;AACd,YAAM,cAAc,KAAK,KAAK,KAAK,eAAe,IAAI,GAAG,IAAI;AAC7D,qBAAe;AAAA,QACb,EAAE,SAAS,KAAK,eAAc;AAAA,QAC9B,EAAE,QAAQ,KAAK,eAAe,YAAW;AAAA,QACzC,EAAE,OAAO,KAAK,cAAc,QAAQ,KAAK,cAAa;AAAA,MAC5D;AACI,aAAO,MAAM,OAAO,CAAC,eAAe,OAAM,CAAE,CAAC;AAC7C,YAAM,KAAK,cAAc,SAAS,WAAW,IAAI;AACjD,YAAM,OAAO,IAAI,WAAW,KAAK,cAAc,eAAc,CAAE;AAC/D,eAAS,IAAI,GAAG,IAAI,KAAK,eAAe,KAAK;AAC3C,cAAM,YAAY,IAAI;AACtB,cAAM,YAAY,IAAI,KAAK,eAAe;AAC1C,aAAK,aAAa,IAAI,KAAK,SAAS,WAAW,YAAY,KAAK,eAAe,CAAC,GAAG,SAAS;AAAA,MAC9F;AACA,WAAK,cAAc,MAAK;AACxB,YAAM,YAAY,IAAI,UAAU,IAAI,kBAAkB,KAAK,YAAY,GAAG,KAAK,cAAc,KAAK,aAAa;AAC/G,aAAO,kBAAkB,SAAS;AAAA,IACpC;AAAA,IACA,UAAU;AACR,UAAI,KAAK;AACP,aAAK,eAAe,QAAO;AAC7B,UAAI,KAAK;AACP,aAAK,cAAc,QAAO;AAC5B,WAAK,iBAAiB;AACtB,WAAK,gBAAgB;AACrB,WAAK,eAAe;AACpB,WAAK,UAAU;AACf,WAAK,kBAAkB;AACvB,WAAK,cAAc;AAAA,IACrB;AAAA,EACF;AACA,WAAS,mBAAmB,QAAQ,IAAI;AACtC,QAAI,OAAO,uBAAuB,OAAO,oBAAoB;AAC3D,aAAO;AAAA,QACL,aAAa,OAAO;AAAA,QACpB,OAAO,OAAO,SAAS;AAAA,QACvB,QAAQ,OAAO,UAAU;AAAA,MAC/B;AAAA,IACE;AACA,WAAO;AAAA,EACT;AACA,WAAS,oBAAoB,QAAQ,SAAS;AAC5C,QAAI,OAAO,kBAAkB,OAAO,WAAW,QAAQ,KAAK;AAC1D,YAAM,cAAc,QAAQ,IAAI,OAAO,OAAO;AAC9C,cAAQ,eAAe,OAAO,SAAS,YAAY,YAAY;AAAA,IACjE;AACA,WAAO;AAAA,EACT;AC1QA,QAAM,SAAS,MAAM,gBAAgB,UAAU;AAAA,IAC7C,YAAY;AAAA,MACV,WAAW;AAAA,MACX,WAAW;AAAA,MACX,UAAU;AAAA,MACV,WAAW;AAAA,MACX,gBAAgB;AAAA,MAChB,kBAAkB;AAAA,MAClB,aAAa;AAAA,MACb,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,aAAa;AAAA,MACb,OAAO;AAAA,IACX,IAAM,IAAI;AACN,YAAM;AAAA,QACJ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACN,CAAK;AACD,WAAK,WAAW;AAChB,WAAK,UAAU;AACf,WAAK,WAAW;AAChB,WAAK,kBAAkB;AACvB,WAAK,aAAa;AAClB,WAAK,iBAAiB;AACtB,WAAK,gBAAgC,oBAAI,IAAG;AAC5C,WAAK,kBAAkB;AACvB,WAAK,sBAAsB;AAC3B,WAAK,uBAAuB;AAC5B,WAAK,sBAAsC,oBAAI,IAAG;AAClD,WAAK,uBAAuC,oBAAI,IAAG;AACnD,WAAK,sBAAsB;AAC3B,WAAK,uBAAuB;AAC5B,WAAK,oBAAoB;AACzB,WAAK,qBAAqB;AAC1B,WAAK,uBAAuB;AAC5B,WAAK,gBAAgB;AACrB,WAAK,UAAU,CAAA;AACf,WAAK,UAAU,CAAA;AACf,WAAK,YAAY,CAAA;AACjB,WAAK,cAAc;AAAA,QACjB,EAAE,aAAa,IAAI,WAAW,MAAK;AAAA,QACnC,EAAE,aAAa,IAAI,WAAW,MAAK;AAAA,QACnC,EAAE,aAAa,IAAI,WAAW,MAAK;AAAA,QACnC,EAAE,aAAa,KAAK,WAAW,KAAI;AAAA,QACnC,EAAE,aAAa,KAAK,WAAW,KAAI;AAAA,QACnC,EAAE,aAAa,KAAK,WAAW,KAAI;AAAA,QACnC,EAAE,aAAa,KAAK,WAAW,KAAI;AAAA,MACzC;AACI,WAAK,gBAAgB;AACrB,WAAK,mBAAmB,CAAA;AACxB,WAAK,eAAe;AACpB,WAAK,kBAAkB;AACvB,WAAK,gBAAgB;AACrB,WAAK,eAAe;AACpB,WAAK,qBAAqB;AAC1B,WAAK,WAAW;AAChB,WAAK,mBAAmB,EAAE,MAAM,CAAA,GAAI,OAAO,CAAA,EAAE;AAC7C,WAAK,cAAc,CAAC,UAAU;AAC5B,cAAM,eAAc;AACpB,aAAK,UAAU,EAAE,KAAK,OAAO,KAAK,IAAI,SAAS,MAAM;AAAA,MACvD;AACA,WAAK,eAAe,MAAM;AACxB,YAAI,KAAK;AACP,eAAK,YAAY,KAAK,QAAQ;AAChC,YAAI,KAAK;AACP,eAAK,YAAY,KAAK,OAAO;AAC/B,YAAI,KAAK;AACP,eAAK,YAAY,KAAK,cAAc;AACtC,YAAI,KAAK;AACP,eAAK,YAAY,KAAK,QAAQ;AAChC,YAAI,KAAK;AACP,eAAK,YAAY,KAAK,eAAe;AAAA,MACzC;AACA,WAAK,OAAO;AACZ,WAAK,aAAa;AAClB,WAAK,UAAU;AACf,WAAK,MAAM,SAAS,cAAc,KAAK;AACvC,WAAK,cAAa;AAClB,WAAK,WAAW;AAChB,UAAI,KAAK,UAAU;AACjB,aAAK,WAAW,KAAK,SAAS,IAAI,QAAQ,MAAM,OAAO,QAAQ,MAAM,CAAC;AACtE,aAAK,UAAU,KAAK,SAAS,IAAI,QAAQ,MAAM,OAAO,QAAQ,MAAM,CAAC;AAAA,MACvE;AACA,UAAI,KAAK,UAAU;AACjB,aAAK,WAAW,KAAK,SAAS,IAAI,QAAQ,MAAM,OAAO,QAAQ,MAAM,CAAC;AAAA,MACxE;AACA,UAAI,KAAK,UAAU;AACjB,aAAK,kBAAkB,KAAK,SAAS,IAAI,QAAQ,MAAM,OAAO,WAAW,SAAS,CAAC;AAAA,MACrF;AACA,UAAI,KAAK,YAAY,MAAM;AACzB,aAAK,aAAa,IAAI,WAAW,IAAI,QAAQ,MAAM;AACnD,aAAK,IAAI,YAAY,KAAK,WAAW,MAAM;AAC3C,aAAK,WAAW,UAAU,IAAI,EAAE;AAAA,MAClC;AACA,WAAK,oBAAmB;AAAA,IAC1B;AAAA,IACA,gBAAgB;AACd,WAAK,IAAI,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMrB,KAAK,UAAU,qBAAqB,EAAE;AAAA;AAAA,IAE5C;AAAA,IACA,sBAAsB;AACpB,UAAI,KAAK,SAAS;AAChB,aAAK,IAAI,iBAAiB,SAAS,KAAK,WAAW;AACnD,aAAK,UAAU,KAAK,IAAI;AAAA,MAC1B,OAAO;AACL,eAAO,iBAAiB,UAAU,KAAK,YAAY;AAAA,MACrD;AAAA,IACF;AAAA;AAAA;AAAA;AAAA,IAIA,iCAAiC;AAC/B,UAAI,IAAI;AACR,UAAI,CAAC,KAAK;AACR;AACF,YAAM,kBAAkB,KAAK,KAAK,SAAS,eAAe,OAAO,SAAS,GAAG,UAAU;AACvF,YAAM,mBAAmB,KAAK,KAAK,SAAS,eAAe,OAAO,SAAS,GAAG,WAAW;AACzF,UAAI,kBAAkB,KAAK,qBAAqB,mBAAmB,KAAK,oBAAoB;AAC1F;AAAA,MACF;AACA,UAAI,kBAAkB,KAAK,mBAAmB;AAC5C;AACF,WAAK,oBAAoB;AACzB,WAAK,qBAAqB;AAC1B,YAAM,eAAe,gBAAgB;AACrC,YAAM,cAAc,wBAAwB;AAC5C,UAAI;AACJ,UAAI;AACJ,UAAI,eAAe,aAAa;AAC9B,mBAAW;AACX,oBAAY,KAAK,MAAM,wBAAwB,YAAY;AAAA,MAC7D,OAAO;AACL,oBAAY;AACZ,mBAAW,KAAK,MAAM,yBAAyB,YAAY;AAAA,MAC7D;AACA,iBAAW,KAAK,IAAI,UAAU,EAAE;AAChC,kBAAY,KAAK,IAAI,WAAW,EAAE;AAClC,UAAI,aAAa,KAAK,uBAAuB,cAAc,KAAK,sBAAsB;AACpF,aAAK,sBAAsB;AAC3B,aAAK,uBAAuB;AAC5B,YAAI,KAAK,qBAAqB;AAC5B,eAAK,oBAAoB,OAAO,UAAU,SAAS;AAAA,QACrD;AACA,YAAI,KAAK,sBAAsB;AAC7B,eAAK,qBAAqB,OAAO,UAAU,SAAS;AAAA,QACtD;AACA,mBAAW,SAAS,KAAK,cAAc,OAAM,GAAI;AAC/C,gBAAM,cAAc,eAAe,cAAc;AAAA,QACnD;AAAA,MACF;AAAA,IACF;AAAA,IACA,6BAA6B;AAAA,IAC7B;AAAA,IACA,2BAA2B;AAAA,IAC3B;AAAA,IACA,QAAQ,MAAM;AACZ,WAAK,eAAe;AACpB,WAAK,qBAAqB;AAC1B,UAAI,CAAC,KAAK,YAAY,KAAK,SAAS;AAClC,aAAK,WAAW;AAChB,aAAK,iBAAiB,IAAI,QAAQ,MAAM,OAAO,QAAQ,MAAM;AAC7D,cAAM,iBAAiB,KAAK,QAAQ,KAAK;AACzC,aAAK,eAAe,KAAK;AACzB,YAAI,KAAK,YAAY,KAAK,SAAS,MAAM,gBAAgB;AACvD,eAAK,SAAS;AACd,eAAK,YAAY,KAAK,QAAQ;AAAA,QAChC;AACA,YAAI,KAAK,mBAAmB,KAAK,gBAAgB,MAAM,gBAAgB;AACrE,eAAK,gBAAgB;AACrB,eAAK,YAAY,KAAK,eAAe;AAAA,QACvC;AACA,cAAM,WAAW,KAAK,QAAQ;AAC9B,YAAI,SAAS,aAAa;AACxB,eAAK,IAAI,aAAa,KAAK,eAAe,QAAQ,SAAS,WAAW;AAAA,QACxE,OAAO;AACL,eAAK,IAAI,YAAY,KAAK,eAAe,MAAM;AAAA,QACjD;AACA,aAAK,YAAY,KAAK,cAAc;AACpC,aAAK;AAAA,MACP;AAAA,IACF;AAAA,IACA,SAAS;AACP,UAAI,KAAK,cAAc;AACrB,aAAK,uBAAsB;AAAA,MAC7B,OAAO;AACL,aAAK,uBAAsB;AAAA,MAC7B;AAAA,IACF;AAAA,IACA,yBAAyB;AACvB,YAAM,OAAO,KAAK;AAClB,WAAK,aAAa,eAAe,gBAAgB,cAAc;AAC/D,WAAK,aAAa,KAAK,kBAAkB,KAAK,UAAU;AACxD,WAAK,mBAAmB;AACxB,UAAI,KAAK,oBAAoB;AAC3B,aAAK,aAAa,KAAK,KAAK,KAAK,gBAAgB;AACjD,aAAK,aAAa,KAAK,KAAK,KAAK,UAAU;AAC3C,aAAK,aAAa,KAAK,KAAK,KAAK,UAAU;AAC3C,aAAK,aAAa,KAAK,YAAY,KAAK,iBAAiB;AACzD,aAAK,qBAAqB;AAAA,MAC5B;AACA,WAAK,aAAY;AAAA,IACnB;AAAA,IACA,yBAAyB;AACvB,WAAK,aAAa,eAAe,gBAAgB,cAAc;AAC/D,UAAI,KAAK,cAAc;AACrB,aAAK,uBAAsB;AAAA,MAC7B,WAAW,CAAC,KAAK,MAAM;AACrB,aAAK,kBAAiB;AAAA,MACxB,OAAO;AACL,aAAK,wBAAuB;AAAA,MAC9B;AACA,WAAK,eAAc;AACnB,WAAK,cAAa;AAClB,WAAK,aAAY;AAAA,IACnB;AAAA,IACA,eAAe;AACb,UAAI;AACJ,YAAM,cAAc,YAAY,IAAG;AACnC,UAAI,CAAC,KAAK,UAAU;AAClB,aAAK,WAAW,KAAK,WAAW;AAChC,eAAO,KAAK,WAAW,SAAS,KAAK,KAAK,WAAW,CAAC,KAAK,cAAc,KAAK;AAC5E,eAAK,WAAW,MAAK;AAAA,QACvB;AACA,cAAM,MAAM,KAAK,MAAM,KAAK,WAAW,MAAM;AAC7C,aAAK,aAAa,KAAK,KAAK,UAAU;AAAA,MACxC;AACA,YAAM,mBAAmB,eAAe,KAAK,eAAe,MAAM,KAAK;AACvE,YAAM,oBAAoB,eAAe,KAAK,gBAAgB,MAAM,KAAK;AACzE,YAAM,SAAS,KAAK,WAAW,OAAO;AACtC,WAAK,sBAAsB,KAAK,UAAU,KAAK,YAAY,GAAG,kBAAkB,mBAAmB,MAAM;AACzG,WAAK,sBAAsB,KAAK,SAAS,KAAK,YAAY,KAAK,WAAW,kBAAkB,mBAAmB,EAAE;AACjH,UAAI,KAAK,kBAAkB,KAAK,UAAU;AACxC,aAAK,sBAAsB,KAAK,gBAAgB,KAAK,kBAAkB,KAAK,WAAW,kBAAkB,mBAAmB,IAAI;AAAA,MAClI;AACA,UAAI,KAAK,UAAU;AACjB,aAAK,sBAAsB,KAAK,UAAU,KAAK,YAAY,KAAK,WAAW,kBAAkB,mBAAmB,MAAM;AAAA,MACxH;AACA,UAAI,KAAK,YAAY,KAAK,iBAAiB;AACzC,aAAK,sBAAsB,KAAK,iBAAiB,KAAK,mBAAmB,KAAK,WAAW,kBAAkB,mBAAmB,MAAM;AAAA,MACtI;AACA,UAAI,kBAAkB;AACpB,aAAK,eAAe;AAAA,MACtB;AACA,UAAI,mBAAmB;AACrB,aAAK,gBAAgB;AACrB,YAAI,KAAK,cAAc,OAAO,KAAK,CAAC,KAAK,sBAAsB;AAC7D,eAAK,uBAAuB;AAC5B,eAAK,sBAAsB,QAAQ,MAAM;AACvC,iBAAK,uBAAuB;AAAA,UAC9B,CAAC;AAAA,QACH;AACA,aAAK,oBAAmB;AAAA,MAC1B;AACA,UAAI,KAAK,eAAe,MAAM;AAC5B,aAAK,YAAY,WAAW;AAC5B,cAAM,eAAe,KAAK,KAAK,kBAAkB,OAAO,SAAS,GAAG,gBAAgB;AACpF,YAAI,oBAAoB,aAAa,GAAG;AACtC,eAAK,WAAW,OAAO,YAAY,UAAU;AAAA,QAC/C;AAAA,MACF;AAAA,IACF;AAAA,IACA,gBAAgB;AACd,WAAK,cAAc;AACnB,WAAK,mBAAmB;AACxB,WAAK,YAAY,YAAY,IAAG;AAAA,IAClC;AAAA,IACA,YAAY,OAAO;AACjB,YAAM,OAAO,MAAM,WAAW;AAC9B,UAAI,KAAK,SAAS;AAChB,cAAM,OAAO,MAAM,UAAU;AAAA,MAC/B,OAAO;AACL,cAAM,OAAO,MAAM,UAAU;AAC7B,YAAI,KAAK,YAAY;AACnB,gBAAM,OAAO,MAAM,MAAM;AACzB,gBAAM,OAAO,MAAM,OAAO,MAAM,KAAK,MAAM,QAAQ,MAAM,KAAK;AAAA,QAChE,OAAO;AACL,gBAAM,OAAO,MAAM,OAAO;AAC1B,gBAAM,OAAO,MAAM,MAAM,MAAM,KAAK,MAAM,SAAS,MAAM,KAAK;AAAA,QAChE;AAAA,MACF;AAAA,IACF;AAAA,IACA,SAAS,OAAO;AACd,UAAI,MAAM,QAAQ;AAChB,aAAK,IAAI,YAAY,MAAM,MAAM;AACjC,cAAM,KAAK,KAAK;AAChB,aAAK,YAAY,KAAK;AACtB,aAAK;AAAA,MACP;AACA,aAAO;AAAA,IACT;AAAA,IACA,UAAU,IAAI;AACZ,eAAS,IAAI,GAAG,IAAI,KAAK,IAAI,SAAS,QAAQ,KAAK;AACjD,cAAM,QAAQ,KAAK,IAAI,SAAS,CAAC;AACjC,cAAM,MAAM,UAAU,MAAM,KAAK,UAAU;AAAA,MAC7C;AACA,WAAK,OAAO;AAAA,IACd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IASA,gBAAgB,MAAM;AACpB,UAAI,CAAC,KAAK,iBAAiB;AACzB,aAAK,kBAAkB,SAAS,cAAc,KAAK;AACnD,aAAK,gBAAgB,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOrC,aAAK,IAAI,YAAY,KAAK,eAAe;AAAA,MAC3C;AACA,YAAM,QAAQ,IAAI,aAAa,IAAI;AACnC,YAAM,OAAO,MAAM,WAAW;AAC9B,YAAM,OAAO,MAAM,OAAO;AAC1B,YAAM,OAAO,MAAM,MAAM;AACzB,WAAK,gBAAgB,YAAY,MAAM,MAAM;AAC7C,WAAK,cAAc,IAAI,MAAM,KAAK;AAClC,aAAO;AAAA,IACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,WAAW,MAAM,QAAQ;AACvB,WAAK,+BAA8B;AACnC,UAAI,KAAK,MAAM,CAAC,KAAK,qBAAqB;AACxC,aAAK,sBAAsB,IAAI,oBAAoB,KAAK,IAAI,KAAK,qBAAqB,KAAK,oBAAoB;AAAA,MACjH;AACA,UAAI,KAAK,aAAa,CAAC,KAAK,sBAAsB;AAChD,aAAK,uBAAuB,IAAI,qBAAqB,KAAK,WAAW,KAAK,qBAAqB,KAAK,oBAAoB;AAAA,MAC1H;AACA,YAAM,QAAQ,KAAK,cAAc,IAAI,IAAI;AACzC,UAAI,OAAO,uBAAuB,KAAK,IAAI;AACzC,cAAM,cAAc,mBAAmB,QAAQ,KAAK,EAAE;AACtD,YAAI,aAAa;AACf,eAAK,oBAAoB,IAAI,MAAM;AAAA,YACjC,QAAQ;AAAA,YACR,GAAG;AAAA,UACb,CAAS;AACD,cAAI,OAAO;AACT,kBAAM,cAAc,YAAY,OAAO,YAAY,MAAM;AAAA,UAC3D;AAAA,QACF;AACA;AAAA,MACF;AACA,UAAI,OAAO,kBAAkB,KAAK,YAAY;AAC5C,cAAM,aAAa,oBAAoB,QAAQ,KAAK,UAAU;AAC9D,YAAI,YAAY;AACd,eAAK,qBAAqB,IAAI,MAAM,UAAU;AAC9C,cAAI,SAAS,OAAO,SAAS,OAAO,QAAQ;AAC1C,kBAAM,cAAc,OAAO,OAAO,OAAO,MAAM;AAAA,UACjD;AAAA,QACF;AACA;AAAA,MACF;AACA,UAAI,UAAU,OAAO,OAAO,eAAe,YAAY;AACrD,aAAK,qBAAqB,IAAI,MAAM,MAAM;AAC1C;AAAA,MACF;AAAA,IACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAQA,gBAAgB,MAAM,aAAa,OAAO,QAAQ;AAChD,WAAK,+BAA8B;AACnC,UAAI,KAAK,MAAM,CAAC,KAAK,qBAAqB;AACxC,aAAK,sBAAsB,IAAI,oBAAoB,KAAK,IAAI,KAAK,qBAAqB,KAAK,oBAAoB;AAAA,MACjH;AACA,WAAK,oBAAoB,IAAI,MAAM;AAAA,QACjC,QAAQ,EAAE,qBAAqB,KAAI;AAAA,QACnC;AAAA,QACA;AAAA,QACA;AAAA,MACN,CAAK;AACD,YAAM,QAAQ,KAAK,cAAc,IAAI,IAAI;AACzC,UAAI,OAAO;AACT,cAAM,cAAc,OAAO,MAAM;AAAA,MACnC;AAAA,IACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAQA,iBAAiB,MAAM,QAAQ,aAAa,cAAc;AACxD,YAAM,QAAQ,KAAK,cAAc,IAAI,IAAI;AACzC,UAAI,OAAO;AACT,YAAI,gBAAgB,UAAU,iBAAiB,QAAQ;AACrD,gBAAM,cAAc,aAAa,YAAY;AAAA,QAC/C;AACA,cAAM,cAAc,MAAM;AAAA,MAC5B;AAAA,IACF;AAAA;AAAA;AAAA;AAAA;AAAA,IAKA,mBAAmB,MAAM;AACvB,YAAM,QAAQ,KAAK,cAAc,IAAI,IAAI;AACzC,UAAI,OAAO;AACT,cAAM,QAAO;AACb,cAAM,OAAO,OAAM;AACnB,aAAK,cAAc,OAAO,IAAI;AAC9B,aAAK,oBAAoB,OAAO,IAAI;AACpC,aAAK,qBAAqB,OAAO,IAAI;AAAA,MACvC;AAAA,IACF;AAAA;AAAA;AAAA;AAAA;AAAA,IAKA,MAAM,sBAAsB;AAC1B,WAAK,+BAA8B;AACnC,UAAI,KAAK,qBAAqB;AAC5B,mBAAW,CAAC,MAAM,MAAM,KAAK,KAAK,qBAAqB;AACrD,gBAAM,QAAQ,KAAK,cAAc,IAAI,IAAI;AACzC,cAAI,OAAO;AACT,gBAAI,cAAc,OAAO;AACzB,gBAAI,QAAQ,OAAO;AACnB,gBAAI,SAAS,OAAO;AACpB,gBAAI,OAAO,OAAO,uBAAuB,OAAO,OAAO,oBAAoB;AACzE,4BAAc,OAAO,OAAO;AAC5B,sBAAQ,OAAO,OAAO,SAAS;AAC/B,uBAAS,OAAO,OAAO,UAAU;AAAA,YACnC;AACA,kBAAM,SAAS,MAAM,KAAK,oBAAoB,QAAQ,aAAa,OAAO,QAAQ,IAAI;AACtF,gBAAI,QAAQ;AACV,oBAAM,cAAc,MAAM;AAAA,YAC5B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AACA,UAAI,KAAK,sBAAsB;AAC7B,mBAAW,CAAC,MAAM,UAAU,KAAK,KAAK,sBAAsB;AAC1D,gBAAM,QAAQ,KAAK,cAAc,IAAI,IAAI;AACzC,cAAI,OAAO;AACT,kBAAM,SAAS,MAAM,KAAK,qBAAqB,QAAQ,UAAU;AACjE,gBAAI,QAAQ;AACV,oBAAM,cAAc,MAAM;AAAA,YAC5B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA;AAAA;AAAA;AAAA,IAIA,sBAAsB;AACpB,YAAM,WAAW,KAAK;AACtB,UAAI,CAAC,YAAY,SAAS,SAAS,KAAK,CAAC,KAAK;AAC5C;AACF,iBAAW,eAAe,SAAS,UAAU;AAC3C,YAAI,YAAY,SAAS;AACvB,sBAAY,QAAQ,KAAK,QAAQ;AAAA,QACnC;AAAA,MACF;AAAA,IACF;AAAA,IACA,YAAY,aAAa;AACvB,UAAI,KAAK,kBAAkB,GAAG;AAC5B,aAAK,gBAAgB;AACrB;AAAA,MACF;AACA,YAAM,YAAY,cAAc,KAAK;AACrC,WAAK,gBAAgB;AACrB,WAAK,iBAAiB,KAAK,SAAS;AACpC,UAAI,KAAK,iBAAiB,SAAS,KAAK,cAAc;AACpD,aAAK,iBAAiB,MAAK;AAAA,MAC7B;AACA,UAAI,KAAK,iBAAiB,SAAS;AACjC;AACF,YAAM,eAAe,KAAK,iBAAiB,OAAO,CAAC,GAAG,MAAM,IAAI,CAAC,IAAI,KAAK,iBAAiB;AAC3F,YAAM,WAAW,KAAK,iBAAiB,OAAO,CAAC,KAAK,SAAS,MAAM,KAAK,IAAI,OAAO,cAAc,CAAC,GAAG,CAAC,IAAI,KAAK,iBAAiB;AAChI,YAAM,YAAY,KAAK,KAAK,QAAQ;AACpC,UAAI,YAAY,GAAG;AACjB,aAAK,gBAAgB;AACrB;AAAA,MACF;AACA,UAAI,eAAe;AACnB,UAAI,eAAe;AACnB,iBAAW,QAAQ,KAAK,aAAa;AACnC,cAAM,OAAO,KAAK,IAAI,eAAe,KAAK,SAAS;AACnD,YAAI,OAAO,cAAc;AACvB,yBAAe;AACf,yBAAe;AAAA,QACjB;AAAA,MACF;AACA,UAAI,gBAAgB,eAAe,aAAa,aAAa,KAAK,iBAAiB;AACjF,aAAK,gBAAgB;AAAA,MACvB,OAAO;AACL,aAAK,gBAAgB;AAAA,MACvB;AAAA,IACF;AAAA,IACA,sBAAsB,OAAO,cAAc,WAAW,kBAAkB,mBAAmB,SAAS,IAAI;AACtG,UAAI,CAAC,SAAS,aAAa,KAAK,WAAW;AACzC;AACF,YAAM,MAAM,OAAO,MAAM,EAAE;AAC3B,UAAI,EAAE,OAAO,KAAK,UAAU;AAC1B,aAAK,QAAQ,GAAG,IAAI;AACpB,aAAK,QAAQ,GAAG,IAAI;AACpB,aAAK,UAAU,GAAG,IAAI;AAAA,MACxB;AACA,YAAM,eAAe,aAAa,KAAK,aAAa,KAAK,SAAS,CAAC;AACnE,WAAK,QAAQ,GAAG,IAAI,KAAK,IAAI,GAAG,aAAa,IAAI;AACjD,WAAK,QAAQ,GAAG,IAAI,KAAK,IAAI,KAAK,QAAQ,GAAG,GAAG,YAAY;AAC5D,WAAK,UAAU,GAAG,IAAI,KAAK,UAAU,GAAG,IAAI,MAAM,eAAe;AACjE,YAAM,WAAW,KAAK;AAAA,QACpB,KAAK,IAAI,GAAG,aAAa,IAAI;AAAA,QAC7B,GAAG,aAAa,MAAM,MAAM,CAAC,KAAK,YAAY;AAAA,MACpD;AACI,WAAK;AACL,UAAI,kBAAkB;AACpB,cAAM;AAAA,UACJ,KAAK,UAAU,GAAG;AAAA,UAClB,KAAK,QAAQ,GAAG;AAAA,UAChB;AAAA,UACA;AAAA,QACR;AAAA,MACI;AACA,UAAI,mBAAmB;AACrB,cAAM;AAAA,UACJ;AAAA,UACA;AAAA,QACR;AAAA,MACI;AAAA,IACF;AAAA,IACA,YAAY,OAAO,cAAc,YAAY,GAAG;AAC9C,UAAI,CAAC,SAAS,aAAa,KAAK,WAAW;AACzC;AACF,YAAM,cAAc,YAAY,IAAG;AACnC,UAAI,EAAE,MAAM,QAAQ,KAAK,UAAU;AACjC,aAAK,QAAQ,MAAM,IAAI,IAAI;AAC3B,aAAK,QAAQ,MAAM,IAAI,IAAI;AAC3B,aAAK,UAAU,MAAM,IAAI,IAAI;AAAA,MAC/B;AACA,YAAM,eAAe,aAAa,KAAK,aAAa,KAAK,SAAS,CAAC;AACnE,YAAM,YAAY,KAAK,IAAI,GAAG,aAAa,KAAK,MAAM,GAAG,CAAC;AAC1D,WAAK,QAAQ,MAAM,IAAI,IAAI,KAAK,IAAI,KAAK,QAAQ,MAAM,IAAI,GAAG,YAAY;AAC1E,WAAK,QAAQ,MAAM,IAAI,IAAI,KAAK,IAAI,KAAK,QAAQ,MAAM,IAAI,GAAG,YAAY;AAC1E,WAAK,UAAU,MAAM,IAAI,IAAI,KAAK,UAAU,MAAM,IAAI,IAAI,MAAM,eAAe;AAC/E,YAAM,WAAW,KAAK,IAAI,WAAW,GAAG,aAAa,MAAM,MAAM,CAAC,KAAK,YAAY,CAAC;AACpF,WAAK;AACL,UAAI,KAAK,iBAAiB,KAAK,gBAAgB,OAAO,GAAG;AACvD,aAAK,QAAQ,MAAM,IAAI,IAAI;AAC3B,aAAK,QAAQ,MAAM,IAAI,IAAI;AAAA,MAC7B;AACA,UAAI,MAAM,QAAQ;AAChB,YAAI,eAAe,KAAK,cAAc,MAAM,KAAK,eAAe;AAC9D,gBAAM;AAAA,YACJ,KAAK,UAAU,MAAM,IAAI;AAAA,YACzB;AAAA,YACA,KAAK,QAAQ,MAAM,IAAI;AAAA,YACvB;AAAA,YACA;AAAA,UACV;AAAA,QACM;AACA,YAAI,eAAe,KAAK,gBAAgB,MAAM,KAAK,iBAAiB;AAClE,gBAAM;AAAA,YACJ;AAAA,YACA;AAAA,UACV;AACQ,eAAK,gBAAgB;AAAA,QACvB;AAAA,MACF;AAAA,IACF;AAAA,IACA,IAAI,aAAa;AACf,aAAO,KAAK;AAAA,IACd;AAAA;AAAA;AAAA;AAAA,IAIA,UAAU;AACR,UAAI,KAAK,SAAS;AAChB,aAAK,IAAI,oBAAoB,SAAS,KAAK,WAAW;AAAA,MACxD,OAAO;AACL,eAAO,oBAAoB,UAAU,KAAK,YAAY;AAAA,MACxD;AACA,UAAI,KAAK,qBAAqB;AAC5B,aAAK,oBAAoB,QAAO;AAChC,aAAK,sBAAsB;AAAA,MAC7B;AACA,UAAI,KAAK,sBAAsB;AAC7B,aAAK,qBAAqB,QAAO;AACjC,aAAK,uBAAuB;AAAA,MAC9B;AACA,iBAAW,SAAS,KAAK,cAAc,OAAM,GAAI;AAC/C,cAAM,QAAO;AAAA,MACf;AACA,WAAK,cAAc,MAAK;AACxB,WAAK,oBAAoB,MAAK;AAC9B,WAAK,qBAAqB,MAAK;AAC/B,YAAM,WAAW,KAAK;AACtB,UAAI,UAAU;AACZ,mBAAW,eAAe,SAAS,UAAU;AAC3C,cAAI,YAAY,SAAS;AACvB,wBAAY,QAAO;AAAA,UACrB;AAAA,QACF;AACA,iBAAS,MAAK;AAAA,MAChB;AACA,UAAI,KAAK,iBAAiB;AACxB,aAAK,gBAAgB,OAAM;AAC3B,aAAK,kBAAkB;AAAA,MACzB;AACA,WAAK,IAAI,OAAM;AACf,WAAK,WAAW;AAChB,WAAK,UAAU;AACf,WAAK,WAAW;AAChB,WAAK,kBAAkB;AACvB,WAAK,aAAa;AAClB,WAAK,iBAAiB;AACtB,WAAK,iBAAiB,SAAS;AAC/B,WAAK,iBAAiB,KAAK,SAAS;AACpC,WAAK,iBAAiB,MAAM,SAAS;AACrC,YAAM,QAAO;AAAA,IACf;AAAA,EACF;AACA,SAAO,QAAQ;AACf,SAAO,eAAe;AACtB,MAAI,QAAQ;;;;;;;;;;;;","x_google_ignoreList":[0,1,2]}